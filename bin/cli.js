#!/usr/bin/env node
"use strict";var jc=Object.create;var ti=Object.defineProperty;var Mc=Object.getOwnPropertyDescriptor;var Vc=Object.getOwnPropertyNames;var Bc=Object.getPrototypeOf,Hc=Object.prototype.hasOwnProperty;var Ie=(t,e)=>()=>(t&&(e=t(t=0)),e);var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Gc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Vc(e))!Hc.call(t,i)&&i!==r&&ti(t,i,{get:()=>e[i],enumerable:!(n=Mc(e,i))||n.enumerable});return t};var ee=(t,e,r)=>(r=t!=null?jc(Bc(t)):{},Gc(e||!t||!t.__esModule?ti(r,"default",{value:t,enumerable:!0}):r,t));var ft=_(xr=>{var jt=class extends Error{constructor(e,r,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=r,this.exitCode=e,this.nestedError=void 0}},Or=class extends jt{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};xr.CommanderError=jt;xr.InvalidArgumentError=Or});var Mt=_(Ar=>{var{InvalidArgumentError:Uc}=ft(),Fr=class{constructor(e,r){switch(this.description=r||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.length>3&&this._name.slice(-3)==="..."&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,r){return r===this.defaultValue||!Array.isArray(r)?[e]:r.concat(e)}default(e,r){return this.defaultValue=e,this.defaultValueDescription=r,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new Uc(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function Wc(t){let e=t.name()+(t.variadic===!0?"...":"");return t.required?"<"+e+">":"["+e+"]"}Ar.Argument=Fr;Ar.humanReadableArgName=Wc});var Rr=_(ri=>{var{humanReadableArgName:Jc}=Mt(),Pr=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(e){let r=e.commands.filter(n=>!n._hidden);if(e._hasImplicitHelpCommand()){let[,n,i]=e._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),s=e.createCommand(n).helpOption(!1);s.description(e._helpCommandDescription),i&&s.arguments(i),r.push(s)}return this.sortSubcommands&&r.sort((n,i)=>n.name().localeCompare(i.name())),r}compareOptions(e,r){let n=i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,"");return n(e).localeCompare(n(r))}visibleOptions(e){let r=e.options.filter(s=>!s.hidden),n=e._hasHelpOption&&e._helpShortFlag&&!e._findOption(e._helpShortFlag),i=e._hasHelpOption&&!e._findOption(e._helpLongFlag);if(n||i){let s;n?i?s=e.createOption(e._helpFlags,e._helpDescription):s=e.createOption(e._helpShortFlag,e._helpDescription):s=e.createOption(e._helpLongFlag,e._helpDescription),r.push(s)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let r=[];for(let n=e.parent;n;n=n.parent){let i=n.options.filter(s=>!s.hidden);r.push(...i)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleArguments(e){return e._argsDescription&&e._args.forEach(r=>{r.description=r.description||e._argsDescription[r.name()]||""}),e._args.find(r=>r.description)?e._args:[]}subcommandTerm(e){let r=e._args.map(n=>Jc(n)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(r?" "+r:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,r){return r.visibleCommands(e).reduce((n,i)=>Math.max(n,r.subcommandTerm(i).length),0)}longestOptionTermLength(e,r){return r.visibleOptions(e).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestGlobalOptionTermLength(e,r){return r.visibleGlobalOptions(e).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestArgumentTermLength(e,r){return r.visibleArguments(e).reduce((n,i)=>Math.max(n,r.argumentTerm(i).length),0)}commandUsage(e){let r=e._name;e._aliases[0]&&(r=r+"|"+e._aliases[0]);let n="";for(let i=e.parent;i;i=i.parent)n=i.name()+" "+n;return n+r+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let r=[];return e.argChoices&&r.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&r.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&r.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&r.push(`env: ${e.envVar}`),r.length>0?`${e.description} (${r.join(", ")})`:e.description}argumentDescription(e){let r=[];if(e.argChoices&&r.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&r.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),r.length>0){let n=`(${r.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}formatHelp(e,r){let n=r.padWidth(e,r),i=r.helpWidth||80,s=2,o=2;function a(p,k){if(k){let b=`${p.padEnd(n+o)}${k}`;return r.wrap(b,i-s,n+o)}return p}function u(p){return p.join(`
`).replace(/^/gm," ".repeat(s))}let f=[`Usage: ${r.commandUsage(e)}`,""],c=r.commandDescription(e);c.length>0&&(f=f.concat([c,""]));let l=r.visibleArguments(e).map(p=>a(r.argumentTerm(p),r.argumentDescription(p)));l.length>0&&(f=f.concat(["Arguments:",u(l),""]));let h=r.visibleOptions(e).map(p=>a(r.optionTerm(p),r.optionDescription(p)));if(h.length>0&&(f=f.concat(["Options:",u(h),""])),this.showGlobalOptions){let p=r.visibleGlobalOptions(e).map(k=>a(r.optionTerm(k),r.optionDescription(k)));p.length>0&&(f=f.concat(["Global Options:",u(p),""]))}let m=r.visibleCommands(e).map(p=>a(r.subcommandTerm(p),r.subcommandDescription(p)));return m.length>0&&(f=f.concat(["Commands:",u(m),""])),f.join(`
`)}padWidth(e,r){return Math.max(r.longestOptionTermLength(e,r),r.longestGlobalOptionTermLength(e,r),r.longestSubcommandTermLength(e,r),r.longestArgumentTermLength(e,r))}wrap(e,r,n,i=40){if(e.match(/[\n]\s+/))return e;let s=r-n;if(s<i)return e;let o=e.slice(0,n),a=e.slice(n),u=" ".repeat(n),f=new RegExp(".{1,"+(s-1)+"}([\\s\u200B]|$)|[^\\s\u200B]+?([\\s\u200B]|$)","g"),c=a.match(f)||[];return o+c.map((l,h)=>(l.slice(-1)===`
`&&(l=l.slice(0,l.length-1)),(h>0?u:"")+l.trimRight())).join(`
`)}};ri.Help=Pr});var Nr=_(Vt=>{var{InvalidArgumentError:zc}=ft(),$r=class{constructor(e,r){this.flags=e,this.description=r||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let n=ni(e);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,r){return this.defaultValue=e,this.defaultValueDescription=r,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){return this.implied=Object.assign(this.implied||{},e),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,r){return r===this.defaultValue||!Array.isArray(r)?[e]:r.concat(e)}choices(e){return this.argChoices=e.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new zc(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return Yc(this.name().replace(/^no-/,""))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Dr=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(r=>{r.negate?this.negativeOptions.set(r.attributeName(),r):this.positiveOptions.set(r.attributeName(),r)}),this.negativeOptions.forEach((r,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(e,r){let n=r.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,s=i!==void 0?i:!1;return r.negate===(s===e)}};function Yc(t){return t.split("-").reduce((e,r)=>e+r[0].toUpperCase()+r.slice(1))}function ni(t){let e,r,n=t.split(/[ |,]+/);return n.length>1&&!/^[[<]/.test(n[1])&&(e=n.shift()),r=n.shift(),!e&&/^-[^-]$/.test(r)&&(e=r,r=void 0),{shortFlag:e,longFlag:r}}Vt.Option=$r;Vt.splitOptionFlags=ni;Vt.DualOptions=Dr});var si=_(ii=>{function Kc(t,e){if(Math.abs(t.length-e.length)>3)return Math.max(t.length,e.length);let r=[];for(let n=0;n<=t.length;n++)r[n]=[n];for(let n=0;n<=e.length;n++)r[0][n]=n;for(let n=1;n<=e.length;n++)for(let i=1;i<=t.length;i++){let s=1;t[i-1]===e[n-1]?s=0:s=1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+s),i>1&&n>1&&t[i-1]===e[n-2]&&t[i-2]===e[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[t.length][e.length]}function Qc(t,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let r=t.startsWith("--");r&&(t=t.slice(2),e=e.map(o=>o.slice(2)));let n=[],i=3,s=.4;return e.forEach(o=>{if(o.length<=1)return;let a=Kc(t,o),u=Math.max(t.length,o.length);(u-a)/u>s&&(a<i?(i=a,n=[o]):a===i&&n.push(o))}),n.sort((o,a)=>o.localeCompare(a)),r&&(n=n.map(o=>`--${o}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}ii.suggestSimilar=Qc});var fi=_(li=>{var Xc=require("events").EventEmitter,qr=require("child_process"),be=require("path"),Lr=require("fs"),N=require("process"),{Argument:Zc,humanReadableArgName:el}=Mt(),{CommanderError:Ir}=ft(),{Help:tl}=Rr(),{Option:oi,splitOptionFlags:rl,DualOptions:nl}=Nr(),{suggestSimilar:ai}=si(),mt=class extends Xc{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:r=>N.stdout.write(r),writeErr:r=>N.stderr.write(r),getOutHelpWidth:()=>N.stdout.isTTY?N.stdout.columns:void 0,getErrHelpWidth:()=>N.stderr.isTTY?N.stderr.columns:void 0,outputError:(r,n)=>n(r)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._hasHelpOption=e._hasHelpOption,this._helpFlags=e._helpFlags,this._helpDescription=e._helpDescription,this._helpShortFlag=e._helpShortFlag,this._helpLongFlag=e._helpLongFlag,this._helpCommandName=e._helpCommandName,this._helpCommandnameAndArgs=e._helpCommandnameAndArgs,this._helpCommandDescription=e._helpCommandDescription,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}command(e,r,n){let i=r,s=n;typeof i=="object"&&i!==null&&(s=i,i=null),s=s||{};let[,o,a]=e.match(/([^ ]+) *(.*)/),u=this.createCommand(o);return i&&(u.description(i),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,a&&u.arguments(a),this.commands.push(u),u.parent=this,u.copyInheritedSettings(this),i?this:u}createCommand(e){return new mt(e)}createHelp(){return Object.assign(new tl,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,r){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return r=r||{},r.isDefault&&(this._defaultCommandName=e._name),(r.noHelp||r.hidden)&&(e._hidden=!0),this.commands.push(e),e.parent=this,this}createArgument(e,r){return new Zc(e,r)}argument(e,r,n,i){let s=this.createArgument(e,r);return typeof n=="function"?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(e){return e.split(/ +/).forEach(r=>{this.argument(r)}),this}addArgument(e){let r=this._args.slice(-1)[0];if(r&&r.variadic)throw new Error(`only the last argument can be variadic '${r.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this._args.push(e),this}addHelpCommand(e,r){return e===!1?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,typeof e=="string"&&(this._helpCommandName=e.split(" ")[0],this._helpCommandnameAndArgs=e),this._helpCommandDescription=r||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return this._addImplicitHelpCommand===void 0?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(e,r){let n=["preSubcommand","preAction","postAction"];if(!n.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(r):this._lifeCycleHooks[e]=[r],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync")throw r},this}_exit(e,r,n){this._exitCallback&&this._exitCallback(new Ir(e,r,n)),N.exit(e)}action(e){let r=n=>{let i=this._args.length,s=n.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),e.apply(this,s)};return this._actionHandler=r,this}createOption(e,r){return new oi(e,r)}addOption(e){let r=e.name(),n=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(n,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(n,e.defaultValue,"default");this.options.push(e);let i=(s,o,a)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let u=this.getOptionValue(n);if(s!==null&&e.parseArg)try{s=e.parseArg(s,u)}catch(f){if(f.code==="commander.invalidArgument"){let c=`${o} ${f.message}`;this.error(c,{exitCode:f.exitCode,code:f.code})}throw f}else s!==null&&e.variadic&&(s=e._concatValue(s,u));s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(n,s,a)};return this.on("option:"+r,s=>{let o=`error: option '${e.flags}' argument '${s}' is invalid.`;i(s,o,"cli")}),e.envVar&&this.on("optionEnv:"+r,s=>{let o=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;i(s,o,"env")}),this}_optionEx(e,r,n,i,s){if(typeof r=="object"&&r instanceof oi)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let o=this.createOption(r,n);if(o.makeOptionMandatory(!!e.mandatory),typeof i=="function")o.default(s).argParser(i);else if(i instanceof RegExp){let a=i;i=(u,f)=>{let c=a.exec(u);return c?c[0]:f},o.default(s).argParser(i)}else o.default(i);return this.addOption(o)}option(e,r,n,i){return this._optionEx({},e,r,n,i)}requiredOption(e,r,n,i){return this._optionEx({mandatory:!0},e,r,n,i)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){if(this._passThroughOptions=!!e,this.parent&&e&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(e=!0){if(this._storeOptionsAsProperties=!!e,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,r){return this.setOptionValueWithSource(e,r,void 0)}setOptionValueWithSource(e,r,n){return this._storeOptionsAsProperties?this[e]=r:this._optionValues[e]=r,this._optionValueSources[e]=n,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let r;return ht(this).forEach(n=>{n.getOptionValueSource(e)!==void 0&&(r=n.getOptionValueSource(e))}),r}_prepareUserArgs(e,r){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");r=r||{},e===void 0&&(e=N.argv,N.versions&&N.versions.electron&&(r.from="electron")),this.rawArgs=e.slice();let n;switch(r.from){case void 0:case"node":this._scriptPath=e[1],n=e.slice(2);break;case"electron":N.defaultApp?(this._scriptPath=e[1],n=e.slice(2)):n=e.slice(1);break;case"user":n=e.slice(0);break;default:throw new Error(`unexpected parse option { from: '${r.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(e,r){let n=this._prepareUserArgs(e,r);return this._parseCommand([],n),this}async parseAsync(e,r){let n=this._prepareUserArgs(e,r);return await this._parseCommand([],n),this}_executeSubCommand(e,r){r=r.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function s(c,l){let h=be.resolve(c,l);if(Lr.existsSync(h))return h;if(i.includes(be.extname(l)))return;let m=i.find(p=>Lr.existsSync(`${h}${p}`));if(m)return`${h}${m}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o=e._executableFile||`${this._name}-${e._name}`,a=this._executableDir||"";if(this._scriptPath){let c;try{c=Lr.realpathSync(this._scriptPath)}catch{c=this._scriptPath}a=be.resolve(be.dirname(c),a)}if(a){let c=s(a,o);if(!c&&!e._executableFile&&this._scriptPath){let l=be.basename(this._scriptPath,be.extname(this._scriptPath));l!==this._name&&(c=s(a,`${l}-${e._name}`))}o=c||o}n=i.includes(be.extname(o));let u;N.platform!=="win32"?n?(r.unshift(o),r=ci(N.execArgv).concat(r),u=qr.spawn(N.argv[0],r,{stdio:"inherit"})):u=qr.spawn(o,r,{stdio:"inherit"}):(r.unshift(o),r=ci(N.execArgv).concat(r),u=qr.spawn(N.execPath,r,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(l=>{N.on(l,()=>{u.killed===!1&&u.exitCode===null&&u.kill(l)})});let f=this._exitCallback;f?u.on("close",()=>{f(new Ir(N.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):u.on("close",N.exit.bind(N)),u.on("error",c=>{if(c.code==="ENOENT"){let l=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",h=`'${o}' does not exist
 - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${l}`;throw new Error(h)}else if(c.code==="EACCES")throw new Error(`'${o}' not executable`);if(!f)N.exit(1);else{let l=new Ir(1,"commander.executeSubCommandAsync","(error)");l.nestedError=c,f(l)}}),this.runningCommand=u}_dispatchSubcommand(e,r,n){let i=this._findCommand(e);i||this.help({error:!0});let s;return s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,()=>{if(i._executableHandler)this._executeSubCommand(i,r.concat(n));else return i._parseCommand(r,n)}),s}_checkNumberOfArguments(){this._args.forEach((e,r)=>{e.required&&this.args[r]==null&&this.missingArgument(e.name())}),!(this._args.length>0&&this._args[this._args.length-1].variadic)&&this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){let e=(n,i,s)=>{let o=i;if(i!==null&&n.parseArg)try{o=n.parseArg(i,s)}catch(a){if(a.code==="commander.invalidArgument"){let u=`error: command-argument value '${i}' is invalid for argument '${n.name()}'. ${a.message}`;this.error(u,{exitCode:a.exitCode,code:a.code})}throw a}return o};this._checkNumberOfArguments();let r=[];this._args.forEach((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce((o,a)=>e(n,a,o),n.defaultValue))):s===void 0&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=e(n,s,n.defaultValue))),r[i]=s}),this.processedArgs=r}_chainOrCall(e,r){return e&&e.then&&typeof e.then=="function"?e.then(()=>r()):r()}_chainOrCallHooks(e,r){let n=e,i=[];return ht(this).reverse().filter(s=>s._lifeCycleHooks[r]!==void 0).forEach(s=>{s._lifeCycleHooks[r].forEach(o=>{i.push({hookedCommand:s,callback:o})})}),r==="postAction"&&i.reverse(),i.forEach(s=>{n=this._chainOrCall(n,()=>s.callback(s.hookedCommand,this))}),n}_chainOrCallSubCommandHook(e,r,n){let i=e;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(s=>{i=this._chainOrCall(i,()=>s(this,r))}),i}_parseCommand(e,r){let n=this.parseOptions(r);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(n.operands),r=n.unknown,this.args=e.concat(r),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),r);if(this._hasImplicitHelpCommand()&&e[0]===this._helpCommandName)return e.length===1&&this.help(),this._dispatchSubcommand(e[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return ui(this,r),this._dispatchSubcommand(this._defaultCommandName,e,r);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),ui(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},s=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let o;return o=this._chainOrCallHooks(o,"preAction"),o=this._chainOrCall(o,()=>this._actionHandler(this.processedArgs)),this.parent&&(o=this._chainOrCall(o,()=>{this.parent.emit(s,e,r)})),o=this._chainOrCallHooks(o,"postAction"),o}if(this.parent&&this.parent.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,e,r);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,r);this.listenerCount("command:*")?this.emit("command:*",e,r):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(r=>r._name===e||r._aliases.includes(e))}_findOption(e){return this.options.find(r=>r.is(e))}_checkForMissingMandatoryOptions(){for(let e=this;e;e=e.parent)e.options.forEach(r=>{r.mandatory&&e.getOptionValue(r.attributeName())===void 0&&e.missingMandatoryOptionValue(r)})}_checkForConflictingLocalOptions(){let e=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});e.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=e.find(s=>n.conflictsWith.includes(s.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){for(let e=this;e;e=e.parent)e._checkForConflictingLocalOptions()}parseOptions(e){let r=[],n=[],i=r,s=e.slice();function o(u){return u.length>1&&u[0]==="-"}let a=null;for(;s.length;){let u=s.shift();if(u==="--"){i===n&&i.push(u),i.push(...s);break}if(a&&!o(u)){this.emit(`option:${a.name()}`,u);continue}if(a=null,o(u)){let f=this._findOption(u);if(f){if(f.required){let c=s.shift();c===void 0&&this.optionMissingArgument(f),this.emit(`option:${f.name()}`,c)}else if(f.optional){let c=null;s.length>0&&!o(s[0])&&(c=s.shift()),this.emit(`option:${f.name()}`,c)}else this.emit(`option:${f.name()}`);a=f.variadic?f:null;continue}}if(u.length>2&&u[0]==="-"&&u[1]!=="-"){let f=this._findOption(`-${u[1]}`);if(f){f.required||f.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${f.name()}`,u.slice(2)):(this.emit(`option:${f.name()}`),s.unshift(`-${u.slice(2)}`));continue}}if(/^--[^=]+=/.test(u)){let f=u.indexOf("="),c=this._findOption(u.slice(0,f));if(c&&(c.required||c.optional)){this.emit(`option:${c.name()}`,u.slice(f+1));continue}}if(o(u)&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&r.length===0&&n.length===0){if(this._findCommand(u)){r.push(u),s.length>0&&n.push(...s);break}else if(u===this._helpCommandName&&this._hasImplicitHelpCommand()){r.push(u),s.length>0&&r.push(...s);break}else if(this._defaultCommandName){n.push(u),s.length>0&&n.push(...s);break}}if(this._passThroughOptions){i.push(u),s.length>0&&i.push(...s);break}i.push(u)}return{operands:r,unknown:n}}opts(){if(this._storeOptionsAsProperties){let e={},r=this.options.length;for(let n=0;n<r;n++){let i=this.options[n].attributeName();e[i]=i===this._versionOptionName?this._version:this[i]}return e}return this._optionValues}optsWithGlobals(){return ht(this).reduce((e,r)=>Object.assign(e,r.opts()),{})}error(e,r){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=r||{},i=n.exitCode||1,s=n.code||"commander.error";this._exit(i,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in N.env){let r=e.attributeName();(this.getOptionValue(r)===void 0||["default","config","env"].includes(this.getOptionValueSource(r)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,N.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new nl(this.options),r=n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n));this.options.filter(n=>n.implied!==void 0&&r(n.attributeName())&&e.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!r(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(e){let r=`error: missing required argument '${e}'`;this.error(r,{code:"commander.missingArgument"})}optionMissingArgument(e){let r=`error: option '${e.flags}' argument missing`;this.error(r,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let r=`error: required option '${e.flags}' not specified`;this.error(r,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,r){let n=o=>{let a=o.attributeName(),u=this.getOptionValue(a),f=this.options.find(l=>l.negate&&a===l.attributeName()),c=this.options.find(l=>!l.negate&&a===l.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:c||o},i=o=>{let a=n(o),u=a.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${a.envVar}'`:`option '${a.flags}'`},s=`error: ${i(e)} cannot be used with ${i(r)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let r="";if(e.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{let o=s.createHelp().visibleOptions(s).filter(a=>a.long).map(a=>a.long);i=i.concat(o),s=s.parent}while(s&&!s._enablePositionalOptions);r=ai(e,i)}let n=`error: unknown option '${e}'${r}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let r=this._args.length,n=r===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${r} argument${n} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],r="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(s=>{i.push(s.name()),s.alias()&&i.push(s.alias())}),r=ai(e,i)}let n=`error: unknown command '${e}'${r}`;this.error(n,{code:"commander.unknownCommand"})}version(e,r,n){if(e===void 0)return this._version;this._version=e,r=r||"-V, --version",n=n||"output the version number";let i=this.createOption(r,n);return this._versionOptionName=i.attributeName(),this.options.push(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,r){return e===void 0&&r===void 0?this._description:(this._description=e,r&&(this._argsDescription=r),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let r=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(r=this.commands[this.commands.length-1]),e===r._name)throw new Error("Command alias can't be the same as its name");return r._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(r=>this.alias(r)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let r=this._args.map(n=>el(n));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?r:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=be.basename(e,be.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let r=this.createHelp();return r.helpWidth===void 0&&(r.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),r.formatHelp(this,r)}_getHelpContext(e){e=e||{};let r={error:!!e.error},n;return r.error?n=i=>this._outputConfiguration.writeErr(i):n=i=>this._outputConfiguration.writeOut(i),r.write=e.write||n,r.command=this,r}outputHelp(e){let r;typeof e=="function"&&(r=e,e=void 0);let n=this._getHelpContext(e);ht(this).reverse().forEach(s=>s.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let i=this.helpInformation(n);if(r&&(i=r(i),typeof i!="string"&&!Buffer.isBuffer(i)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(i),this.emit(this._helpLongFlag),this.emit("afterHelp",n),ht(this).forEach(s=>s.emit("afterAllHelp",n))}helpOption(e,r){if(typeof e=="boolean")return this._hasHelpOption=e,this;this._helpFlags=e||this._helpFlags,this._helpDescription=r||this._helpDescription;let n=rl(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(e){this.outputHelp(e);let r=N.exitCode||0;r===0&&e&&typeof e!="function"&&e.error&&(r=1),this._exit(r,"commander.help","(outputHelp)")}addHelpText(e,r){let n=["beforeAll","before","after","afterAll"];if(!n.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${e}Help`;return this.on(i,s=>{let o;typeof r=="function"?o=r({error:s.error,command:s.command}):o=r,o&&s.write(`${o}
`)}),this}};function ui(t,e){t._hasHelpOption&&e.find(n=>n===t._helpLongFlag||n===t._helpShortFlag)&&(t.outputHelp(),t._exit(0,"commander.helpDisplayed","(outputHelp)"))}function ci(t){return t.map(e=>{if(!e.startsWith("--inspect"))return e;let r,n="127.0.0.1",i="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?r=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(r=s[1],/^\d+$/.test(s[3])?i=s[3]:n=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(r=s[1],n=s[3],i=s[4]),r&&i!=="0"?`${r}=${n}:${parseInt(i)+1}`:e})}function ht(t){let e=[];for(let r=t;r;r=r.parent)e.push(r);return e}li.Command=mt});var pi=_((ye,di)=>{var{Argument:il}=Mt(),{Command:hi}=fi(),{CommanderError:sl,InvalidArgumentError:mi}=ft(),{Help:ol}=Rr(),{Option:al}=Nr();ye=di.exports=new hi;ye.program=ye;ye.Argument=il;ye.Command=hi;ye.CommanderError=sl;ye.Help=ol;ye.InvalidArgumentError=mi;ye.InvalidOptionArgumentError=mi;ye.Option=al});var gi,Bt,ig,sg,og,ag,ug,cg,lg,fg,hg,mg,yi=Ie(()=>{gi=ee(pi(),1),{program:Bt,createCommand:ig,createArgument:sg,createOption:og,CommanderError:ag,InvalidArgumentError:ug,InvalidOptionArgumentError:cg,Command:lg,Argument:fg,Option:hg,Help:mg}=gi.default});var vi,_i=Ie(()=>{vi={name:"useful-tasks",version:"0.1.6",description:"A dependency resolver for git and some of simple tasks",author:{name:"Jinho Yun",email:"owlflyx12@gmail.com"},bin:{"useful-tasks":"bin/cli.js"},engines:{node:">=4.2.0"},entryPoint:"dist/index.js",license:"MIT",keywords:["git","symlink","dependency","task"],dependencies:{commander:"^9.4.0",debug:"^4.3.4","fs-extra":"^10.1.0","simple-git":"^3.18.0"},type:"commonjs",scripts:{start:"npm run build && node dist/index.js","start:ts":"ts-node index.ts",build:"npm run build:bin && npm run build:common","build:common":"esbuild index.ts --platform=node --sourcemap --bundle --outdir=dist --minify","build:bin":"esbuild cli.ts --platform=node --sourcemap --bundle --outdir=bin --minify","build:types":"tsc --emitDeclarationOnly --declaration --project tsconfig.json","test:values":"ts-node index.ts --cwd=./test --config=test_values.json","test:exclude":"ts-node index.ts --cwd=./test --config=test_echos.json --exclude=task-1,task-3","test:include":"ts-node index.ts --cwd=./test --config=test_echos.json --include=task-2","test:exclude_include":"ts-node index.ts --cwd=./test --config=test_echos.json --exclude=task-2 --include=task-2","test:custom_regex":"ts-node index.ts --cwd=./test --config=test_custom_value_replace_regex.json"},devDependencies:{"@types/commander":"^2.12.2","@types/debug":"^4.1.7","@types/fs-extra":"^9.0.13",esbuild:"^0.17.18","ts-node":"^10.9.1",typescript:"^4.8.4"}}});var ki,cl,bi,wi,Si=Ie(()=>{"use strict";yi();_i();ki=ee(require("path")),cl="useful_tasks.json",bi=()=>{console.log("######################################################################"),console.log("Useful Tasks : Parsing cli-arguments"),console.log("cwd",process.cwd()),console.log("argv",process.argv),Bt.name("useful-tasks").version(vi.version).option("--cwd <string>","Change working directory").option("--config <string>","A path of json configuraion",cl).option("--include <items>","Include specified task IDs to process. Comma separated e.g. my_task_01, my_task_02").option("--exclude <items>","Exclude specified task IDs from process. Comma separated e.g. my_task_01, my_task_02"),Bt.parse();let t=Bt.opts();t.include=wi(t.include),t.exclude=wi(t.exclude);let e=t;return console.log(`Using options : ${JSON.stringify(e,void 0,2)}`),e.cwd&&process.chdir(ki.default.resolve(e.cwd)),console.log("######################################################################"),e},wi=t=>{if(!t)return[];if(typeof t=="string"){let e=[];return t.split(",").forEach(n=>{e.push(n.trim())}),e}return t}});var jr,Mr,ll,Vr,Ti=Ie(()=>{"use strict";jr=ee(require("fs")),Mr=ee(require("path")),ll=t=>{if(!jr.default.existsSync(t))throw new Error(`The Path '${t}' does not exists!`);let e=jr.default.readFileSync(t,{encoding:"utf-8"});return JSON.parse(e)},Vr=t=>{let e=ll(t);if(e.extends){let r=Mr.default.dirname(t),n=Mr.default.resolve(r,e.extends);e=Object.assign({},e,Vr(n))}return e}});var Ei=_((wg,Ci)=>{var ze=1e3,Ye=ze*60,Ke=Ye*60,je=Ke*24,fl=je*7,hl=je*365.25;Ci.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ml(t);if(r==="number"&&isFinite(t))return e.long?pl(t):dl(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ml(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hl;case"weeks":case"week":case"w":return r*fl;case"days":case"day":case"d":return r*je;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ke;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ye;case"seconds":case"second":case"secs":case"sec":case"s":return r*ze;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function dl(t){var e=Math.abs(t);return e>=je?Math.round(t/je)+"d":e>=Ke?Math.round(t/Ke)+"h":e>=Ye?Math.round(t/Ye)+"m":e>=ze?Math.round(t/ze)+"s":t+"ms"}function pl(t){var e=Math.abs(t);return e>=je?Ht(t,e,je,"day"):e>=Ke?Ht(t,e,Ke,"hour"):e>=Ye?Ht(t,e,Ye,"minute"):e>=ze?Ht(t,e,ze,"second"):t+" ms"}function Ht(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Br=_((kg,Oi)=>{function gl(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Ei(),r.destroy=f,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let l=0;for(let h=0;h<c.length;h++)l=(l<<5)-l+c.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(c){let l,h=null,m,p;function k(...b){if(!k.enabled)return;let C=k,j=Number(new Date),G=j-(l||j);C.diff=G,C.prev=l,C.curr=j,l=j,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let me=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(Oe,lt)=>{if(Oe==="%%")return"%";me++;let xe=r.formatters[lt];if(typeof xe=="function"){let w=b[me];Oe=xe.call(C,w),b.splice(me,1),me--}return Oe}),r.formatArgs.call(C,b),(C.log||r.log).apply(C,b)}return k.namespace=c,k.useColors=r.useColors(),k.color=r.selectColor(c),k.extend=n,k.destroy=r.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,p=r.enabled(c)),p),set:b=>{h=b}}),typeof r.init=="function"&&r.init(k),k}function n(c,l){let h=r(this.namespace+(typeof l>"u"?":":l)+c);return h.log=this.log,h}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let l,h=(typeof c=="string"?c:"").split(/[\s,]+/),m=h.length;for(l=0;l<m;l++)h[l]&&(c=h[l].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(c))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Oi.exports=gl});var xi=_((ce,Gt)=>{ce.formatArgs=_l;ce.save=vl;ce.load=wl;ce.useColors=yl;ce.storage=kl();ce.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ce.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function yl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _l(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Gt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ce.log=console.debug||console.log||(()=>{});function vl(t){try{t?ce.storage.setItem("debug",t):ce.storage.removeItem("debug")}catch{}}function wl(){let t;try{t=ce.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function kl(){try{return localStorage}catch{}}Gt.exports=Br()(ce);var{formatters:bl}=Gt.exports;bl.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ai=_((Y,Wt)=>{var Sl=require("tty"),Ut=require("util");Y.init=Al;Y.log=Ol;Y.formatArgs=Cl;Y.save=xl;Y.load=Fl;Y.useColors=Tl;Y.destroy=Ut.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Y.colors=[6,2,3,4,5,1];try{let t=require("supports-color");t&&(t.stderr||t).level>=2&&(Y.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Y.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Tl(){return"colors"in Y.inspectOpts?!!Y.inspectOpts.colors:Sl.isatty(process.stderr.fd)}function Cl(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Wt.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=El()+e+" "+t[0]}function El(){return Y.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ol(...t){return process.stderr.write(Ut.format(...t)+`
`)}function xl(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Fl(){return process.env.DEBUG}function Al(t){t.inspectOpts={};let e=Object.keys(Y.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Y.inspectOpts[e[r]]}Wt.exports=Br()(Y);var{formatters:Fi}=Wt.exports;Fi.o=function(t){return this.inspectOpts.colors=this.useColors,Ut.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Fi.O=function(t){return this.inspectOpts.colors=this.useColors,Ut.inspect(t,this.inspectOpts)}});var dt=_((bg,Hr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Hr.exports=xi():Hr.exports=Ai()});var Qe,Pi,Gr=Ie(()=>{"use strict";Qe="useful-tasks",Pi="\\$\\{([a-zA-Z0-9\\.\\-_]*)\\}"});var Ri=_(le=>{"use strict";var Pl=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(le,"__esModule",{value:!0});var Rl=require("fs"),$l=Pl(dt()),Xe=$l.default("@kwsites/file-exists");function Dl(t,e,r){Xe("checking %s",t);try{let n=Rl.statSync(t);return n.isFile()&&e?(Xe("[OK] path represents a file"),!0):n.isDirectory()&&r?(Xe("[OK] path represents a directory"),!0):(Xe("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return Xe("[FAIL] path is not accessible: %o",n),!1;throw Xe("[FATAL] %o",n),n}}function Nl(t,e=le.READABLE){return Dl(t,(e&le.FILE)>0,(e&le.FOLDER)>0)}le.exists=Nl;le.FILE=1;le.FOLDER=2;le.READABLE=le.FILE+le.FOLDER});var $i=_(Jt=>{"use strict";function ql(t){for(var e in t)Jt.hasOwnProperty(e)||(Jt[e]=t[e])}Object.defineProperty(Jt,"__esModule",{value:!0});ql(Ri())});var Wr=_(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.createDeferred=Me.deferred=void 0;function Ur(){let t,e,r="pending";return{promise:new Promise((i,s)=>{t=i,e=s}),done(i){r==="pending"&&(r="resolved",t(i))},fail(i){r==="pending"&&(r="rejected",e(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}Me.deferred=Ur;Me.createDeferred=Ur;Me.default=Ur});function ms(t){return typeof t=="function"?t:He}function ds(t){return typeof t=="function"&&t!==He}function ps(t,e){let r=t.indexOf(e);return r<=0?[t,""]:[t.substr(0,r),t.substr(r+1)]}function gs(t,e=0){return ys(t)&&t.length>e?t[e]:void 0}function Be(t,e=0){if(ys(t)&&t.length>e)return t[t.length-1-e]}function ys(t){return!!(t&&typeof t.length=="number")}function St(t="",e=!0,r=`
`){return t.split(r).reduce((n,i)=>{let s=e?i.trim():i;return s&&n.push(s),n},[])}function fn(t,e){return St(t,!0).map(r=>e(r))}function hn(t){return(0,nr.exists)(t,nr.FOLDER)}function x(t,e){return Array.isArray(t)?t.includes(e)||t.push(e):t.add(e),e}function _s(t,e){return Array.isArray(t)&&!t.includes(e)&&t.push(e),t}function ir(t,e){if(Array.isArray(t)){let r=t.indexOf(e);r>=0&&t.splice(r,1)}else t.delete(e);return e}function Ae(t){return Array.isArray(t)?t:[t]}function vs(t){return Ae(t).map(String)}function q(t,e=0){if(t==null)return e;let r=parseInt(t,10);return isNaN(r)?e:r}function _t(t,e){let r=[];for(let n=0,i=t.length;n<i;n++)r.push(e,t[n]);return r}function vt(t){return(Array.isArray(t)?Buffer.concat(t):t).toString("utf-8")}function ws(t,e){return Object.assign({},...e.map(r=>r in t?{[r]:t[r]}:{}))}function Xr(t=0){return new Promise(e=>setTimeout(e,t))}function ke(t,e,r){return e(t)?t:arguments.length>2?r:void 0}function mn(t,e){return/number|string|boolean/.test(typeof t)&&(!e||!e.includes(typeof t))}function dn(t){return!!t&&Tt(t)==="[object Object]"}function ks(t){return typeof t=="function"}function Ts(...t){let e=process.cwd(),r=Object.assign(de({baseDir:e},Cs),...t.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||e,r.trimmed=r.trimmed===!0,r}function gn(t,e=[]){return dn(t)?Object.keys(t).reduce((r,n)=>{let i=t[n];return mn(i,["boolean"])?r.push(n+"="+i):r.push(n),r},e):e}function ne(t,e=0,r=!1){let n=[];for(let i=0,s=e<0?t.length:e;i<s;i++)"string|number".includes(typeof t[i])&&n.push(String(t[i]));return gn(yn(t),n),r||n.push(...zl(t)),n}function zl(t){let e=typeof Be(t)=="function";return ke(Be(t,e?1:0),Ct,[])}function yn(t){let e=ks(Be(t));return ke(Be(t,e?1:0),dn)}function M(t,e=!0){let r=ms(Be(t));return e||ds(r)?r:void 0}function en(t,e){return t(e.stdOut,e.stdErr)}function he(t,e,r,n=!0){return Ae(r).forEach(i=>{for(let s=St(i,n),o=0,a=s.length;o<a;o++){let u=(f=0)=>{if(!(o+f>=a))return s[o+f]};e.some(({parse:f})=>f(u,t))}}),t}function Ql(t){switch(t){case"bare":return Fs();case"root":return xs()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:or,parser:_n}}function xs(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:or,parser(e){return/^\.(git)?$/.test(e.trim())}}}function Fs(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:or,parser:_n}}function Xl(t){return/(Not a git repository|Kein Git-Repository)/i.test(String(t))}function Zl(t,e){let r=new Ps(t),n=t?$s:Rs;return St(e).forEach(i=>{let s=i.replace(n,"");r.paths.push(s),(Ds.test(s)?r.folders:r.files).push(s)}),r}function Ns(t){return{commands:ar,format:"empty",parser:t}}function ie(t){return{commands:ar,format:"empty",parser(){throw typeof t=="string"?new fs(t):t}}}function se(t,e=!1){return{commands:t,format:"utf-8",parser(r){return e?String(r).trim():r}}}function qs(t){return{commands:t,format:"buffer",parser(e){return e}}}function Ls(t){return t.format==="buffer"}function Is(t){return t.format==="empty"||!t.commands.length}function tf(t,e){let{cleanMode:r,options:n,valid:i}=nf(t);return r?i.options?(n.push(...e),n.some(af)?ie(vn):Ms(r,n)):ie(kn+JSON.stringify(t)):ie(wn)}function Ms(t,e){return{commands:["clean",`-${t}`,...e],format:"utf-8",parser(n){return Zl(t==="n",n)}}}function rf(t){return Array.isArray(t)&&t.every(e=>bn.has(e))}function nf(t){let e,r=[],n={cleanMode:!1,options:!0};return t.replace(/[^a-z]i/g,"").split("").forEach(i=>{sf(i)?(e=i,n.cleanMode=!0):n.options=n.options&&of(r[r.length]=`-${i}`)}),{cleanMode:e,options:r,valid:n}}function sf(t){return t==="f"||t==="n"}function of(t){return/^-[a-z]$/i.test(t)&&bn.has(t.charAt(1))}function af(t){return/^-[^\-]/.test(t)?t.indexOf("i")>0:t==="--interactive"}function uf(t){let e=new Hs;for(let r of Bs(t))e.addValue(r.file,String(r.key),r.value);return e}function cf(t,e){let r=null,n=[],i=new Map;for(let s of Bs(t,e))s.key===e&&(n.push(r=s.value),i.has(s.file)||i.set(s.file,[]),i.get(s.file).push(r));return{key:e,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function lf(t){return t.replace(/^(file):/,"")}function*Bs(t,e=null){let r=t.split("\0");for(let n=0,i=r.length-1;n<i;){let s=lf(r[n++]),o=r[n++],a=e;if(o.includes(`
`)){let u=ps(o,`
`);a=u[0],o=u[1]}yield{file:s,key:a,value:o}}}function Jr(t,e){return typeof t=="string"&&rn.hasOwnProperty(t)?t:e}function hf(t,e,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(t,e),{commands:i,format:"utf-8",parser(s){return s}}}function mf(t,e){let r=["config","--null","--show-origin","--get-all",t];return e&&r.splice(1,0,`--${e}`),{commands:r,format:"utf-8",parser(n){return cf(n,t)}}}function df(t){let e=["config","--list","--show-origin","--null"];return t&&e.push(`--${t}`),{commands:e,format:"utf-8",parser(r){return uf(r)}}}function pf(){return{addConfig(t,e,...r){return this._runTask(hf(t,e,r[0]===!0,Jr(r[1],"local")),M(arguments))},getConfig(t,e){return this._runTask(mf(t,Jr(e,void 0)),M(arguments))},listConfig(...t){return this._runTask(df(Jr(t[0],void 0)),M(arguments))}}}function gf(...t){return new Ws().param(...t)}function yf(t){let e=new Set,r={};return fn(t,n=>{let[i,s,o]=n.split(rt);e.add(i),(r[i]=r[i]||[]).push({line:q(s),path:i,preview:o})}),{paths:e,results:r}}function _f(){return{grep(t){let e=M(arguments),r=ne(arguments);for(let i of Us)if(r.includes(i))return this._runTask(ie(`git.grep: use of "${i}" is not supported.`),e);typeof t=="string"&&(t=gf().param(t));let n=["grep","--null","-n","--full-name",...r,...t];return this._runTask({commands:n,format:"utf-8",parser(i){return yf(i)}},e)}}}function vf(t,e){let r=["reset"];return Ys(t)&&r.push(`--${t}`),r.push(...e),se(r)}function wf(t){if(Ys(t))return t;switch(typeof t){case"string":case"undefined":return"soft"}}function Ys(t){return Ks.includes(t)}function kf(){return(0,er.default)("simple-git")}function Li(t,e,r){return!e||!String(e).replace(/\s*/,"")?r?(n,...i)=>{t(n,...i),r(n,...i)}:t:(n,...i)=>{t(`%s ${n}`,e,...i),r&&r(n,...i)}}function bf(t,e,{namespace:r}){if(typeof t=="string")return t;let n=e&&e.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function Sn(t,e,r,n=kf()){let i=t&&`[${t}]`||"",s=[],o=typeof e=="string"?n.extend(e):e,a=bf(ke(e,Q),o,n);return f(r);function u(c,l){return x(s,Sn(t,a.replace(/^[^:]+/,c),l,n))}function f(c){let l=c&&`[${c}]`||"",h=o&&Li(o,l)||He,m=Li(n,`${i} ${l}`,h);return Object.assign(o?h:m,{label:t,sibling:u,info:m,step:f})}}function Ze(t,e){return{method:gs(t.commands)||"",commands:e}}function Tf(t,e){return r=>{e("[ERROR] child process exception %o",r),t.push(Buffer.from(String(r.stack),"ascii"))}}function Ii(t,e,r,n){return i=>{r("%s received %L bytes",e,i),n("%B",i),t.push(i)}}function Of(t,e,r=He){let n=s=>{r(null,s)},i=s=>{s?.task===t&&r(s instanceof bt?xf(s):s,void 0)};e.then(n,i)}function xf(t){let e=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),e=He};return Object.create(t,Object.getOwnPropertyNames(t.git).reduce(r,{}));function r(n,i){return i in t||(n[i]={enumerable:!1,configurable:!1,get(){return e(i),t.git[i]}}),n}}function ji(t,e){return Ns(r=>{if(!hn(t))throw new Error(`Git.cwd: cannot change to non-directory "${t}"`);return(e||r).cwd=t})}function zr(t){let e=["checkout",...t];return e[1]==="-b"&&e.includes("-B")&&(e[1]=ir(e,"-B")),se(e)}function Pf(){return{checkout(){return this._runTask(zr(ne(arguments,1)),M(arguments))},checkoutBranch(t,e){return this._runTask(zr(["-b",t,e,...ne(arguments)]),M(arguments))},checkoutLocalBranch(t){return this._runTask(zr(["-b",t,...ne(arguments)]),M(arguments))}}}function $f(t){return he({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},ro,t)}function Nf(t,e,r){return{commands:["-c","core.abbrev=40","commit",..._t(t,"-m"),...e,...r],format:"utf-8",parser:$f}}function qf(){return{commit(e,...r){let n=M(arguments),i=t(e)||Nf(Ae(e),Ae(ke(r[0],Zt,[])),[...ke(r[1],Ct,[]),...ne(arguments,0,!0)]);return this._runTask(i,n)}};function t(e){return!Zt(e)&&ie("git.commit: requires the commit message to be supplied as a string/string[]")}}function If(t,e){let r=["hash-object",t];return e&&r.push("-w"),se(r,!0)}function Mf(t,e,r){let n=String(r).trim(),i;if(i=no.exec(n))return new Qt(t,e,!1,i[1]);if(i=io.exec(n))return new Qt(t,e,!0,i[1]);let s="",o=n.split(" ");for(;o.length;)if(o.shift()==="in"){s=o.join(" ");break}return new Qt(t,e,/^re/i.test(n),s)}function Bf(t){return t.includes(Tn)}function Hf(t=!1,e,r){let n=["init",...r];return t&&!Bf(n)&&n.splice(1,0,Tn),{commands:n,format:"utf-8",parser(i){return Mf(n.includes("--bare"),e,i)}}}function Cn(t){for(let e=0;e<t.length;e++){let r=En.exec(t[e]);if(r)return`--${r[1]}`}return""}function Uf(t){return En.test(t)}function oo(t=""){let e=ao[t];return r=>he(new so,e,r,!1)}function Jf(t,e){return e.reduce((r,n,i)=>(r[n]=t[i]||"",r),Object.create({diff:null}))}function co(t=Fn,e=lo,r=""){let n=oo(r);return function(i){let s=St(i,!0,On).map(function(o){let a=o.trim().split(xn),u=Jf(a[0].trim().split(t),e);return a.length>1&&a[1].trim()&&(u.diff=n(a[1])),u});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}function zf(t){let e=Cn(t),r=["diff"];return e===""&&(e="--stat",r.push("--stat=4096")),r.push(...t),ur(r)||{commands:r,format:"utf-8",parser:oo(e)}}function ur(t){let e=t.filter(Uf);if(e.length>1)return ie(`Summary flags are mutually exclusive - pick one of ${e.join(",")}`);if(e.length&&t.includes("-z"))return ie(`Summary flag ${e} parsing is not compatible with null termination option '-z'`)}function Yf(t,e){let r=[],n=[];return Object.keys(t).forEach(i=>{r.push(i),n.push(String(t[i]))}),[r,n.join(e)]}function Kf(t){return Object.keys(t).reduce((e,r)=>(r in on||(e[r]=t[r]),e),{})}function mo(t={},e=[]){let r=ke(t.splitter,Q,Fn),n=!mn(t.format)&&t.format?t.format:{hash:"%H",date:t.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:t.multiLine?"%B":"%b",author_name:t.mailMap!==!1?"%aN":"%an",author_email:t.mailMap!==!1?"%aE":"%ae"},[i,s]=Yf(n,r),o=[],a=[`--pretty=format:${On}${s}${xn}`,...e],u=t.n||t["max-count"]||t.maxCount;if(u&&a.push(`--max-count=${u}`),t.from||t.to){let f=t.symmetric!==!1?"...":"..";o.push(`${t.from||""}${f}${t.to||""}`)}return Q(t.file)&&o.push("--follow",t.file),gn(Kf(t),a),{fields:i,splitter:r,commands:[...a,...o]}}function Qf(t,e,r){let n=co(t,e,Cn(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Xf(){return{log(...r){let n=M(arguments),i=mo(yn(arguments),ke(arguments[0],Ct)),s=e(...r)||ur(i.commands)||t(i);return this._runTask(s,n)}};function t(r){return Qf(r.splitter,r.fields,r.commands)}function e(r,n){return Q(r)&&Q(n)&&ie("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}function Kr(t){return t.objects=t.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Hi(t){let e=/^\s*(\d+)/.exec(t),r=/delta (\d+)/i.exec(t);return{count:q(e&&e[1]||"0"),delta:q(r&&r[1]||"0")}}function vo(t,e){return he({remoteMessages:new ko},wo,e)}function rh(t,e){let r=he(new yo,So,[t,e]);return r.message&&r}function Qi(t){return t.length?{commands:["merge",...t],format:"utf-8",parser(e,r){let n=Co(e,r);if(n.failed)throw new bt(n);return n}}:ie("Git.merge requires at least one option")}function sh(t,e,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(t),s=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!s,alreadyUpdated:s,local:t,remote:e}}function ah(t={},e){return x(e,"--tags"),Rn(t,e)}function Rn(t={},e){let r=["push",...e];return t.branch&&r.splice(1,0,t.branch),t.remote&&r.splice(1,0,t.remote),ir(r,"-v"),x(r,"--verbose"),x(r,"--porcelain"),{commands:r,format:"utf-8",parser:Eo}}function uh(){return{showBuffer(){let t=["show",...ne(arguments,1)];return t.includes("--binary")||t.splice(1,0,"--binary"),this._runTask(qs(t),M(arguments))},show(){let t=["show",...ne(arguments,1)];return this._runTask(se(t),M(arguments))}}}function ts(t){let[e,r]=t.split(rt);return{from:r||e,to:e}}function fe(t,e,r){return[`${t}${e}`,r]}function Qr(t,...e){return e.map(r=>fe(t,r,(n,i)=>x(n.conflicted,i)))}function fh(t,e){let r=e.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,s,o){let a=`${i}${s}`,u=Ao.get(a);u&&u(t,o),a!=="##"&&a!=="!!"&&t.files.push(new Fo(o.replace(/\0.+$/,""),i,s))}}function mh(t){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...t.filter(r=>!Ro.includes(r))],parser(r){return Po(r)}}}function tr(t=0,e=0,r=0,n="",i=!0){return Object.defineProperty({major:t,minor:e,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function ph(){return tr(0,0,0,"",!1)}function gh(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:yh,onError(t,e,r,n){if(t.exitCode===-2)return r(Buffer.from($n));n(e)}})}}}function yh(t){return t===$n?ph():he(tr(0,0,0,t),$o,t)}function kh(t,e){return se(["apply",...e,...t])}function Sh(t,e){return{branch:t,hash:e,success:!0}}function Th(t){return{branch:t,hash:null,success:!1}}function Mo(t,e){return e===1&&cn.test(t)}function os(t){return t?t.charAt(0):""}function Bo(t){return he(new Vo,Ho,t)}function Uo(t){let e=["-d","-D","--delete"];return t.some(r=>e.includes(r))}function Fh(t){let e=Uo(t),r=["branch",...t];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return e?cr(n,i).all[0]:Bo(n)}}}function Ah(){return{format:"utf-8",commands:["branch","-v"],parser:Bo}}function Ph(t,e=!1){return{format:"utf-8",commands:["branch","-v",e?"-D":"-d",...t],parser(r,n){return cr(r,n)},onError({exitCode:r,stdOut:n},i,s,o){if(!Mo(String(i),r))return o(i);s(n)}}}function Rh(t,e=!1){let r={format:"utf-8",commands:["branch","-v",e?"-D":"-d",t],parser(n,i){return cr(n,i).branches[t]},onError({exitCode:n,stdErr:i,stdOut:s},o,a,u){if(!Mo(String(o),n))return u(o);throw new bt(r.parser(vt(s),vt(i)),String(o))}};return r}function Nh(t){return{commands:["check-ignore",...t],format:"utf-8",parser:Wo}}function Lh(t){return/^--upload-pack(=|$)/.test(t)}function Yo(t,e,r){let n=["clone",...r];return Q(t)&&n.push(t),Q(e)&&n.push(e),n.find(Lh)?ie("git.fetch: potential exploit argument blocked."):se(n)}function Ih(t,e,r){return x(r,"--mirror"),Yo(t,e,r)}function Mh(t,e){return he({raw:t,remote:null,branches:[],tags:[],updated:[],deleted:[]},Ko,[t,e])}function Bh(t){return/^--upload-pack(=|$)/.test(t)}function Hh(t,e,r){let n=["fetch",...r];return t&&e&&n.push(t,e),n.find(Bh)?ie("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:Mh}}function Uh(t){return he({moves:[]},Xo,t)}function Jh(t,e){return{commands:["mv","-v",...Ae(t),e],format:"utf-8",parser:Uh}}function Yh(t,e,r){let n=["pull",...r];return t&&e&&n.splice(1,0,t,e),{commands:n,format:"utf-8",parser(i,s){return Pn(i,s)},onError(i,s,o,a){let u=rh(vt(i.stdOut),vt(i.stdErr));if(u)return a(new bt(u));a(s)}}}function Qh(t){let e={};return ta(t,([r])=>e[r]={name:r}),Object.values(e)}function Xh(t){let e={};return ta(t,([r,n,i])=>{e.hasOwnProperty(r)||(e[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(e[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(e)}function ta(t,e){fn(t,r=>e(r.split(/\s+/)))}function em(t,e,r=[]){return se(["remote","add",...r,t,e])}function tm(t){let e=["remote"];return t&&e.push("-v"),{commands:e,format:"utf-8",parser:t?Xh:Qh}}function rm(t=[]){let e=[...t];return e[0]!=="ls-remote"&&e.unshift("ls-remote"),se(e)}function nm(t=[]){let e=[...t];return e[0]!=="remote"&&e.unshift("remote"),se(e)}function im(t){return se(["remote","remove",t])}function om(t={},e){let r=mo(t),n=["stash","list",...r.commands,...e],i=co(r.splitter,r.fields,Cn(n));return ur(n)||{commands:n,format:"utf-8",parser:i}}function um(t,e){return lr(["add",t,e])}function cm(t){return lr(["init",...t])}function lr(t){let e=[...t];return e[0]!=="submodule"&&e.unshift("submodule"),se(e)}function lm(t){return lr(["update",...t])}function hm(t,e){let r=isNaN(t),n=isNaN(e);return r!==n?r?1:-1:r?sa(t,e):0}function sa(t,e){return t===e?0:t>e?1:-1}function mm(t){return t.trim()}function Yt(t){return typeof t=="string"&&parseInt(t.replace(/^\D+/g,""),10)||0}function pm(t=[]){let e=t.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...t],parser(r){return oa(r,e)}}}function gm(t){return{format:"utf-8",commands:["tag",t],parser(){return{name:t}}}}function ym(t,e){return{format:"utf-8",commands:["tag","-a","-m",e,t],parser(){return{name:t}}}}function km(t){return t?[{type:"spawn.before",action(n,i){t.aborted&&i.kill(new Ve(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function s(){i.kill(new Ve(void 0,"abort","Abort signal received"))}t.addEventListener("abort",s),i.spawned.on("close",()=>t.removeEventListener("abort",s))}}]:void 0}function bm(t){return typeof t=="string"&&t.trim().toLowerCase()==="-c"}function Sm(t,e){if(bm(t)&&/^\s*protocol(.[a-z]+)?.allow/.test(e))throw new Ve(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function Tm(t,e){if(/^\s*--(upload|receive)-pack/.test(t))throw new Ve(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(e==="clone"&&/^\s*-u\b/.test(t))throw new Ve(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(e==="push"&&/^\s*--exec\b/.test(t))throw new Ve(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function Cm({allowUnsafeProtocolOverride:t=!1,allowUnsafePack:e=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,s)=>{let o=s<r.length?r[s+1]:"";t||Sm(i,o),e||Tm(i,n.method)}),r}}}function Em(t){let e=_t(t,"-c");return{type:"spawn.args",action(r){return[...e,...r]}}}function Om({onClose:t=!0,onExit:e=50}={}){function r(){let i=-1,s={close:(0,et.deferred)(),closeTimeout:(0,et.deferred)(),exit:(0,et.deferred)(),exitTimeout:(0,et.deferred)()},o=Promise.race([t===!1?us:s.closeTimeout.promise,e===!1?us:s.exitTimeout.promise]);return n(t,s.close,s.closeTimeout),n(e,s.exit,s.exitTimeout),{close(a){i=a,s.close.done()},exit(a){i=a,s.exit.done()},get exitCode(){return i},result:o}}function n(i,s,o){i!==!1&&(i===!0?s.promise:s.promise.then(()=>Xr(i))).then(o.done)}return{type:"spawn.after",action(i,s){return gt(this,arguments,function*(o,{spawned:a,close:u}){var f,c;let l=r(),h=!0,m=()=>void(h=!1);(f=a.stdout)==null||f.on("data",m),(c=a.stderr)==null||c.on("data",m),a.on("error",m),a.on("close",p=>l.close(p)),a.on("exit",p=>l.exit(p));try{yield l.result,h&&(yield Xr(50)),u(l.exitCode)}catch(p){u(l.exitCode,p)}})}}}function xm(t){return!!(t.exitCode&&t.stdErr.length)}function Fm(t){return Buffer.concat([...t.stdOut,...t.stdErr])}function Am(t=!1,e=xm,r=Fm){return(n,i)=>!t&&n||!e(i)?n:r(i)}function cs(t){return{type:"task.error",action(e,r){let n=t(e.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new Se(void 0,n.toString("utf-8"))}:{error:n}}}}function Rm(t){let e="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(s,o){return r.includes(o.method)?_s(s,e):s}},{type:"spawn.after",action(s,o){var a;o.commands.includes(e)&&((a=o.spawned.stderr)==null||a.on("data",u=>{let f=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(u.toString("utf8"));f&&t({method:o.method,stage:$m(f[1]),progress:q(f[2]),processed:q(f[3]),total:q(f[4])})}))}}]}function $m(t){return String(t.toLowerCase().split(" ",1))||"unknown"}function Dm(t){let e=ws(t,["uid","gid"]);return{type:"spawn.options",action(r){return de(de({},e),r)}}}function Nm({block:t,stdErr:e=!0,stdOut:r=!0}){if(t>0)return{type:"spawn.after",action(n,i){var s,o;let a;function u(){a&&clearTimeout(a),a=setTimeout(c,t)}function f(){var l,h;(l=i.spawned.stdout)==null||l.off("data",u),(h=i.spawned.stderr)==null||h.off("data",u),i.spawned.off("exit",f),i.spawned.off("close",f),a&&clearTimeout(a)}function c(){f(),i.kill(new Ve(void 0,"timeout","block timeout reached"))}r&&((s=i.spawned.stdout)==null||s.on("data",u)),e&&((o=i.spawned.stderr)==null||o.on("data",u)),i.spawned.on("exit",f),i.spawned.on("close",f),u()}}}function Lm(t,e){let r=new Pm,n=Ts(t&&(typeof t=="string"?{baseDir:t}:t)||{},e);if(!hn(n.baseDir))throw new wm(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(Em(n.config)),r.add(Cm(n.unsafe)),r.add(Om(n.completion)),n.abort&&r.add(km(n.abort)),n.progress&&r.add(Rm(n.progress)),n.timeout&&r.add(Nm(n.timeout)),n.spawnOptions&&r.add(Dm(n.spawnOptions)),r.add(cs(Am(!0))),n.errors&&r.add(cs(n.errors)),new qm(n,r)}var nr,er,Zs,qo,et,rr,Ll,Il,jl,ln,Di,ls,Ml,Ni,de,yt,Vl,g,Bl,V,Hl,I,gt,Se,Pe,bt,nt,fs,hs,rt,He,Tt,sr,Ct,Q,bs,Zt,pn,Ss,Zr,Gl,wt,Ul,T,Fe,Wl,Cs,Jl,Yl,Kl,Es,S,Os,kt,or,_n,As,Ps,Rs,$s,Ds,ef,tn,ar,H,js,vn,wn,kn,Kt,bn,Vs,Hs,ff,rn,Gs,Us,pt,qi,Ws,Js,zs,tt,Ks,Qs,Xs,zt,nn,Sf,sn,Cf,eo,to,Ef,Ff,Af,Rf,ro,Df,Lf,jf,Qt,no,io,Vf,Tn,Gf,En,Et,so,Wf,Yr,Mi,Vi,Bi,ao,uo,On,xn,Fn,lo,fo,ho,An,on,po,Xt,go,Zf,an,yo,eh,_o,th,wo,ko,bo,Gi,Ui,Wi,Ji,So,zi,Pn,To,Yi,Co,Ki,nh,ih,Xi,Eo,Zi,oh,Oo,xo,ch,es,Fo,lh,rs,Ao,Po,hh,Ro,dh,$n,$o,_h,Do,un,vh,No,ns,Lo,wh,Io,bh,jo,Ch,is,cn,ss,cr,Eh,Vo,Oh,Ho,xh,Go,$h,Wo,Dh,Jo,qh,zo,jh,Ko,Vh,Qo,Gh,Xo,Wh,Zo,zh,ea,Kh,Zh,ra,sm,na,am,ia,fm,as,oa,dm,aa,_m,vm,wm,Ve,us,Pm,qm,Dn,ua=Ie(()=>{nr=ee($i(),1),er=ee(dt(),1),Zs=require("child_process"),qo=ee(Wr(),1),et=ee(Wr(),1),rr=Object.defineProperty,Ll=Object.defineProperties,Il=Object.getOwnPropertyDescriptor,jl=Object.getOwnPropertyDescriptors,ln=Object.getOwnPropertyNames,Di=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable,Ni=(t,e,r)=>e in t?rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,de=(t,e)=>{for(var r in e||(e={}))ls.call(e,r)&&Ni(t,r,e[r]);if(Di)for(var r of Di(e))Ml.call(e,r)&&Ni(t,r,e[r]);return t},yt=(t,e)=>Ll(t,jl(e)),Vl=t=>rr(t,"__esModule",{value:!0}),g=(t,e)=>function(){return t&&(e=(0,t[ln(t)[0]])(t=0)),e},Bl=(t,e)=>function(){return e||(0,t[ln(t)[0]])((e={exports:{}}).exports,e),e.exports},V=(t,e)=>{for(var r in e)rr(t,r,{get:e[r],enumerable:!0})},Hl=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ln(e))!ls.call(t,i)&&(r||i!=="default")&&rr(t,i,{get:()=>e[i],enumerable:!(n=Il(e,i))||n.enumerable});return t},I=(t=>(e,r)=>t&&t.get(e)||(r=Hl(Vl({}),e,1),t&&t.set(e,r),r))(typeof WeakMap<"u"?new WeakMap:0),gt=(t,e,r)=>new Promise((n,i)=>{var s=u=>{try{a(r.next(u))}catch(f){i(f)}},o=u=>{try{a(r.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((r=r.apply(t,e)).next())}),Pe=g({"src/lib/errors/git-error.ts"(){Se=class extends Error{constructor(t,e){super(e),this.task=t,Object.setPrototypeOf(this,new.target.prototype)}}}}),nt=g({"src/lib/errors/git-response-error.ts"(){Pe(),bt=class extends Se{constructor(t,e){super(void 0,e||String(t)),this.git=t}}}}),hs=g({"src/lib/errors/task-configuration-error.ts"(){Pe(),fs=class extends Se{constructor(t){super(void 0,t)}}}});sr=g({"src/lib/utils/util.ts"(){rt="\0",He=()=>{},Tt=Object.prototype.toString.call.bind(Object.prototype.toString)}});Ss=g({"src/lib/utils/argument-filters.ts"(){sr(),Ct=t=>Array.isArray(t),Q=t=>typeof t=="string",bs=t=>Array.isArray(t)&&t.every(Q),Zt=t=>Q(t)||Array.isArray(t)&&t.every(Q),pn=t=>t==null||"number|boolean|function".includes(typeof t)?!1:Array.isArray(t)||typeof t=="string"||typeof t.length=="number"}}),Gl=g({"src/lib/utils/exit-codes.ts"(){Zr=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.ERROR=1]="ERROR",t[t.NOT_FOUND=-2]="NOT_FOUND",t[t.UNCLEAN=128]="UNCLEAN",t))(Zr||{})}}),Ul=g({"src/lib/utils/git-output-streams.ts"(){wt=class{constructor(t,e){this.stdOut=t,this.stdErr=e}asStrings(){return new wt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Wl=g({"src/lib/utils/line-parser.ts"(){T=class{constructor(t,e){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,s)=>this.addMatch(i,s,r(s)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(t)?t:[t],e&&(this.useMatches=e)}useMatches(t,e){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(t,e,r){let n=r&&t.exec(r);return n&&this.pushMatch(e,n),!!n}pushMatch(t,e){this.matches.push(...e.slice(1))}},Fe=class extends T{addMatch(t,e,r){return/^remote:\s/.test(String(r))&&super.addMatch(t,e,r)}pushMatch(t,e){(t>0||e.length>1)&&super.pushMatch(t,e)}}}});Jl=g({"src/lib/utils/simple-git-options.ts"(){Cs={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});Yl=g({"src/lib/utils/task-options.ts"(){Ss(),sr()}});Kl=g({"src/lib/utils/task-parser.ts"(){sr()}}),Es={};V(Es,{ExitCodes:()=>Zr,GitOutputStreams:()=>wt,LineParser:()=>T,NOOP:()=>He,NULL:()=>rt,RemoteLineParser:()=>Fe,append:()=>x,appendTaskOptions:()=>gn,asArray:()=>Ae,asFunction:()=>ms,asNumber:()=>q,asStringArray:()=>vs,bufferToString:()=>vt,callTaskParser:()=>en,createInstanceConfig:()=>Ts,delay:()=>Xr,filterArray:()=>Ct,filterFunction:()=>ks,filterHasLength:()=>pn,filterPlainObject:()=>dn,filterPrimitives:()=>mn,filterString:()=>Q,filterStringArray:()=>bs,filterStringOrStringArray:()=>Zt,filterType:()=>ke,first:()=>gs,folderExists:()=>hn,forEachLineWithContent:()=>fn,getTrailingOptions:()=>ne,including:()=>_s,isUserFunction:()=>ds,last:()=>Be,objectToString:()=>Tt,parseStringResponse:()=>he,pick:()=>ws,prefixedArray:()=>_t,remove:()=>ir,splitOn:()=>ps,toLinesWithContent:()=>St,trailingFunctionArgument:()=>M,trailingOptionsArgument:()=>yn});S=g({"src/lib/utils/index.ts"(){Ss(),Gl(),Ul(),Wl(),Jl(),Yl(),Kl(),sr()}}),Os={};V(Os,{CheckRepoActions:()=>kt,checkIsBareRepoTask:()=>Fs,checkIsRepoRootTask:()=>xs,checkIsRepoTask:()=>Ql});As=g({"src/lib/tasks/check-is-repo.ts"(){S(),kt=(t=>(t.BARE="bare",t.IN_TREE="tree",t.IS_REPO_ROOT="root",t))(kt||{}),or=({exitCode:t},e,r,n)=>{if(t===128&&Xl(e))return r(Buffer.from("false"));n(e)},_n=t=>t.trim()==="true"}});ef=g({"src/lib/responses/CleanSummary.ts"(){S(),Ps=class{constructor(t){this.dryRun=t,this.paths=[],this.files=[],this.folders=[]}},Rs=/^[a-z]+\s*/i,$s=/^[a-z]+\s+[a-z]+\s*/i,Ds=/\/$/}}),tn={};V(tn,{EMPTY_COMMANDS:()=>ar,adhocExecTask:()=>Ns,configurationErrorTask:()=>ie,isBufferTask:()=>Ls,isEmptyTask:()=>Is,straightThroughBufferTask:()=>qs,straightThroughStringTask:()=>se});H=g({"src/lib/tasks/task.ts"(){hs(),ar=[]}}),js={};V(js,{CONFIG_ERROR_INTERACTIVE_MODE:()=>vn,CONFIG_ERROR_MODE_REQUIRED:()=>wn,CONFIG_ERROR_UNKNOWN_OPTION:()=>kn,CleanOptions:()=>Kt,cleanTask:()=>Ms,cleanWithOptionsTask:()=>tf,isCleanOptionsArray:()=>rf});Vs=g({"src/lib/tasks/clean.ts"(){ef(),S(),H(),vn="Git clean interactive mode is not supported",wn='Git clean mode parameter ("n" or "f") is required',kn="Git clean unknown option found in: ",Kt=(t=>(t.DRY_RUN="n",t.FORCE="f",t.IGNORED_INCLUDED="x",t.IGNORED_ONLY="X",t.EXCLUDING="e",t.QUIET="q",t.RECURSIVE="d",t))(Kt||{}),bn=new Set(["i",...vs(Object.values(Kt))])}});ff=g({"src/lib/responses/ConfigList.ts"(){S(),Hs=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((t,e)=>Object.assign(t,this.values[e]),{})),this._all}addFile(t){if(!(t in this.values)){let e=Be(this.files);this.values[t]=e?Object.create(this.values[e]):{},this.files.push(t)}return this.values[t]}addValue(t,e,r){let n=this.addFile(t);n.hasOwnProperty(e)?Array.isArray(n[e])?n[e].push(r):n[e]=[n[e],r]:n[e]=r,this._all=void 0}}}});Gs=g({"src/lib/tasks/config.ts"(){ff(),S(),rn=(t=>(t.system="system",t.global="global",t.local="local",t.worktree="worktree",t))(rn||{})}});Js=g({"src/lib/tasks/grep.ts"(){S(),H(),Us=["-h"],pt=Symbol("grepQuery"),Ws=class{constructor(){this[qi]=[]}*[(qi=pt,Symbol.iterator)](){for(let t of this[pt])yield t}and(...t){return t.length&&this[pt].push("--and","(",..._t(t,"-e"),")"),this}param(...t){return this[pt].push(..._t(t,"-e")),this}}}}),zs={};V(zs,{ResetMode:()=>tt,getResetMode:()=>wf,resetTask:()=>vf});Qs=g({"src/lib/tasks/reset.ts"(){H(),tt=(t=>(t.MIXED="mixed",t.SOFT="soft",t.HARD="hard",t.MERGE="merge",t.KEEP="keep",t))(tt||{}),Ks=Array.from(Object.values(tt))}});Xs=g({"src/lib/git-logger.ts"(){S(),er.default.formatters.L=t=>String(pn(t)?t.length:"-"),er.default.formatters.B=t=>Buffer.isBuffer(t)?t.toString("utf8"):Tt(t)}}),Sf=g({"src/lib/runners/tasks-pending-queue.ts"(){Pe(),Xs(),zt=class{constructor(t="GitExecutor"){this.logLabel=t,this._queue=new Map}withProgress(t){return this._queue.get(t)}createProgress(t){let e=zt.getName(t.commands[0]),r=Sn(this.logLabel,e);return{task:t,logger:r,name:e}}push(t){let e=this.createProgress(t);return e.logger("Adding task to the queue, commands = %o",t.commands),this._queue.set(t,e),e}fatal(t){for(let[e,{logger:r}]of Array.from(this._queue.entries()))e===t.task?(r.info("Failed %o",t),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",t.message),this.complete(e);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(t){this.withProgress(t)&&this._queue.delete(t)}attempt(t){let e=this.withProgress(t);if(!e)throw new Se(void 0,"TasksPendingQueue: attempt called for an unknown task");return e.logger("Starting task"),e}static getName(t="empty"){return`task:${t}:${++zt.counter}`}},nn=zt,nn.counter=0}});Cf=g({"src/lib/runners/git-executor-chain.ts"(){Pe(),H(),S(),Sf(),sn=class{constructor(t,e,r){this._executor=t,this._scheduler=e,this._plugins=r,this._chain=Promise.resolve(),this._queue=new nn}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(t){this._cwd=t}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(t){return this._queue.push(t),this._chain=this._chain.then(()=>this.attemptTask(t))}attemptTask(t){return gt(this,null,function*(){let e=yield this._scheduler.next(),r=()=>this._queue.complete(t);try{let{logger:n}=this._queue.attempt(t);return yield Is(t)?this.attemptEmptyTask(t,n):this.attemptRemoteTask(t,n)}catch(n){throw this.onFatalException(t,n)}finally{r(),e()}})}onFatalException(t,e){let r=e instanceof Se?Object.assign(e,{task:t}):new Se(t,e&&String(e));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(t,e){return gt(this,null,function*(){let r=this._plugins.exec("spawn.args",[...t.commands],Ze(t,t.commands)),n=yield this.gitResponse(t,this.binary,r,this.outputHandler,e.step("SPAWN")),i=yield this.handleTaskData(t,r,n,e.step("HANDLE"));return e("passing response to task's parser as a %s",t.format),Ls(t)?en(t.parser,i):en(t.parser,i.asStrings())})}attemptEmptyTask(t,e){return gt(this,null,function*(){return e("empty task bypassing child process to call to task's parser"),t.parser(this)})}handleTaskData(t,e,r,n){let{exitCode:i,rejection:s,stdOut:o,stdErr:a}=r;return new Promise((u,f)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:c}=this._plugins.exec("task.error",{error:s},de(de({},Ze(t,e)),r));if(c&&t.onError)return n.info("exitCode=%s handling with custom error handler"),t.onError(r,c,l=>{n.info("custom error handler treated as success"),n("custom error returned a %s",Tt(l)),u(new wt(Array.isArray(l)?Buffer.concat(l):l,Buffer.concat(a)))},f);if(c)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,a.length,s),f(c);n.info("retrieving task output complete"),u(new wt(Buffer.concat(o),Buffer.concat(a)))})}gitResponse(t,e,r,n,i){return gt(this,null,function*(){let s=i.sibling("output"),o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},Ze(t,t.commands));return new Promise(a=>{let u=[],f=[];i.info("%s %o",e,r),i("%O",o);let c=this._beforeSpawn(t,r);if(c)return a({stdOut:u,stdErr:f,exitCode:9901,rejection:c});this._plugins.exec("spawn.before",void 0,yt(de({},Ze(t,r)),{kill(h){c=h||c}}));let l=(0,Zs.spawn)(e,r,o);l.stdout.on("data",Ii(u,"stdOut",i,s.step("stdOut"))),l.stderr.on("data",Ii(f,"stdErr",i,s.step("stdErr"))),l.on("error",Tf(f,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(e,l.stdout,l.stderr,[...r])),this._plugins.exec("spawn.after",void 0,yt(de({},Ze(t,r)),{spawned:l,close(h,m){a({stdOut:u,stdErr:f,exitCode:h,rejection:c||m})},kill(h){l.killed||(c=h,l.kill("SIGINT"))}}))})})}_beforeSpawn(t,e){let r;return this._plugins.exec("spawn.before",void 0,yt(de({},Ze(t,e)),{kill(n){r=n||r}})),r}}}}),eo={};V(eo,{GitExecutor:()=>to});Ef=g({"src/lib/runners/git-executor.ts"(){Cf(),to=class{constructor(t="git",e,r,n){this.binary=t,this.cwd=e,this._scheduler=r,this._plugins=n,this._chain=new sn(this,this._scheduler,this._plugins)}chain(){return new sn(this,this._scheduler,this._plugins)}push(t){return this._chain.push(t)}}}});Ff=g({"src/lib/task-callback.ts"(){nt(),S()}});Af=g({"src/lib/tasks/change-working-directory.ts"(){S(),H()}});Rf=g({"src/lib/tasks/checkout.ts"(){S(),H()}});Df=g({"src/lib/parsers/parse-commit.ts"(){S(),ro=[new T(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(t,[e,r,n])=>{t.branch=e,t.commit=n,t.root=!!r}),new T(/\s*Author:\s(.+)/i,(t,[e])=>{let r=e.split("<"),n=r.pop();!n||!n.includes("@")||(t.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new T(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0,t.summary.insertions=parseInt(r,10)||0,t.summary.deletions=parseInt(n,10)||0}),new T(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(t,[e,r,n])=>{t.summary.changes=parseInt(e,10)||0;let i=parseInt(r,10)||0;n==="-"?t.summary.deletions=i:n==="+"&&(t.summary.insertions=i)})]}});Lf=g({"src/lib/tasks/commit.ts"(){Df(),S(),H()}});jf=g({"src/lib/tasks/hash-object.ts"(){H()}});Vf=g({"src/lib/responses/InitSummary.ts"(){Qt=class{constructor(t,e,r,n){this.bare=t,this.path=e,this.existing=r,this.gitDir=n}},no=/^Init.+ repository in (.+)$/,io=/^Rein.+ in (.+)$/}});Gf=g({"src/lib/tasks/init.ts"(){Vf(),Tn="--bare"}});Et=g({"src/lib/args/log-format.ts"(){En=/^--(stat|numstat|name-only|name-status)(=|$)/}}),Wf=g({"src/lib/responses/DiffSummary.ts"(){so=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});uo=g({"src/lib/parsers/parse-diff-summary.ts"(){Et(),Wf(),S(),Yr=[new T(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(t,[e,r,n=""])=>{t.files.push({file:e.trim(),changes:q(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new T(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(t,[e,r,n])=>{t.files.push({file:e.trim(),before:q(r),after:q(n),binary:!0})}),new T(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(t,[e,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);t.changed=q(e),t.insertions=q(n?.[1]),t.deletions=q(i?.[1])})],Mi=[new T(/(\d+)\t(\d+)\t(.+)$/,(t,[e,r,n])=>{let i=q(e),s=q(r);t.changed++,t.insertions+=i,t.deletions+=s,t.files.push({file:n,changes:i+s,insertions:i,deletions:s,binary:!1})}),new T(/-\t-\t(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,after:0,before:0,binary:!0})})],Vi=[new T(/(.+)$/,(t,[e])=>{t.changed++,t.files.push({file:e,changes:0,insertions:0,deletions:0,binary:!1})})],Bi=[new T(/([ACDMRTUXB])\s*(.+)$/,(t,[e,r])=>{t.changed++,t.files.push({file:r,changes:0,insertions:0,deletions:0,binary:!1})})],ao={[""]:Yr,["--stat"]:Yr,["--numstat"]:Mi,["--name-status"]:Bi,["--name-only"]:Vi}}});fo=g({"src/lib/parsers/parse-list-log-summary.ts"(){S(),uo(),Et(),On="\xF2\xF2\xF2\xF2\xF2\xF2 ",xn=" \xF2\xF2",Fn=" \xF2 ",lo=["hash","date","message","refs","author_name","author_email"]}}),ho={};V(ho,{diffSummaryTask:()=>zf,validateLogFormatConfig:()=>ur});An=g({"src/lib/tasks/diff.ts"(){Et(),uo(),H()}});po=g({"src/lib/tasks/log.ts"(){Et(),fo(),S(),H(),An(),on=(t=>(t[t["--pretty"]=0]="--pretty",t[t["max-count"]=1]="max-count",t[t.maxCount=2]="maxCount",t[t.n=3]="n",t[t.file=4]="file",t[t.format=5]="format",t[t.from=6]="from",t[t.to=7]="to",t[t.splitter=8]="splitter",t[t.symmetric=9]="symmetric",t[t.mailMap=10]="mailMap",t[t.multiLine=11]="multiLine",t[t.strictDate=12]="strictDate",t))(on||{})}}),Zf=g({"src/lib/responses/MergeSummary.ts"(){Xt=class{constructor(t,e=null,r){this.reason=t,this.file=e,this.meta=r}toString(){return`${this.file}:${this.reason}`}},go=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),eh=g({"src/lib/responses/PullSummary.ts"(){an=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},yo=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});th=g({"src/lib/parsers/parse-remote-objects.ts"(){S(),_o=[new Fe(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=Kr(t.remoteMessages);Object.assign(i,{[n]:q(r)})}),new Fe(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(t,[e,r])=>{let n=e.toLowerCase(),i=Kr(t.remoteMessages);Object.assign(i,{[n]:q(r)})}),new Fe(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(t,[e,r,n])=>{let i=Kr(t.remoteMessages);i.total=Hi(e),i.reused=Hi(r),i.packReused=q(n)})]}});bo=g({"src/lib/parsers/parse-remote-messages.ts"(){S(),th(),wo=[new Fe(/^remote:\s*(.+)$/,(t,[e])=>(t.remoteMessages.all.push(e.trim()),!1)),..._o,new Fe([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(t,[e])=>{t.remoteMessages.pullRequestUrl=e}),new Fe([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(t,[e,r,n])=>{t.remoteMessages.vulnerabilities={count:q(e),summary:r,url:n}})],ko=class{constructor(){this.all=[]}}}});To=g({"src/lib/parsers/parse-pull.ts"(){eh(),S(),bo(),Gi=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Ui=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Wi=/^(create|delete) mode \d+ (.+)/,Ji=[new T(Gi,(t,[e,r,n])=>{t.files.push(e),r&&(t.insertions[e]=r.length),n&&(t.deletions[e]=n.length)}),new T(Ui,(t,[e,,r,,n])=>r!==void 0||n!==void 0?(t.summary.changes=+e||0,t.summary.insertions=+r||0,t.summary.deletions=+n||0,!0):!1),new T(Wi,(t,[e,r])=>{x(t.files,r),x(e==="create"?t.created:t.deleted,r)})],So=[new T(/^from\s(.+)$/i,(t,[e])=>void(t.remote=e)),new T(/^fatal:\s(.+)$/,(t,[e])=>void(t.message=e)),new T(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(t,[e,r,n,i])=>{t.branch.local=n,t.hash.local=e,t.branch.remote=i,t.hash.remote=r})],zi=(t,e)=>he(new an,Ji,[t,e]),Pn=(t,e)=>Object.assign(new an,zi(t,e),vo(t,e))}}),nh=g({"src/lib/parsers/parse-merge.ts"(){Zf(),S(),To(),Yi=[new T(/^Auto-merging\s+(.+)$/,(t,[e])=>{t.merges.push(e)}),new T(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(t,[e,r])=>{t.conflicts.push(new Xt(e,r))}),new T(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(t,[e,r,n])=>{t.conflicts.push(new Xt(e,r,{deleteRef:n}))}),new T(/^CONFLICT\s+\((.+)\):/,(t,[e])=>{t.conflicts.push(new Xt(e,null))}),new T(/^Automatic merge failed;\s+(.+)$/,(t,[e])=>{t.result=e})],Co=(t,e)=>Object.assign(Ki(t,e),Pn(t,e)),Ki=t=>he(new go,Yi,t)}});ih=g({"src/lib/tasks/merge.ts"(){nt(),nh(),H()}});oh=g({"src/lib/parsers/parse-push.ts"(){S(),bo(),Xi=[new T(/^Pushing to (.+)$/,(t,[e])=>{t.repo=e}),new T(/^updating local tracking ref '(.+)'/,(t,[e])=>{t.ref=yt(de({},t.ref||{}),{local:e})}),new T(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(t,[e,r,n])=>{t.pushed.push(sh(e,r,n))}),new T(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(t,[e,r,n])=>{t.branch=yt(de({},t.branch||{}),{local:e,remote:r,remoteName:n})}),new T(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(t,[e,r,n,i])=>{t.update={head:{local:e,remote:r},hash:{from:n,to:i}}})],Eo=(t,e)=>{let r=Zi(t,e),n=vo(t,e);return de(de({},r),n)},Zi=(t,e)=>he({pushed:[]},Xi,[t,e])}}),Oo={};V(Oo,{pushTagsTask:()=>ah,pushTask:()=>Rn});xo=g({"src/lib/tasks/push.ts"(){oh(),S()}});ch=g({"src/lib/tasks/show.ts"(){S(),H()}}),lh=g({"src/lib/responses/FileStatusSummary.ts"(){es=/^(.+) -> (.+)$/,Fo=class{constructor(t,e,r){if(this.path=t,this.index=e,this.working_dir=r,e+r==="R"){let n=es.exec(t)||[null,t,t];this.from=n[1]||"",this.path=n[2]||""}}}}});hh=g({"src/lib/responses/StatusSummary.ts"(){S(),lh(),rs=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Ao=new Map([fe(" ","A",(t,e)=>x(t.created,e)),fe(" ","D",(t,e)=>x(t.deleted,e)),fe(" ","M",(t,e)=>x(t.modified,e)),fe("A"," ",(t,e)=>x(t.created,e)&&x(t.staged,e)),fe("A","M",(t,e)=>x(t.created,e)&&x(t.staged,e)&&x(t.modified,e)),fe("D"," ",(t,e)=>x(t.deleted,e)&&x(t.staged,e)),fe("M"," ",(t,e)=>x(t.modified,e)&&x(t.staged,e)),fe("M","M",(t,e)=>x(t.modified,e)&&x(t.staged,e)),fe("R"," ",(t,e)=>{x(t.renamed,ts(e))}),fe("R","M",(t,e)=>{let r=ts(e);x(t.renamed,r),x(t.modified,r.to)}),fe("!","!",(t,e)=>{x(t.ignored=t.ignored||[],e)}),fe("?","?",(t,e)=>x(t.not_added,e)),...Qr("A","A","U"),...Qr("D","D","U"),...Qr("U","A","D","U"),["##",(t,e)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,s=/\.{3}(\S*)/,o=/\son\s([\S]+)$/,a;a=r.exec(e),t.ahead=a&&+a[1]||0,a=n.exec(e),t.behind=a&&+a[1]||0,a=i.exec(e),t.current=a&&a[1],a=s.exec(e),t.tracking=a&&a[1],a=o.exec(e),t.current=a&&a[1]||t.current,t.detached=/\(no branch\)/.test(e)}]]),Po=function(t){let e=t.split(rt),r=new rs;for(let n=0,i=e.length;n<i;){let s=e[n++].trim();s&&(s.charAt(0)==="R"&&(s+=rt+(e[n++]||"")),fh(r,s))}return r}}});dh=g({"src/lib/tasks/status.ts"(){hh(),Ro=["--null","-z"]}});_h=g({"src/lib/tasks/version.ts"(){S(),$n="installed=false",$o=[new T(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(t,[e,r,n,i=""])=>{Object.assign(t,tr(q(e),q(r),q(n),i))}),new T(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(t,[e,r,n,i=""])=>{Object.assign(t,tr(q(e),q(r),n,i))})]}}),Do={};V(Do,{SimpleGitApi:()=>un});vh=g({"src/lib/simple-git-api.ts"(){Ff(),Af(),Rf(),Lf(),Gs(),Js(),jf(),Gf(),po(),ih(),xo(),ch(),dh(),H(),_h(),S(),un=class{constructor(t){this._executor=t}_runTask(t,e){let r=this._executor.chain(),n=r.push(t);return e&&Of(t,n,e),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(t){return this._runTask(se(["add",...Ae(t)]),M(arguments))}cwd(t){let e=M(arguments);return typeof t=="string"?this._runTask(ji(t,this._executor),e):typeof t?.path=="string"?this._runTask(ji(t.path,t.root&&this._executor||void 0),e):this._runTask(ie("Git.cwd: workingDirectory must be supplied as a string"),e)}hashObject(t,e){return this._runTask(If(t,e===!0),M(arguments))}init(t){return this._runTask(Hf(t===!0,this._executor.cwd,ne(arguments)),M(arguments))}merge(){return this._runTask(Qi(ne(arguments)),M(arguments))}mergeFromTo(t,e){return Q(t)&&Q(e)?this._runTask(Qi([t,e,...ne(arguments)]),M(arguments,!1)):this._runTask(ie("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(t){return this._executor.outputHandler=t,this}push(){let t=Rn({remote:ke(arguments[0],Q),branch:ke(arguments[1],Q)},ne(arguments));return this._runTask(t,M(arguments))}stash(){return this._runTask(se(["stash",...ne(arguments)]),M(arguments))}status(){return this._runTask(mh(ne(arguments)),M(arguments))}},Object.assign(un.prototype,Pf(),qf(),pf(),_f(),Xf(),uh(),gh())}}),No={};V(No,{Scheduler:()=>Lo});wh=g({"src/lib/runners/scheduler.ts"(){S(),Xs(),ns=(()=>{let t=0;return()=>{t++;let{promise:e,done:r}=(0,qo.createDeferred)();return{promise:e,done:r,id:t}}})(),Lo=class{constructor(t=2){this.concurrency=t,this.logger=Sn("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",t)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let t=x(this.running,this.pending.shift());this.logger("Attempting id=%s",t.id),t.done(()=>{this.logger("Completing id=",t.id),ir(this.running,t),this.schedule()})}next(){let{promise:t,id:e}=x(this.pending,ns());return this.logger("Scheduling id=%s",e),this.schedule(),t}}}}),Io={};V(Io,{applyPatchTask:()=>kh});bh=g({"src/lib/tasks/apply-patch.ts"(){H()}});Ch=g({"src/lib/responses/BranchDeleteSummary.ts"(){jo=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});Eh=g({"src/lib/parsers/parse-branch-delete.ts"(){Ch(),S(),is=/(\S+)\s+\(\S+\s([^)]+)\)/,cn=/^error[^']+'([^']+)'/m,ss=[new T(is,(t,[e,r])=>{let n=Sh(e,r);t.all.push(n),t.branches[e]=n}),new T(cn,(t,[e])=>{let r=Th(e);t.errors.push(r),t.all.push(r),t.branches[e]=r})],cr=(t,e)=>he(new jo,ss,[t,e])}}),Oh=g({"src/lib/responses/BranchSummary.ts"(){Vo=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(t,e,r,n,i){t==="*"&&(this.detached=e,this.current=r),this.all.push(r),this.branches[r]={current:t==="*",linkedWorkTree:t==="+",name:r,commit:n,label:i}}}}});xh=g({"src/lib/parsers/parse-branch.ts"(){Oh(),S(),Ho=[new T(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(t,[e,r,n,i])=>{t.push(os(e),!0,r,n,i)}),new T(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(t,[e,r,n,i])=>{t.push(os(e),!1,r,n,i)})]}}),Go={};V(Go,{branchLocalTask:()=>Ah,branchTask:()=>Fh,containsDeleteBranchCommand:()=>Uo,deleteBranchTask:()=>Rh,deleteBranchesTask:()=>Ph});$h=g({"src/lib/tasks/branch.ts"(){nt(),Eh(),xh(),S()}}),Dh=g({"src/lib/responses/CheckIgnore.ts"(){Wo=t=>t.split(/\n/g).map(e=>e.trim()).filter(e=>!!e)}}),Jo={};V(Jo,{checkIgnoreTask:()=>Nh});qh=g({"src/lib/tasks/check-ignore.ts"(){Dh()}}),zo={};V(zo,{cloneMirrorTask:()=>Ih,cloneTask:()=>Yo});jh=g({"src/lib/tasks/clone.ts"(){H(),S()}});Vh=g({"src/lib/parsers/parse-fetch.ts"(){S(),Ko=[new T(/From (.+)$/,(t,[e])=>{t.remote=e}),new T(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.branches.push({name:e,tracking:r})}),new T(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(t,[e,r])=>{t.tags.push({name:e,tracking:r})}),new T(/- \[deleted]\s+\S+\s*-> (.+)$/,(t,[e])=>{t.deleted.push({tracking:e})}),new T(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(t,[e,r,n,i])=>{t.updated.push({name:n,tracking:i,to:r,from:e})})]}}),Qo={};V(Qo,{fetchTask:()=>Hh});Gh=g({"src/lib/tasks/fetch.ts"(){Vh(),H()}});Wh=g({"src/lib/parsers/parse-move.ts"(){S(),Xo=[new T(/^Renaming (.+) to (.+)$/,(t,[e,r])=>{t.moves.push({from:e,to:r})})]}}),Zo={};V(Zo,{moveTask:()=>Jh});zh=g({"src/lib/tasks/move.ts"(){Wh(),S()}}),ea={};V(ea,{pullTask:()=>Yh});Kh=g({"src/lib/tasks/pull.ts"(){nt(),To(),S()}});Zh=g({"src/lib/responses/GetRemoteSummary.ts"(){S()}}),ra={};V(ra,{addRemoteTask:()=>em,getRemotesTask:()=>tm,listRemotesTask:()=>rm,remoteTask:()=>nm,removeRemoteTask:()=>im});sm=g({"src/lib/tasks/remote.ts"(){Zh(),H()}}),na={};V(na,{stashListTask:()=>om});am=g({"src/lib/tasks/stash-list.ts"(){Et(),fo(),An(),po()}}),ia={};V(ia,{addSubModuleTask:()=>um,initSubModuleTask:()=>cm,subModuleTask:()=>lr,updateSubModuleTask:()=>lm});fm=g({"src/lib/tasks/sub-module.ts"(){H()}});dm=g({"src/lib/responses/TagList.ts"(){as=class{constructor(t,e){this.all=t,this.latest=e}},oa=function(t,e=!1){let r=t.split(`
`).map(mm).filter(Boolean);e||r.sort(function(i,s){let o=i.split("."),a=s.split(".");if(o.length===1||a.length===1)return hm(Yt(o[0]),Yt(a[0]));for(let u=0,f=Math.max(o.length,a.length);u<f;u++){let c=sa(Yt(o[u]),Yt(a[u]));if(c)return c}return 0});let n=e?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new as(r,n)}}}),aa={};V(aa,{addAnnotatedTagTask:()=>ym,addTagTask:()=>gm,tagListTask:()=>pm});_m=g({"src/lib/tasks/tag.ts"(){dm()}}),vm=Bl({"src/git.js"(t,e){var{GitExecutor:r}=(Ef(),I(eo)),{SimpleGitApi:n}=(vh(),I(Do)),{Scheduler:i}=(wh(),I(No)),{configurationErrorTask:s}=(H(),I(tn)),{asArray:o,filterArray:a,filterPrimitives:u,filterString:f,filterStringOrStringArray:c,filterType:l,getTrailingOptions:h,trailingFunctionArgument:m,trailingOptionsArgument:p}=(S(),I(Es)),{applyPatchTask:k}=(bh(),I(Io)),{branchTask:b,branchLocalTask:C,deleteBranchesTask:j,deleteBranchTask:G}=($h(),I(Go)),{checkIgnoreTask:me}=(qh(),I(Jo)),{checkIsRepoTask:ct}=(As(),I(Os)),{cloneTask:Oe,cloneMirrorTask:lt}=(jh(),I(zo)),{cleanWithOptionsTask:xe,isCleanOptionsArray:w}=(Vs(),I(js)),{diffSummaryTask:O}=(An(),I(ho)),{fetchTask:E}=(Gh(),I(Qo)),{moveTask:U}=(zh(),I(Zo)),{pullTask:W}=(Kh(),I(ea)),{pushTagsTask:B}=(xo(),I(Oo)),{addRemoteTask:$,getRemotesTask:D,listRemotesTask:F,remoteTask:J,removeRemoteTask:R}=(sm(),I(ra)),{getResetMode:Zn,resetTask:Fc}=(Qs(),I(zs)),{stashListTask:Ac}=(am(),I(na)),{addSubModuleTask:Pc,initSubModuleTask:Rc,subModuleTask:$c,updateSubModuleTask:Dc}=(fm(),I(ia)),{addAnnotatedTagTask:Nc,addTagTask:qc,tagListTask:Lc}=(_m(),I(aa)),{straightThroughBufferTask:Ic,straightThroughStringTask:we}=(H(),I(tn));function v(d,y){this._executor=new r(d.binary,d.baseDir,new i(d.maxConcurrentProcesses),y),this._trimmed=d.trimmed}(v.prototype=Object.create(n.prototype)).constructor=v,v.prototype.customBinary=function(d){return this._executor.binary=d,this},v.prototype.env=function(d,y){return arguments.length===1&&typeof d=="object"?this._executor.env=d:(this._executor.env=this._executor.env||{})[d]=y,this},v.prototype.stashList=function(d){return this._runTask(Ac(p(arguments)||{},a(d)&&d||[]),m(arguments))};function ei(d,y,A,Z){return typeof A!="string"?s(`git.${d}() requires a string 'repoPath'`):y(A,l(Z,f),h(arguments))}v.prototype.clone=function(){return this._runTask(ei("clone",Oe,...arguments),m(arguments))},v.prototype.mirror=function(){return this._runTask(ei("mirror",lt,...arguments),m(arguments))},v.prototype.mv=function(d,y){return this._runTask(U(d,y),m(arguments))},v.prototype.checkoutLatestTag=function(d){var y=this;return this.pull(function(){y.tags(function(A,Z){y.checkout(Z.latest,d)})})},v.prototype.pull=function(d,y,A,Z){return this._runTask(W(l(d,f),l(y,f),h(arguments)),m(arguments))},v.prototype.fetch=function(d,y){return this._runTask(E(l(d,f),l(y,f),h(arguments)),m(arguments))},v.prototype.silent=function(d){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},v.prototype.tags=function(d,y){return this._runTask(Lc(h(arguments)),m(arguments))},v.prototype.rebase=function(){return this._runTask(we(["rebase",...h(arguments)]),m(arguments))},v.prototype.reset=function(d){return this._runTask(Fc(Zn(d),h(arguments)),m(arguments))},v.prototype.revert=function(d){let y=m(arguments);return typeof d!="string"?this._runTask(s("Commit must be a string"),y):this._runTask(we(["revert",...h(arguments,0,!0),d]),y)},v.prototype.addTag=function(d){let y=typeof d=="string"?qc(d):s("Git.addTag requires a tag name");return this._runTask(y,m(arguments))},v.prototype.addAnnotatedTag=function(d,y){return this._runTask(Nc(d,y),m(arguments))},v.prototype.deleteLocalBranch=function(d,y,A){return this._runTask(G(d,typeof y=="boolean"?y:!1),m(arguments))},v.prototype.deleteLocalBranches=function(d,y,A){return this._runTask(j(d,typeof y=="boolean"?y:!1),m(arguments))},v.prototype.branch=function(d,y){return this._runTask(b(h(arguments)),m(arguments))},v.prototype.branchLocal=function(d){return this._runTask(C(),m(arguments))},v.prototype.raw=function(d){let y=!Array.isArray(d),A=[].slice.call(y?arguments:d,0);for(let ge=0;ge<A.length&&y;ge++)if(!u(A[ge])){A.splice(ge,A.length-ge);break}A.push(...h(arguments,0,!0));var Z=m(arguments);return A.length?this._runTask(we(A,this._trimmed),Z):this._runTask(s("Raw: must supply one or more command to execute"),Z)},v.prototype.submoduleAdd=function(d,y,A){return this._runTask(Pc(d,y),m(arguments))},v.prototype.submoduleUpdate=function(d,y){return this._runTask(Dc(h(arguments,!0)),m(arguments))},v.prototype.submoduleInit=function(d,y){return this._runTask(Rc(h(arguments,!0)),m(arguments))},v.prototype.subModule=function(d,y){return this._runTask($c(h(arguments)),m(arguments))},v.prototype.listRemote=function(){return this._runTask(F(h(arguments)),m(arguments))},v.prototype.addRemote=function(d,y,A){return this._runTask($(d,y,h(arguments)),m(arguments))},v.prototype.removeRemote=function(d,y){return this._runTask(R(d),m(arguments))},v.prototype.getRemotes=function(d,y){return this._runTask(D(d===!0),m(arguments))},v.prototype.remote=function(d,y){return this._runTask(J(h(arguments)),m(arguments))},v.prototype.tag=function(d,y){let A=h(arguments);return A[0]!=="tag"&&A.unshift("tag"),this._runTask(we(A),m(arguments))},v.prototype.updateServerInfo=function(d){return this._runTask(we(["update-server-info"]),m(arguments))},v.prototype.pushTags=function(d,y){let A=B({remote:l(d,f)},h(arguments));return this._runTask(A,m(arguments))},v.prototype.rm=function(d){return this._runTask(we(["rm","-f",...o(d)]),m(arguments))},v.prototype.rmKeepLocal=function(d){return this._runTask(we(["rm","--cached",...o(d)]),m(arguments))},v.prototype.catFile=function(d,y){return this._catFile("utf-8",arguments)},v.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},v.prototype._catFile=function(d,y){var A=m(y),Z=["cat-file"],ge=y[0];if(typeof ge=="string")return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),A);Array.isArray(ge)&&Z.push.apply(Z,ge);let Er=d==="buffer"?Ic(Z):we(Z);return this._runTask(Er,A)},v.prototype.diff=function(d,y){let A=f(d)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):we(["diff",...h(arguments)]);return this._runTask(A,m(arguments))},v.prototype.diffSummary=function(){return this._runTask(O(h(arguments,1)),m(arguments))},v.prototype.applyPatch=function(d){let y=c(d)?k(o(d),h([].slice.call(arguments,1))):s("git.applyPatch requires one or more string patches as the first argument");return this._runTask(y,m(arguments))},v.prototype.revparse=function(){let d=["rev-parse",...h(arguments,!0)];return this._runTask(we(d,!0),m(arguments))},v.prototype.clean=function(d,y,A){let Z=w(d),ge=Z&&d.join("")||l(d,f)||"",Er=h([].slice.call(arguments,Z?1:0));return this._runTask(xe(ge,Er),m(arguments))},v.prototype.exec=function(d){let y={commands:[],format:"utf-8",parser(){typeof d=="function"&&d()}};return this._runTask(y)},v.prototype.clearQueue=function(){return this},v.prototype.checkIgnore=function(d,y){return this._runTask(me(o(l(d,c,[]))),m(arguments))},v.prototype.checkIsRepo=function(d,y){return this._runTask(ct(l(d,f)),m(arguments))},e.exports=v}});Pe();wm=class extends Se{constructor(t,e){super(void 0,e),this.config=t}};Pe();Pe();Ve=class extends Se{constructor(t,e,r){super(t,r),this.task=t,this.plugin=e,Object.setPrototypeOf(this,new.target.prototype)}};nt();hs();As();Vs();Gs();Js();Qs();S();S();us=(0,et.deferred)().promise;Pe();S();Pm=class{constructor(){this.plugins=new Set}add(t){let e=[];return Ae(t).forEach(r=>r&&this.plugins.add(x(e,r))),()=>{e.forEach(r=>this.plugins.delete(r))}}exec(t,e,r){let n=e,i=Object.freeze(Object.create(r));for(let s of this.plugins)s.type===t&&(n=s.action(n,i));return n}};S();S();S();qm=vm();nt();Dn=Lm});var oe=_(Nn=>{"use strict";Nn.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{t.call(this,...e,(i,s)=>i!=null?n(i):r(s))})},"name",{value:t.name})};Nn.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:t.name})}});var la=_((iy,ca)=>{var Re=require("constants"),Im=process.cwd,fr=null,jm=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return fr||(fr=Im.call(process)),fr};try{process.cwd()}catch{}typeof process.chdir=="function"&&(qn=process.chdir,process.chdir=function(t){fr=null,qn.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,qn));var qn;ca.exports=Mm;function Mm(t){Re.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,l,h){h&&process.nextTick(h)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,l,h,m){m&&process.nextTick(m)},t.lchownSync=function(){}),jm==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function l(h,m,p){var k=Date.now(),b=0;c(h,m,function C(j){if(j&&(j.code==="EACCES"||j.code==="EPERM"||j.code==="EBUSY")&&Date.now()-k<6e4){setTimeout(function(){t.stat(m,function(G,me){G&&G.code==="ENOENT"?c(h,m,C):p(j)})},b),b<100&&(b+=10);return}p&&p(j)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function l(h,m,p,k,b,C){var j;if(C&&typeof C=="function"){var G=0;j=function(me,ct,Oe){if(me&&me.code==="EAGAIN"&&G<10)return G++,c.call(t,h,m,p,k,b,j);C.apply(this,arguments)}}return c.call(t,h,m,p,k,b,j)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(l,h,m,p,k){for(var b=0;;)try{return c.call(t,l,h,m,p,k)}catch(C){if(C.code==="EAGAIN"&&b<10){b++;continue}throw C}}}(t.readSync);function e(c){c.lchmod=function(l,h,m){c.open(l,Re.O_WRONLY|Re.O_SYMLINK,h,function(p,k){if(p){m&&m(p);return}c.fchmod(k,h,function(b){c.close(k,function(C){m&&m(b||C)})})})},c.lchmodSync=function(l,h){var m=c.openSync(l,Re.O_WRONLY|Re.O_SYMLINK,h),p=!0,k;try{k=c.fchmodSync(m,h),p=!1}finally{if(p)try{c.closeSync(m)}catch{}else c.closeSync(m)}return k}}function r(c){Re.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(l,h,m,p){c.open(l,Re.O_SYMLINK,function(k,b){if(k){p&&p(k);return}c.futimes(b,h,m,function(C){c.close(b,function(j){p&&p(C||j)})})})},c.lutimesSync=function(l,h,m){var p=c.openSync(l,Re.O_SYMLINK),k,b=!0;try{k=c.futimesSync(p,h,m),b=!1}finally{if(b)try{c.closeSync(p)}catch{}else c.closeSync(p)}return k}):c.futimes&&(c.lutimes=function(l,h,m,p){p&&process.nextTick(p)},c.lutimesSync=function(){})}function n(c){return c&&function(l,h,m){return c.call(t,l,h,function(p){f(p)&&(p=null),m&&m.apply(this,arguments)})}}function i(c){return c&&function(l,h){try{return c.call(t,l,h)}catch(m){if(!f(m))throw m}}}function s(c){return c&&function(l,h,m,p){return c.call(t,l,h,m,function(k){f(k)&&(k=null),p&&p.apply(this,arguments)})}}function o(c){return c&&function(l,h,m){try{return c.call(t,l,h,m)}catch(p){if(!f(p))throw p}}}function a(c){return c&&function(l,h,m){typeof h=="function"&&(m=h,h=null);function p(k,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),m&&m.apply(this,arguments)}return h?c.call(t,l,h,p):c.call(t,l,p)}}function u(c){return c&&function(l,h){var m=h?c.call(t,l,h):c.call(t,l);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function f(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var ma=_((sy,ha)=>{var fa=require("stream").Stream;ha.exports=Vm;function Vm(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);fa.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,u=o.length;a<u;a++){var f=o[a];this[f]=i[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(c,l){if(c){s.emit("error",c),s.readable=!1;return}s.fd=l,s.emit("open",l),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);fa.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var u=s[o];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var pa=_((oy,da)=>{"use strict";da.exports=Hm;var Bm=Object.getPrototypeOf||function(t){return t.__proto__};function Hm(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:Bm(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var te=_((ay,jn)=>{var L=require("fs"),Gm=la(),Um=ma(),Wm=pa(),hr=require("util"),K,dr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(K=Symbol.for("graceful-fs.queue"),dr=Symbol.for("graceful-fs.previous")):(K="___graceful-fs.queue",dr="___graceful-fs.previous");function Jm(){}function _a(t,e){Object.defineProperty(t,K,{get:function(){return e}})}var Ge=Jm;hr.debuglog?Ge=hr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ge=function(){var t=hr.format.apply(hr,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});L[K]||(ga=global[K]||[],_a(L,ga),L.close=function(t){function e(r,n){return t.call(L,r,function(i){i||ya(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,dr,{value:t}),e}(L.close),L.closeSync=function(t){function e(r){t.apply(L,arguments),ya()}return Object.defineProperty(e,dr,{value:t}),e}(L.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ge(L[K]),require("assert").equal(L[K].length,0)}));var ga;global[K]||_a(global,L[K]);jn.exports=Ln(Wm(L));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!L.__patched&&(jn.exports=Ln(L),L.__patched=!0);function Ln(t){Gm(t),t.gracefulify=Ln,t.createReadStream=ct,t.createWriteStream=Oe;var e=t.readFile;t.readFile=r;function r(w,O,E){return typeof O=="function"&&(E=O,O=null),U(w,O,E);function U(W,B,$,D){return e(W,B,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?it([U,[W,B,$],F,D||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(w,O,E,U){return typeof E=="function"&&(U=E,E=null),W(w,O,E,U);function W(B,$,D,F,J){return n(B,$,D,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?it([W,[B,$,D,F],R,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(w,O,E,U){return typeof E=="function"&&(U=E,E=null),W(w,O,E,U);function W(B,$,D,F,J){return s(B,$,D,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?it([W,[B,$,D,F],R,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(w,O,E,U){return typeof E=="function"&&(U=E,E=0),W(w,O,E,U);function W(B,$,D,F,J){return a(B,$,D,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?it([W,[B,$,D,F],R,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var f=t.readdir;t.readdir=l;var c=/^v[0-5]\./;function l(w,O,E){typeof O=="function"&&(E=O,O=null);var U=c.test(process.version)?function($,D,F,J){return f($,W($,D,F,J))}:function($,D,F,J){return f($,D,W($,D,F,J))};return U(w,O,E);function W(B,$,D,F){return function(J,R){J&&(J.code==="EMFILE"||J.code==="ENFILE")?it([U,[B,$,D],J,F||Date.now(),Date.now()]):(R&&R.sort&&R.sort(),typeof D=="function"&&D.call(this,J,R))}}}if(process.version.substr(0,4)==="v0.8"){var h=Um(t);C=h.ReadStream,G=h.WriteStream}var m=t.ReadStream;m&&(C.prototype=Object.create(m.prototype),C.prototype.open=j);var p=t.WriteStream;p&&(G.prototype=Object.create(p.prototype),G.prototype.open=me),Object.defineProperty(t,"ReadStream",{get:function(){return C},set:function(w){C=w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return G},set:function(w){G=w},enumerable:!0,configurable:!0});var k=C;Object.defineProperty(t,"FileReadStream",{get:function(){return k},set:function(w){k=w},enumerable:!0,configurable:!0});var b=G;Object.defineProperty(t,"FileWriteStream",{get:function(){return b},set:function(w){b=w},enumerable:!0,configurable:!0});function C(w,O){return this instanceof C?(m.apply(this,arguments),this):C.apply(Object.create(C.prototype),arguments)}function j(){var w=this;xe(w.path,w.flags,w.mode,function(O,E){O?(w.autoClose&&w.destroy(),w.emit("error",O)):(w.fd=E,w.emit("open",E),w.read())})}function G(w,O){return this instanceof G?(p.apply(this,arguments),this):G.apply(Object.create(G.prototype),arguments)}function me(){var w=this;xe(w.path,w.flags,w.mode,function(O,E){O?(w.destroy(),w.emit("error",O)):(w.fd=E,w.emit("open",E))})}function ct(w,O){return new t.ReadStream(w,O)}function Oe(w,O){return new t.WriteStream(w,O)}var lt=t.open;t.open=xe;function xe(w,O,E,U){return typeof E=="function"&&(U=E,E=null),W(w,O,E,U);function W(B,$,D,F,J){return lt(B,$,D,function(R,Zn){R&&(R.code==="EMFILE"||R.code==="ENFILE")?it([W,[B,$,D,F],R,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}return t}function it(t){Ge("ENQUEUE",t[0].name,t[1]),L[K].push(t),In()}var mr;function ya(){for(var t=Date.now(),e=0;e<L[K].length;++e)L[K][e].length>2&&(L[K][e][3]=t,L[K][e][4]=t);In()}function In(){if(clearTimeout(mr),mr=void 0,L[K].length!==0){var t=L[K].shift(),e=t[0],r=t[1],n=t[2],i=t[3],s=t[4];if(i===void 0)Ge("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){Ge("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,u=Math.max(s-i,1),f=Math.min(u*1.2,100);a>=f?(Ge("RETRY",e.name,r),e.apply(null,r.concat([i]))):L[K].push(t)}mr===void 0&&(mr=setTimeout(In,0))}}});var Ue=_($e=>{"use strict";var va=oe().fromCallback,ae=te(),zm=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof ae[t]=="function");Object.assign($e,ae);zm.forEach(t=>{$e[t]=va(ae[t])});$e.exists=function(t,e){return typeof e=="function"?ae.exists(t,e):new Promise(r=>ae.exists(t,r))};$e.read=function(t,e,r,n,i,s){return typeof s=="function"?ae.read(t,e,r,n,i,s):new Promise((o,a)=>{ae.read(t,e,r,n,i,(u,f,c)=>{if(u)return a(u);o({bytesRead:f,buffer:c})})})};$e.write=function(t,e,...r){return typeof r[r.length-1]=="function"?ae.write(t,e,...r):new Promise((n,i)=>{ae.write(t,e,...r,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffer:a})})})};typeof ae.writev=="function"&&($e.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?ae.writev(t,e,...r):new Promise((n,i)=>{ae.writev(t,e,...r,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffers:a})})})});typeof ae.realpath.native=="function"?$e.realpath.native=va(ae.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ka=_((cy,wa)=>{"use strict";var Ym=require("path");wa.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Ym.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var Ca=_((ly,Mn)=>{"use strict";var ba=Ue(),{checkPath:Sa}=ka(),Ta=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Mn.exports.makeDir=async(t,e)=>(Sa(t),ba.mkdir(t,{mode:Ta(e),recursive:!0}));Mn.exports.makeDirSync=(t,e)=>(Sa(t),ba.mkdirSync(t,{mode:Ta(e),recursive:!0}))});var _e=_((fy,Ea)=>{"use strict";var Km=oe().fromPromise,{makeDir:Qm,makeDirSync:Vn}=Ca(),Bn=Km(Qm);Ea.exports={mkdirs:Bn,mkdirsSync:Vn,mkdirp:Bn,mkdirpSync:Vn,ensureDir:Bn,ensureDirSync:Vn}});var De=_((hy,xa)=>{"use strict";var Xm=oe().fromPromise,Oa=Ue();function Zm(t){return Oa.access(t).then(()=>!0).catch(()=>!1)}xa.exports={pathExists:Xm(Zm),pathExistsSync:Oa.existsSync}});var Hn=_((my,Fa)=>{"use strict";var st=te();function ed(t,e,r,n){st.open(t,"r+",(i,s)=>{if(i)return n(i);st.futimes(s,e,r,o=>{st.close(s,a=>{n&&n(o||a)})})})}function td(t,e,r){let n=st.openSync(t,"r+");return st.futimesSync(n,e,r),st.closeSync(n)}Fa.exports={utimesMillis:ed,utimesMillisSync:td}});var We=_((dy,Ra)=>{"use strict";var ot=Ue(),z=require("path"),rd=require("util");function nd(t,e,r){let n=r.dereference?i=>ot.stat(i,{bigint:!0}):i=>ot.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function id(t,e,r){let n,i=r.dereference?o=>ot.statSync(o,{bigint:!0}):o=>ot.lstatSync(o,{bigint:!0}),s=i(t);try{n=i(e)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:n}}function sd(t,e,r,n,i){rd.callbackify(nd)(t,e,n,(s,o)=>{if(s)return i(s);let{srcStat:a,destStat:u}=o;if(u){if(Ot(a,u)){let f=z.basename(t),c=z.basename(e);return r==="move"&&f!==c&&f.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&Gn(t,e)?i(new Error(pr(t,e,r))):i(null,{srcStat:a,destStat:u})})}function od(t,e,r,n){let{srcStat:i,destStat:s}=id(t,e,n);if(s){if(Ot(i,s)){let o=z.basename(t),a=z.basename(e);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&Gn(t,e))throw new Error(pr(t,e,r));return{srcStat:i,destStat:s}}function Aa(t,e,r,n,i){let s=z.resolve(z.dirname(t)),o=z.resolve(z.dirname(r));if(o===s||o===z.parse(o).root)return i();ot.stat(o,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):Ot(e,u)?i(new Error(pr(t,r,n))):Aa(t,e,o,n,i))}function Pa(t,e,r,n){let i=z.resolve(z.dirname(t)),s=z.resolve(z.dirname(r));if(s===i||s===z.parse(s).root)return;let o;try{o=ot.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Ot(e,o))throw new Error(pr(t,r,n));return Pa(t,e,s,n)}function Ot(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Gn(t,e){let r=z.resolve(t).split(z.sep).filter(i=>i),n=z.resolve(e).split(z.sep).filter(i=>i);return r.reduce((i,s,o)=>i&&n[o]===s,!0)}function pr(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}Ra.exports={checkPaths:sd,checkPathsSync:od,checkParentPaths:Aa,checkParentPathsSync:Pa,isSrcSubdir:Gn,areIdentical:Ot}});var Ma=_((py,ja)=>{"use strict";var ue=te(),xt=require("path"),ad=_e().mkdirs,ud=De().pathExists,cd=Hn().utimesMillis,Ft=We();function ld(t,e,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ft.checkPaths(t,e,"copy",r,(i,s)=>{if(i)return n(i);let{srcStat:o,destStat:a}=s;Ft.checkParentPaths(t,o,e,"copy",u=>u?n(u):r.filter?Na($a,a,t,e,r,n):$a(a,t,e,r,n))})}function $a(t,e,r,n,i){let s=xt.dirname(r);ud(s,(o,a)=>{if(o)return i(o);if(a)return gr(t,e,r,n,i);ad(s,u=>u?i(u):gr(t,e,r,n,i))})}function Na(t,e,r,n,i,s){Promise.resolve(i.filter(r,n)).then(o=>o?t(e,r,n,i,s):s(),o=>s(o))}function fd(t,e,r,n,i){return n.filter?Na(gr,t,e,r,n,i):gr(t,e,r,n,i)}function gr(t,e,r,n,i){(n.dereference?ue.stat:ue.lstat)(e,(o,a)=>o?i(o):a.isDirectory()?_d(a,t,e,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?hd(a,t,e,r,n,i):a.isSymbolicLink()?kd(t,e,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function hd(t,e,r,n,i,s){return e?md(t,r,n,i,s):qa(t,r,n,i,s)}function md(t,e,r,n,i){if(n.overwrite)ue.unlink(r,s=>s?i(s):qa(t,e,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function qa(t,e,r,n,i){ue.copyFile(e,r,s=>s?i(s):n.preserveTimestamps?dd(t.mode,e,r,i):yr(r,t.mode,i))}function dd(t,e,r,n){return pd(t)?gd(r,t,i=>i?n(i):Da(t,e,r,n)):Da(t,e,r,n)}function pd(t){return(t&128)===0}function gd(t,e,r){return yr(t,e|128,r)}function Da(t,e,r,n){yd(e,r,i=>i?n(i):yr(r,t,n))}function yr(t,e,r){return ue.chmod(t,e,r)}function yd(t,e,r){ue.stat(t,(n,i)=>n?r(n):cd(e,i.atime,i.mtime,r))}function _d(t,e,r,n,i,s){return e?La(r,n,i,s):vd(t.mode,r,n,i,s)}function vd(t,e,r,n,i){ue.mkdir(r,s=>{if(s)return i(s);La(e,r,n,o=>o?i(o):yr(r,t,i))})}function La(t,e,r,n){ue.readdir(t,(i,s)=>i?n(i):Ia(s,t,e,r,n))}function Ia(t,e,r,n,i){let s=t.pop();return s?wd(t,s,e,r,n,i):i()}function wd(t,e,r,n,i,s){let o=xt.join(r,e),a=xt.join(n,e);Ft.checkPaths(o,a,"copy",i,(u,f)=>{if(u)return s(u);let{destStat:c}=f;fd(c,o,a,i,l=>l?s(l):Ia(t,r,n,i,s))})}function kd(t,e,r,n,i){ue.readlink(e,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=xt.resolve(process.cwd(),o)),t)ue.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ue.symlink(o,r,i):i(a):(n.dereference&&(u=xt.resolve(process.cwd(),u)),Ft.isSrcSubdir(o,u)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${u}'.`)):t.isDirectory()&&Ft.isSrcSubdir(u,o)?i(new Error(`Cannot overwrite '${u}' with '${o}'.`)):bd(o,r,i)));else return ue.symlink(o,r,i)})}function bd(t,e,r){ue.unlink(e,n=>n?r(n):ue.symlink(t,e,r))}ja.exports=ld});var Ua=_((gy,Ga)=>{"use strict";var X=te(),At=require("path"),Sd=_e().mkdirsSync,Td=Hn().utimesMillisSync,Pt=We();function Cd(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=Pt.checkPathsSync(t,e,"copy",r);return Pt.checkParentPathsSync(t,n,e,"copy"),Ed(i,t,e,r)}function Ed(t,e,r,n){if(n.filter&&!n.filter(e,r))return;let i=At.dirname(r);return X.existsSync(i)||Sd(i),Va(t,e,r,n)}function Od(t,e,r,n){if(!(n.filter&&!n.filter(e,r)))return Va(t,e,r,n)}function Va(t,e,r,n){let s=(n.dereference?X.statSync:X.lstatSync)(e);if(s.isDirectory())return Dd(s,t,e,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return xd(s,t,e,r,n);if(s.isSymbolicLink())return Ld(t,e,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function xd(t,e,r,n,i){return e?Fd(t,r,n,i):Ba(t,r,n,i)}function Fd(t,e,r,n){if(n.overwrite)return X.unlinkSync(r),Ba(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Ba(t,e,r,n){return X.copyFileSync(e,r),n.preserveTimestamps&&Ad(t.mode,e,r),Un(r,t.mode)}function Ad(t,e,r){return Pd(t)&&Rd(r,t),$d(e,r)}function Pd(t){return(t&128)===0}function Rd(t,e){return Un(t,e|128)}function Un(t,e){return X.chmodSync(t,e)}function $d(t,e){let r=X.statSync(t);return Td(e,r.atime,r.mtime)}function Dd(t,e,r,n,i){return e?Ha(r,n,i):Nd(t.mode,r,n,i)}function Nd(t,e,r,n){return X.mkdirSync(r),Ha(e,r,n),Un(r,t)}function Ha(t,e,r){X.readdirSync(t).forEach(n=>qd(n,t,e,r))}function qd(t,e,r,n){let i=At.join(e,t),s=At.join(r,t),{destStat:o}=Pt.checkPathsSync(i,s,"copy",n);return Od(o,i,s,n)}function Ld(t,e,r,n){let i=X.readlinkSync(e);if(n.dereference&&(i=At.resolve(process.cwd(),i)),t){let s;try{s=X.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return X.symlinkSync(i,r);throw o}if(n.dereference&&(s=At.resolve(process.cwd(),s)),Pt.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(X.statSync(r).isDirectory()&&Pt.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return Id(i,r)}else return X.symlinkSync(i,r)}function Id(t,e){return X.unlinkSync(e),X.symlinkSync(t,e)}Ga.exports=Cd});var _r=_((yy,Wa)=>{"use strict";var jd=oe().fromCallback;Wa.exports={copy:jd(Ma()),copySync:Ua()}});var tu=_((_y,eu)=>{"use strict";var Ja=te(),Qa=require("path"),P=require("assert"),Rt=process.platform==="win32";function Xa(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||Ja[r],r=r+"Sync",t[r]=t[r]||Ja[r]}),t.maxBusyTries=t.maxBusyTries||3}function Wn(t,e,r){let n=0;typeof e=="function"&&(r=e,e={}),P(t,"rimraf: missing path"),P.strictEqual(typeof t,"string","rimraf: path should be a string"),P.strictEqual(typeof r,"function","rimraf: callback function required"),P(e,"rimraf: invalid options argument provided"),P.strictEqual(typeof e,"object","rimraf: options should be object"),Xa(e),za(t,e,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<e.maxBusyTries){n++;let o=n*100;return setTimeout(()=>za(t,e,i),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function za(t,e,r){P(t),P(e),P(typeof r=="function"),e.lstat(t,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Rt)return Ya(t,e,n,r);if(i&&i.isDirectory())return vr(t,e,n,r);e.unlink(t,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return Rt?Ya(t,e,s,r):vr(t,e,s,r);if(s.code==="EISDIR")return vr(t,e,s,r)}return r(s)})})}function Ya(t,e,r,n){P(t),P(e),P(typeof n=="function"),e.chmod(t,438,i=>{i?n(i.code==="ENOENT"?null:r):e.stat(t,(s,o)=>{s?n(s.code==="ENOENT"?null:r):o.isDirectory()?vr(t,e,r,n):e.unlink(t,n)})})}function Ka(t,e,r){let n;P(t),P(e);try{e.chmodSync(t,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=e.statSync(t)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?wr(t,e,r):e.unlinkSync(t)}function vr(t,e,r,n){P(t),P(e),P(typeof n=="function"),e.rmdir(t,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Md(t,e,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Md(t,e,r){P(t),P(e),P(typeof r=="function"),e.readdir(t,(n,i)=>{if(n)return r(n);let s=i.length,o;if(s===0)return e.rmdir(t,r);i.forEach(a=>{Wn(Qa.join(t,a),e,u=>{if(!o){if(u)return r(o=u);--s===0&&e.rmdir(t,r)}})})})}function Za(t,e){let r;e=e||{},Xa(e),P(t,"rimraf: missing path"),P.strictEqual(typeof t,"string","rimraf: path should be a string"),P(e,"rimraf: missing options"),P.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Rt&&Ka(t,e,n)}try{r&&r.isDirectory()?wr(t,e,null):e.unlinkSync(t)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Rt?Ka(t,e,n):wr(t,e,n);if(n.code!=="EISDIR")throw n;wr(t,e,n)}}function wr(t,e,r){P(t),P(e);try{e.rmdirSync(t)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Vd(t,e);else if(n.code!=="ENOENT")throw n}}function Vd(t,e){if(P(t),P(e),e.readdirSync(t).forEach(r=>Za(Qa.join(t,r),e)),Rt){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}eu.exports=Wn;Wn.sync=Za});var $t=_((vy,nu)=>{"use strict";var kr=te(),Bd=oe().fromCallback,ru=tu();function Hd(t,e){if(kr.rm)return kr.rm(t,{recursive:!0,force:!0},e);ru(t,e)}function Gd(t){if(kr.rmSync)return kr.rmSync(t,{recursive:!0,force:!0});ru.sync(t)}nu.exports={remove:Bd(Hd),removeSync:Gd}});var fu=_((wy,lu)=>{"use strict";var Ud=oe().fromPromise,ou=Ue(),au=require("path"),uu=_e(),cu=$t(),iu=Ud(async function(e){let r;try{r=await ou.readdir(e)}catch{return uu.mkdirs(e)}return Promise.all(r.map(n=>cu.remove(au.join(e,n))))});function su(t){let e;try{e=ou.readdirSync(t)}catch{return uu.mkdirsSync(t)}e.forEach(r=>{r=au.join(t,r),cu.removeSync(r)})}lu.exports={emptyDirSync:su,emptydirSync:su,emptyDir:iu,emptydir:iu}});var pu=_((ky,du)=>{"use strict";var Wd=oe().fromCallback,hu=require("path"),Ne=te(),mu=_e();function Jd(t,e){function r(){Ne.writeFile(t,"",n=>{if(n)return e(n);e()})}Ne.stat(t,(n,i)=>{if(!n&&i.isFile())return e();let s=hu.dirname(t);Ne.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?mu.mkdirs(s,u=>{if(u)return e(u);r()}):e(o);a.isDirectory()?r():Ne.readdir(s,u=>{if(u)return e(u)})})})}function zd(t){let e;try{e=Ne.statSync(t)}catch{}if(e&&e.isFile())return;let r=hu.dirname(t);try{Ne.statSync(r).isDirectory()||Ne.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")mu.mkdirsSync(r);else throw n}Ne.writeFileSync(t,"")}du.exports={createFile:Wd(Jd),createFileSync:zd}});var wu=_((by,vu)=>{"use strict";var Yd=oe().fromCallback,gu=require("path"),qe=te(),yu=_e(),Kd=De().pathExists,{areIdentical:_u}=We();function Qd(t,e,r){function n(i,s){qe.link(i,s,o=>{if(o)return r(o);r(null)})}qe.lstat(e,(i,s)=>{qe.lstat(t,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(s&&_u(a,s))return r(null);let u=gu.dirname(e);Kd(u,(f,c)=>{if(f)return r(f);if(c)return n(t,e);yu.mkdirs(u,l=>{if(l)return r(l);n(t,e)})})})})}function Xd(t,e){let r;try{r=qe.lstatSync(e)}catch{}try{let s=qe.lstatSync(t);if(r&&_u(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=gu.dirname(e);return qe.existsSync(n)||yu.mkdirsSync(n),qe.linkSync(t,e)}vu.exports={createLink:Yd(Qd),createLinkSync:Xd}});var bu=_((Sy,ku)=>{"use strict";var Le=require("path"),Dt=te(),Zd=De().pathExists;function ep(t,e,r){if(Le.isAbsolute(t))return Dt.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:t,toDst:t}));{let n=Le.dirname(e),i=Le.join(n,t);return Zd(i,(s,o)=>s?r(s):o?r(null,{toCwd:i,toDst:t}):Dt.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:Le.relative(n,t)})))}}function tp(t,e){let r;if(Le.isAbsolute(t)){if(r=Dt.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let n=Le.dirname(e),i=Le.join(n,t);if(r=Dt.existsSync(i),r)return{toCwd:i,toDst:t};if(r=Dt.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Le.relative(n,t)}}}ku.exports={symlinkPaths:ep,symlinkPathsSync:tp}});var Cu=_((Ty,Tu)=>{"use strict";var Su=te();function rp(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);Su.lstat(t,(n,i)=>{if(n)return r(null,"file");e=i&&i.isDirectory()?"dir":"file",r(null,e)})}function np(t,e){let r;if(e)return e;try{r=Su.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Tu.exports={symlinkType:rp,symlinkTypeSync:np}});var $u=_((Cy,Ru)=>{"use strict";var ip=oe().fromCallback,Ou=require("path"),ve=Ue(),xu=_e(),sp=xu.mkdirs,op=xu.mkdirsSync,Fu=bu(),ap=Fu.symlinkPaths,up=Fu.symlinkPathsSync,Au=Cu(),cp=Au.symlinkType,lp=Au.symlinkTypeSync,fp=De().pathExists,{areIdentical:Pu}=We();function hp(t,e,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,ve.lstat(e,(i,s)=>{!i&&s.isSymbolicLink()?Promise.all([ve.stat(t),ve.stat(e)]).then(([o,a])=>{if(Pu(o,a))return n(null);Eu(t,e,r,n)}):Eu(t,e,r,n)})}function Eu(t,e,r,n){ap(t,e,(i,s)=>{if(i)return n(i);t=s.toDst,cp(s.toCwd,r,(o,a)=>{if(o)return n(o);let u=Ou.dirname(e);fp(u,(f,c)=>{if(f)return n(f);if(c)return ve.symlink(t,e,a,n);sp(u,l=>{if(l)return n(l);ve.symlink(t,e,a,n)})})})})}function mp(t,e,r){let n;try{n=ve.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let a=ve.statSync(t),u=ve.statSync(e);if(Pu(a,u))return}let i=up(t,e);t=i.toDst,r=lp(i.toCwd,r);let s=Ou.dirname(e);return ve.existsSync(s)||op(s),ve.symlinkSync(t,e,r)}Ru.exports={createSymlink:ip(hp),createSymlinkSync:mp}});var Vu=_((Ey,Mu)=>{"use strict";var{createFile:Du,createFileSync:Nu}=pu(),{createLink:qu,createLinkSync:Lu}=wu(),{createSymlink:Iu,createSymlinkSync:ju}=$u();Mu.exports={createFile:Du,createFileSync:Nu,ensureFile:Du,ensureFileSync:Nu,createLink:qu,createLinkSync:Lu,ensureLink:qu,ensureLinkSync:Lu,createSymlink:Iu,createSymlinkSync:ju,ensureSymlink:Iu,ensureSymlinkSync:ju}});var br=_((Oy,Bu)=>{function dp(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let s=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+s}function pp(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Bu.exports={stringify:dp,stripBom:pp}});var Wu=_((xy,Uu)=>{var at;try{at=te()}catch{at=require("fs")}var Sr=oe(),{stringify:Hu,stripBom:Gu}=br();async function gp(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||at,n="throws"in e?e.throws:!0,i=await Sr.fromCallback(r.readFile)(t,e);i=Gu(i);let s;try{s=JSON.parse(i,e?e.reviver:null)}catch(o){if(n)throw o.message=`${t}: ${o.message}`,o;return null}return s}var yp=Sr.fromPromise(gp);function _p(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||at,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=Gu(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function vp(t,e,r={}){let n=r.fs||at,i=Hu(e,r);await Sr.fromCallback(n.writeFile)(t,i,r)}var wp=Sr.fromPromise(vp);function kp(t,e,r={}){let n=r.fs||at,i=Hu(e,r);return n.writeFileSync(t,i,r)}var bp={readFile:yp,readFileSync:_p,writeFile:wp,writeFileSync:kp};Uu.exports=bp});var zu=_((Fy,Ju)=>{"use strict";var Tr=Wu();Ju.exports={readJson:Tr.readFile,readJsonSync:Tr.readFileSync,writeJson:Tr.writeFile,writeJsonSync:Tr.writeFileSync}});var Cr=_((Ay,Qu)=>{"use strict";var Sp=oe().fromCallback,Nt=te(),Yu=require("path"),Ku=_e(),Tp=De().pathExists;function Cp(t,e,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Yu.dirname(t);Tp(i,(s,o)=>{if(s)return n(s);if(o)return Nt.writeFile(t,e,r,n);Ku.mkdirs(i,a=>{if(a)return n(a);Nt.writeFile(t,e,r,n)})})}function Ep(t,...e){let r=Yu.dirname(t);if(Nt.existsSync(r))return Nt.writeFileSync(t,...e);Ku.mkdirsSync(r),Nt.writeFileSync(t,...e)}Qu.exports={outputFile:Sp(Cp),outputFileSync:Ep}});var Zu=_((Py,Xu)=>{"use strict";var{stringify:Op}=br(),{outputFile:xp}=Cr();async function Fp(t,e,r={}){let n=Op(e,r);await xp(t,n,r)}Xu.exports=Fp});var tc=_((Ry,ec)=>{"use strict";var{stringify:Ap}=br(),{outputFileSync:Pp}=Cr();function Rp(t,e,r){let n=Ap(e,r);Pp(t,n,r)}ec.exports=Rp});var nc=_(($y,rc)=>{"use strict";var $p=oe().fromPromise,re=zu();re.outputJson=$p(Zu());re.outputJsonSync=tc();re.outputJSON=re.outputJson;re.outputJSONSync=re.outputJsonSync;re.writeJSON=re.writeJson;re.writeJSONSync=re.writeJsonSync;re.readJSON=re.readJson;re.readJSONSync=re.readJsonSync;rc.exports=re});var uc=_((Dy,ac)=>{"use strict";var Dp=te(),zn=require("path"),Np=_r().copy,oc=$t().remove,qp=_e().mkdirp,Lp=De().pathExists,ic=We();function Ip(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;ic.checkPaths(t,e,"move",r,(s,o)=>{if(s)return n(s);let{srcStat:a,isChangingCase:u=!1}=o;ic.checkParentPaths(t,a,e,"move",f=>{if(f)return n(f);if(jp(e))return sc(t,e,i,u,n);qp(zn.dirname(e),c=>c?n(c):sc(t,e,i,u,n))})})}function jp(t){let e=zn.dirname(t);return zn.parse(e).root===e}function sc(t,e,r,n,i){if(n)return Jn(t,e,r,i);if(r)return oc(e,s=>s?i(s):Jn(t,e,r,i));Lp(e,(s,o)=>s?i(s):o?i(new Error("dest already exists.")):Jn(t,e,r,i))}function Jn(t,e,r,n){Dp.rename(t,e,i=>i?i.code!=="EXDEV"?n(i):Mp(t,e,r,n):n())}function Mp(t,e,r,n){Np(t,e,{overwrite:r,errorOnExist:!0},s=>s?n(s):oc(t,n))}ac.exports=Ip});var mc=_((Ny,hc)=>{"use strict";var lc=te(),Kn=require("path"),Vp=_r().copySync,fc=$t().removeSync,Bp=_e().mkdirpSync,cc=We();function Hp(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=cc.checkPathsSync(t,e,"move",r);return cc.checkParentPathsSync(t,i,e,"move"),Gp(e)||Bp(Kn.dirname(e)),Up(t,e,n,s)}function Gp(t){let e=Kn.dirname(t);return Kn.parse(e).root===e}function Up(t,e,r,n){if(n)return Yn(t,e,r);if(r)return fc(e),Yn(t,e,r);if(lc.existsSync(e))throw new Error("dest already exists.");return Yn(t,e,r)}function Yn(t,e,r){try{lc.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return Wp(t,e,r)}}function Wp(t,e,r){return Vp(t,e,{overwrite:r,errorOnExist:!0}),fc(t)}hc.exports=Hp});var pc=_((qy,dc)=>{"use strict";var Jp=oe().fromCallback;dc.exports={move:Jp(uc()),moveSync:mc()}});var yc=_((Ly,gc)=>{"use strict";gc.exports={...Ue(),..._r(),...fu(),...Vu(),...nc(),..._e(),...pc(),...Cr(),...De(),...$t()}});var pe,_c,qt,vc,wc,Te,kc,bc,Sc,Tc,Cc,Ec,Oc=Ie(()=>{"use strict";pe=ee(require("fs")),_c=require("child_process"),qt=ee(require("path"));ua();vc=ee(yc()),wc=ee(dt());Gr();Te=(0,wc.default)(Qe),kc=async(t,e)=>{let r=qt.default.resolve(e.localPath);pe.default.existsSync(r)||pe.default.mkdirSync(r,{recursive:!0}),pe.default.readdirSync(r).length===0&&e.url&&await Dn().clone(e.url,r);let n=Dn(r,{binary:e.binary});if(!await n.checkIsRepo(kt.IS_REPO_ROOT))throw Error(`${r} is not a git repository!!!`);if(e.updateSubmodules&&(await n.submoduleInit(),await n.submoduleUpdate()),await n.fetch(),e.branch){let o=!1,a=await n.branchLocal();for(var s of a.all)if(s===e.branch){o=!0;break}let u=e.branch??"",f=e.startPoint??"";o?(a.current!==e.branch&&await n.checkout(u),await n.reset(tt.HARD,[f])):await n.checkoutBranch(u,f)}},bc=async(t,e)=>{let r=qt.default.resolve(e.target),n=qt.default.resolve(e.path);if(pe.default.existsSync(n)){let i=pe.default.lstatSync(n);Te(`LSTAT is symlink? ${i.isSymbolicLink()}, is directory? ${i.isDirectory()}`),e.forced&&(i.isSymbolicLink()||i.isFile()?(Te(`Unlink ${n}`),pe.default.unlinkSync(n)):i.isDirectory()&&(Te(`Remove directory '${n}'`),(0,vc.removeSync)(n)))}if(pe.default.existsSync(n))Te(`Could not create symbolic link cause '${n}' already exists`);else{Te(`Create symbolic link ${r} => ${n}`),pe.default.symlinkSync(r,n,e.linkType);let i=pe.default.lstatSync(n);Te(`LSTAT is symlink? ${i.isSymbolicLink()}, is directory? ${i.isDirectory()}`)}},Sc=async(t,e)=>{Te(`Start execution... ${e.cmd}`),(0,_c.execSync)(e.cmd,{shell:e.shell,env:process.env,stdio:[process.stdin,process.stdout,process.stderr],encoding:"utf-8"})},Tc=async(t,e)=>{if(e.key===void 0||!e.key||typeof e.key!="string"||e.key.length<1)throw new Error(`Invalid key ${e.key}. It must be a string.`);let r=e.value;if(e.valueType==="file"){if(typeof r!="string")throw new Error(`The "value" must contain path of a file with "valueType":"${e.valueType}"`);let n=qt.default.resolve(r);if(!pe.default.existsSync(n))throw new Error(`File "${n}" does not exist to use as a value`);r=pe.default.readFileSync(n,{encoding:"utf8"}),e.fileFormat==="json"&&(r=JSON.parse(r))}Te(`Setting up the value ${r} for a key ${e.key}`),t.values[e.key]=r},Cc=async(t,e)=>{console.log(e.text)},Ec=async(t,e)=>{let r=e;Object.keys(r).forEach(n=>{if(r[n]!==void 0&&typeof r[n]=="string"){let i=r[n];for(;;){let s=t.valueReplaceReg.exec(i);if(s==null)break;let o=s[0],a=s[1],u=t.values;if(a.length>0){let h=a.split(".");for(let m=0;m<h.length;m++){let p=h[m];if(u.hasOwnProperty(p))u=u[p];else throw new Error(`The value of ${a} could not be found!`)}}let f=i.substring(0,s.index),c=`${u}`,l=i.substring(s.index+o.length);i=`${f}${c}${l}`,Te(`Updated value ${i}`)}r[n]=i}})}});var xc=_(()=>{"use strict";var It=ee(require("path"));Si();Ti();var Xn=ee(dt());Gr();Oc();var zp=It.default.resolve(process.cwd()),Ce=bi(),Je={},Yp=It.default.resolve(Ce.config);Je=Vr(Yp);var Lt="",Ee=Pi;if(Je.env&&typeof Je.env=="object"){let t=Je.env;t.verbose&&(Lt=`${Qe}, ${Qe}:*`),t.verboseGit&&(Lt=`${Lt},simple-git,simple-git:*`),t.valueReplaceRegex&&(Ee=t.valueReplaceRegex)}if(typeof Ee!="string")throw new Error(`valueReplaceRegex '${Ee}'  must be a string`);if(Ee.length<1)throw new Error(`valueReplaceRegex '${Ee}' cannot be empty`);if(Ee.indexOf("(")<0||Ee.indexOf(")")<0)throw new Error(`valueReplaceRegex '${Ee}' must contain regex group express '(' and ')'`);Lt&&Xn.default.enable(Lt);var ut=(0,Xn.default)(Qe),Qn=It.default.resolve(process.cwd());console.log("######################################################################");console.log(`[${Je.name}] Start task processing`);var Kp=async()=>{let t=Je.tasks??[];for(let n=0;n<t.length;n++){let i=t[n];if(i.id!==void 0&&i.id!==null){if(typeof i.id!="string")throw new Error("The task id must be a 'string' type");if(i.id.length<1)throw new Error("The task id cannot be empty");for(let s=n+1;s<t.length;s++){let o=t[s];if(o.id!==void 0&&o.id===i.id)throw new Error(`The task id '${i.id}' must be unique`)}}}Ce.exclude&&Ce.exclude.length>0&&(ut(`Excluding tasks by specified IDs : ${Ce.exclude}`),t=t.filter((n,i,s)=>{if(n.id===void 0||n.id===null||Ce.exclude?.includes(n.id)===!1)return n})),Ce.include&&Ce.include.length>0&&(ut(`Including tasks by specified IDs : ${Ce.include}`),t=t.filter((n,i,s)=>{if(n.id!==void 0&&n.id!==null&&Ce.include?.includes(n.id)===!0)return n}));let e={valueReplaceReg:new RegExp(Ee),values:{__env:{cwd_startup:zp,cwd_base:Qn}}},r=t.length??0;for(let n=0;n<r;n++){let i=t[n];Ec(e,i);let s=i.id!==void 0?`${n}/${i.id}/${i.type}`:`${n}/${i.type}`;if(i.enabled===!1){ut(`Pass the task without execution => ${s}`);continue}else ut(`Task : ${s}`);if(i.comment&&ut(i.comment),i.cwd){let o=It.default.resolve(i.cwd);ut(`Changing the current working directory => ${o}`),process.chdir(o)}i.type==="git-repo-prepare"?await kc(e,i):i.type==="symlink"?await bc(e,i):i.type==="cmd"?await Sc(e,i):i.type==="set-value"?await Tc(e,i):i.type==="echo"&&await Cc(e,i),process.chdir(Qn)}};Kp().then(()=>{}).catch(t=>{throw t}).finally(()=>{process.chdir(Qn),console.log(`[${Je.name}] Tasks completed`),console.log("######################################################################")})});var c_=ee(xc());
//# sourceMappingURL=cli.js.map
