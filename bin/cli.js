#!/usr/bin/env node
"use strict";var $c=Object.create;var Zn=Object.defineProperty;var Rc=Object.getOwnPropertyDescriptor;var Nc=Object.getOwnPropertyNames;var qc=Object.getPrototypeOf,Lc=Object.prototype.hasOwnProperty;var Ne=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ic=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Nc(t))!Lc.call(e,i)&&i!==r&&Zn(e,i,{get:()=>t[i],enumerable:!(n=Rc(t,i))||n.enumerable});return e};var ee=(e,t,r)=>(r=e!=null?$c(qc(e)):{},Ic(t||!e||!e.__esModule?Zn(r,"default",{value:e,enumerable:!0}):r,e));var ut=_(Er=>{var Nt=class extends Error{constructor(t,r,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=r,this.exitCode=t,this.nestedError=void 0}},Or=class extends Nt{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Er.CommanderError=Nt;Er.InvalidArgumentError=Or});var qt=_(Fr=>{var{InvalidArgumentError:Mc}=ut(),xr=class{constructor(t,r){switch(this.description=r||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t;break}this._name.length>3&&this._name.slice(-3)==="..."&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:r.concat(t)}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new Mc(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function jc(e){let t=e.name()+(e.variadic===!0?"...":"");return e.required?"<"+t+">":"["+t+"]"}Fr.Argument=xr;Fr.humanReadableArgName=jc});var Pr=_(ei=>{var{humanReadableArgName:Bc}=qt(),Ar=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){let r=t.commands.filter(n=>!n._hidden);if(t._hasImplicitHelpCommand()){let[,n,i]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),s=t.createCommand(n).helpOption(!1);s.description(t._helpCommandDescription),i&&s.arguments(i),r.push(s)}return this.sortSubcommands&&r.sort((n,i)=>n.name().localeCompare(i.name())),r}compareOptions(t,r){let n=i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,"");return n(t).localeCompare(n(r))}visibleOptions(t){let r=t.options.filter(s=>!s.hidden),n=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),i=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(n||i){let s;n?i?s=t.createOption(t._helpFlags,t._helpDescription):s=t.createOption(t._helpShortFlag,t._helpDescription):s=t.createOption(t._helpLongFlag,t._helpDescription),r.push(s)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];let r=[];for(let n=t.parent;n;n=n.parent){let i=n.options.filter(s=>!s.hidden);r.push(...i)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleArguments(t){return t._argsDescription&&t._args.forEach(r=>{r.description=r.description||t._argsDescription[r.name()]||""}),t._args.find(r=>r.description)?t._args:[]}subcommandTerm(t){let r=t._args.map(n=>Bc(n)).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(r?" "+r:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,r){return r.visibleCommands(t).reduce((n,i)=>Math.max(n,r.subcommandTerm(i).length),0)}longestOptionTermLength(t,r){return r.visibleOptions(t).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestGlobalOptionTermLength(t,r){return r.visibleGlobalOptions(t).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestArgumentTermLength(t,r){return r.visibleArguments(t).reduce((n,i)=>Math.max(n,r.argumentTerm(i).length),0)}commandUsage(t){let r=t._name;t._aliases[0]&&(r=r+"|"+t._aliases[0]);let n="";for(let i=t.parent;i;i=i.parent)n=i.name()+" "+n;return n+r+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){let r=[];return t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&(t.required||t.optional||t.isBoolean()&&typeof t.defaultValue=="boolean")&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),t.presetArg!==void 0&&t.optional&&r.push(`preset: ${JSON.stringify(t.presetArg)}`),t.envVar!==void 0&&r.push(`env: ${t.envVar}`),r.length>0?`${t.description} (${r.join(", ")})`:t.description}argumentDescription(t){let r=[];if(t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),r.length>0){let n=`(${r.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}formatHelp(t,r){let n=r.padWidth(t,r),i=r.helpWidth||80,s=2,o=2;function a(g,w){if(w){let b=`${g.padEnd(n+o)}${w}`;return r.wrap(b,i-s,n+o)}return g}function u(g){return g.join(`
`).replace(/^/gm," ".repeat(s))}let f=[`Usage: ${r.commandUsage(t)}`,""],c=r.commandDescription(t);c.length>0&&(f=f.concat([c,""]));let l=r.visibleArguments(t).map(g=>a(r.argumentTerm(g),r.argumentDescription(g)));l.length>0&&(f=f.concat(["Arguments:",u(l),""]));let h=r.visibleOptions(t).map(g=>a(r.optionTerm(g),r.optionDescription(g)));if(h.length>0&&(f=f.concat(["Options:",u(h),""])),this.showGlobalOptions){let g=r.visibleGlobalOptions(t).map(w=>a(r.optionTerm(w),r.optionDescription(w)));g.length>0&&(f=f.concat(["Global Options:",u(g),""]))}let m=r.visibleCommands(t).map(g=>a(r.subcommandTerm(g),r.subcommandDescription(g)));return m.length>0&&(f=f.concat(["Commands:",u(m),""])),f.join(`
`)}padWidth(t,r){return Math.max(r.longestOptionTermLength(t,r),r.longestGlobalOptionTermLength(t,r),r.longestSubcommandTermLength(t,r),r.longestArgumentTermLength(t,r))}wrap(t,r,n,i=40){if(t.match(/[\n]\s+/))return t;let s=r-n;if(s<i)return t;let o=t.slice(0,n),a=t.slice(n),u=" ".repeat(n),f=new RegExp(".{1,"+(s-1)+"}([\\s\u200B]|$)|[^\\s\u200B]+?([\\s\u200B]|$)","g"),c=a.match(f)||[];return o+c.map((l,h)=>(l.slice(-1)===`
`&&(l=l.slice(0,l.length-1)),(h>0?u:"")+l.trimRight())).join(`
`)}};ei.Help=Ar});var Rr=_(Lt=>{var{InvalidArgumentError:Vc}=ut(),Dr=class{constructor(t,r){this.flags=t,this.description=r||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;let n=ti(t);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){return this.implied=Object.assign(this.implied||{},t),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:r.concat(t)}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new Vc(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return Hc(this.name().replace(/^no-/,""))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},$r=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach(r=>{r.negate?this.negativeOptions.set(r.attributeName(),r):this.positiveOptions.set(r.attributeName(),r)}),this.negativeOptions.forEach((r,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(t,r){let n=r.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,s=i!==void 0?i:!1;return r.negate===(s===t)}};function Hc(e){return e.split("-").reduce((t,r)=>t+r[0].toUpperCase()+r.slice(1))}function ti(e){let t,r,n=e.split(/[ |,]+/);return n.length>1&&!/^[[<]/.test(n[1])&&(t=n.shift()),r=n.shift(),!t&&/^-[^-]$/.test(r)&&(t=r,r=void 0),{shortFlag:t,longFlag:r}}Lt.Option=Dr;Lt.splitOptionFlags=ti;Lt.DualOptions=$r});var ni=_(ri=>{function Gc(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);let r=[];for(let n=0;n<=e.length;n++)r[n]=[n];for(let n=0;n<=t.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let i=1;i<=e.length;i++){let s=1;e[i-1]===t[n-1]?s=0:s=1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+s),i>1&&n>1&&e[i-1]===t[n-2]&&e[i-2]===t[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[e.length][t.length]}function Wc(e,t){if(!t||t.length===0)return"";t=Array.from(new Set(t));let r=e.startsWith("--");r&&(e=e.slice(2),t=t.map(o=>o.slice(2)));let n=[],i=3,s=.4;return t.forEach(o=>{if(o.length<=1)return;let a=Gc(e,o),u=Math.max(e.length,o.length);(u-a)/u>s&&(a<i?(i=a,n=[o]):a===i&&n.push(o))}),n.sort((o,a)=>o.localeCompare(a)),r&&(n=n.map(o=>`--${o}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}ri.suggestSimilar=Wc});var ci=_(ui=>{var Uc=require("events").EventEmitter,Nr=require("child_process"),be=require("path"),qr=require("fs"),N=require("process"),{Argument:Jc,humanReadableArgName:zc}=qt(),{CommanderError:Lr}=ut(),{Help:Yc}=Pr(),{Option:ii,splitOptionFlags:Kc,DualOptions:Qc}=Rr(),{suggestSimilar:si}=ni(),lt=class extends Uc{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:r=>N.stdout.write(r),writeErr:r=>N.stderr.write(r),getOutHelpWidth:()=>N.stdout.isTTY?N.stdout.columns:void 0,getErrHelpWidth:()=>N.stderr.isTTY?N.stderr.columns:void 0,outputError:(r,n)=>n(r)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,r,n){let i=r,s=n;typeof i=="object"&&i!==null&&(s=i,i=null),s=s||{};let[,o,a]=t.match(/([^ ]+) *(.*)/),u=this.createCommand(o);return i&&(u.description(i),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,a&&u.arguments(a),this.commands.push(u),u.parent=this,u.copyInheritedSettings(this),i?this:u}createCommand(t){return new lt(t)}createHelp(){return Object.assign(new Yc,this.configureHelp())}configureHelp(t){return t===void 0?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return t===void 0?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return typeof t!="string"&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,r){if(!t._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return r=r||{},r.isDefault&&(this._defaultCommandName=t._name),(r.noHelp||r.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,r){return new Jc(t,r)}argument(t,r,n,i){let s=this.createArgument(t,r);return typeof n=="function"?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(t){return t.split(/ +/).forEach(r=>{this.argument(r)}),this}addArgument(t){let r=this._args.slice(-1)[0];if(r&&r.variadic)throw new Error(`only the last argument can be variadic '${r.name()}'`);if(t.required&&t.defaultValue!==void 0&&t.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,r){return t===!1?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,typeof t=="string"&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=r||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return this._addImplicitHelpCommand===void 0?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,r){let n=["preSubcommand","preAction","postAction"];if(!n.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(r):this._lifeCycleHooks[t]=[r],this}exitOverride(t){return t?this._exitCallback=t:this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync")throw r},this}_exit(t,r,n){this._exitCallback&&this._exitCallback(new Lr(t,r,n)),N.exit(t)}action(t){let r=n=>{let i=this._args.length,s=n.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),t.apply(this,s)};return this._actionHandler=r,this}createOption(t,r){return new ii(t,r)}addOption(t){let r=t.name(),n=t.attributeName();if(t.negate){let s=t.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(n,t.defaultValue===void 0?!0:t.defaultValue,"default")}else t.defaultValue!==void 0&&this.setOptionValueWithSource(n,t.defaultValue,"default");this.options.push(t);let i=(s,o,a)=>{s==null&&t.presetArg!==void 0&&(s=t.presetArg);let u=this.getOptionValue(n);if(s!==null&&t.parseArg)try{s=t.parseArg(s,u)}catch(f){if(f.code==="commander.invalidArgument"){let c=`${o} ${f.message}`;this.error(c,{exitCode:f.exitCode,code:f.code})}throw f}else s!==null&&t.variadic&&(s=t._concatValue(s,u));s==null&&(t.negate?s=!1:t.isBoolean()||t.optional?s=!0:s=""),this.setOptionValueWithSource(n,s,a)};return this.on("option:"+r,s=>{let o=`error: option '${t.flags}' argument '${s}' is invalid.`;i(s,o,"cli")}),t.envVar&&this.on("optionEnv:"+r,s=>{let o=`error: option '${t.flags}' value '${s}' from env '${t.envVar}' is invalid.`;i(s,o,"env")}),this}_optionEx(t,r,n,i,s){if(typeof r=="object"&&r instanceof ii)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let o=this.createOption(r,n);if(o.makeOptionMandatory(!!t.mandatory),typeof i=="function")o.default(s).argParser(i);else if(i instanceof RegExp){let a=i;i=(u,f)=>{let c=a.exec(u);return c?c[0]:f},o.default(s).argParser(i)}else o.default(i);return this.addOption(o)}option(t,r,n,i){return this._optionEx({},t,r,n,i)}requiredOption(t,r,n,i){return this._optionEx({mandatory:!0},t,r,n,i)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,r){return this.setOptionValueWithSource(t,r,void 0)}setOptionValueWithSource(t,r,n){return this._storeOptionsAsProperties?this[t]=r:this._optionValues[t]=r,this._optionValueSources[t]=n,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let r;return ct(this).forEach(n=>{n.getOptionValueSource(t)!==void 0&&(r=n.getOptionValueSource(t))}),r}_prepareUserArgs(t,r){if(t!==void 0&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");r=r||{},t===void 0&&(t=N.argv,N.versions&&N.versions.electron&&(r.from="electron")),this.rawArgs=t.slice();let n;switch(r.from){case void 0:case"node":this._scriptPath=t[1],n=t.slice(2);break;case"electron":N.defaultApp?(this._scriptPath=t[1],n=t.slice(2)):n=t.slice(1);break;case"user":n=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${r.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(t,r){let n=this._prepareUserArgs(t,r);return this._parseCommand([],n),this}async parseAsync(t,r){let n=this._prepareUserArgs(t,r);return await this._parseCommand([],n),this}_executeSubCommand(t,r){r=r.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function s(c,l){let h=be.resolve(c,l);if(qr.existsSync(h))return h;if(i.includes(be.extname(l)))return;let m=i.find(g=>qr.existsSync(`${h}${g}`));if(m)return`${h}${m}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o=t._executableFile||`${this._name}-${t._name}`,a=this._executableDir||"";if(this._scriptPath){let c;try{c=qr.realpathSync(this._scriptPath)}catch{c=this._scriptPath}a=be.resolve(be.dirname(c),a)}if(a){let c=s(a,o);if(!c&&!t._executableFile&&this._scriptPath){let l=be.basename(this._scriptPath,be.extname(this._scriptPath));l!==this._name&&(c=s(a,`${l}-${t._name}`))}o=c||o}n=i.includes(be.extname(o));let u;N.platform!=="win32"?n?(r.unshift(o),r=ai(N.execArgv).concat(r),u=Nr.spawn(N.argv[0],r,{stdio:"inherit"})):u=Nr.spawn(o,r,{stdio:"inherit"}):(r.unshift(o),r=ai(N.execArgv).concat(r),u=Nr.spawn(N.execPath,r,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(l=>{N.on(l,()=>{u.killed===!1&&u.exitCode===null&&u.kill(l)})});let f=this._exitCallback;f?u.on("close",()=>{f(new Lr(N.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):u.on("close",N.exit.bind(N)),u.on("error",c=>{if(c.code==="ENOENT"){let l=a?`searched for local subcommand relative to directory '${a}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",h=`'${o}' does not exist
 - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${l}`;throw new Error(h)}else if(c.code==="EACCES")throw new Error(`'${o}' not executable`);if(!f)N.exit(1);else{let l=new Lr(1,"commander.executeSubCommandAsync","(error)");l.nestedError=c,f(l)}}),this.runningCommand=u}_dispatchSubcommand(t,r,n){let i=this._findCommand(t);i||this.help({error:!0});let s;return s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,()=>{if(i._executableHandler)this._executeSubCommand(i,r.concat(n));else return i._parseCommand(r,n)}),s}_checkNumberOfArguments(){this._args.forEach((t,r)=>{t.required&&this.args[r]==null&&this.missingArgument(t.name())}),!(this._args.length>0&&this._args[this._args.length-1].variadic)&&this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){let t=(n,i,s)=>{let o=i;if(i!==null&&n.parseArg)try{o=n.parseArg(i,s)}catch(a){if(a.code==="commander.invalidArgument"){let u=`error: command-argument value '${i}' is invalid for argument '${n.name()}'. ${a.message}`;this.error(u,{exitCode:a.exitCode,code:a.code})}throw a}return o};this._checkNumberOfArguments();let r=[];this._args.forEach((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce((o,a)=>t(n,a,o),n.defaultValue))):s===void 0&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=t(n,s,n.defaultValue))),r[i]=s}),this.processedArgs=r}_chainOrCall(t,r){return t&&t.then&&typeof t.then=="function"?t.then(()=>r()):r()}_chainOrCallHooks(t,r){let n=t,i=[];return ct(this).reverse().filter(s=>s._lifeCycleHooks[r]!==void 0).forEach(s=>{s._lifeCycleHooks[r].forEach(o=>{i.push({hookedCommand:s,callback:o})})}),r==="postAction"&&i.reverse(),i.forEach(s=>{n=this._chainOrCall(n,()=>s.callback(s.hookedCommand,this))}),n}_chainOrCallSubCommandHook(t,r,n){let i=t;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(s=>{i=this._chainOrCall(i,()=>s(this,r))}),i}_parseCommand(t,r){let n=this.parseOptions(r);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(n.operands),r=n.unknown,this.args=t.concat(r),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),r);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return t.length===1&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return oi(this,r),this._dispatchSubcommand(this._defaultCommandName,t,r);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),oi(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},s=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let o;return o=this._chainOrCallHooks(o,"preAction"),o=this._chainOrCall(o,()=>this._actionHandler(this.processedArgs)),this.parent&&(o=this._chainOrCall(o,()=>{this.parent.emit(s,t,r)})),o=this._chainOrCallHooks(o,"postAction"),o}if(this.parent&&this.parent.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,t,r);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,r);this.listenerCount("command:*")?this.emit("command:*",t,r):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(t){if(t)return this.commands.find(r=>r._name===t||r._aliases.includes(t))}_findOption(t){return this.options.find(r=>r.is(t))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach(r=>{r.mandatory&&t.getOptionValue(r.attributeName())===void 0&&t.missingMandatoryOptionValue(r)})}_checkForConflictingLocalOptions(){let t=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});t.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=t.find(s=>n.conflictsWith.includes(s.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){let r=[],n=[],i=r,s=t.slice();function o(u){return u.length>1&&u[0]==="-"}let a=null;for(;s.length;){let u=s.shift();if(u==="--"){i===n&&i.push(u),i.push(...s);break}if(a&&!o(u)){this.emit(`option:${a.name()}`,u);continue}if(a=null,o(u)){let f=this._findOption(u);if(f){if(f.required){let c=s.shift();c===void 0&&this.optionMissingArgument(f),this.emit(`option:${f.name()}`,c)}else if(f.optional){let c=null;s.length>0&&!o(s[0])&&(c=s.shift()),this.emit(`option:${f.name()}`,c)}else this.emit(`option:${f.name()}`);a=f.variadic?f:null;continue}}if(u.length>2&&u[0]==="-"&&u[1]!=="-"){let f=this._findOption(`-${u[1]}`);if(f){f.required||f.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${f.name()}`,u.slice(2)):(this.emit(`option:${f.name()}`),s.unshift(`-${u.slice(2)}`));continue}}if(/^--[^=]+=/.test(u)){let f=u.indexOf("="),c=this._findOption(u.slice(0,f));if(c&&(c.required||c.optional)){this.emit(`option:${c.name()}`,u.slice(f+1));continue}}if(o(u)&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&r.length===0&&n.length===0){if(this._findCommand(u)){r.push(u),s.length>0&&n.push(...s);break}else if(u===this._helpCommandName&&this._hasImplicitHelpCommand()){r.push(u),s.length>0&&r.push(...s);break}else if(this._defaultCommandName){n.push(u),s.length>0&&n.push(...s);break}}if(this._passThroughOptions){i.push(u),s.length>0&&i.push(...s);break}i.push(u)}return{operands:r,unknown:n}}opts(){if(this._storeOptionsAsProperties){let t={},r=this.options.length;for(let n=0;n<r;n++){let i=this.options[n].attributeName();t[i]=i===this._versionOptionName?this._version:this[i]}return t}return this._optionValues}optsWithGlobals(){return ct(this).reduce((t,r)=>Object.assign(t,r.opts()),{})}error(t,r){this._outputConfiguration.outputError(`${t}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=r||{},i=n.exitCode||1,s=n.code||"commander.error";this._exit(i,s,t)}_parseOptionsEnv(){this.options.forEach(t=>{if(t.envVar&&t.envVar in N.env){let r=t.attributeName();(this.getOptionValue(r)===void 0||["default","config","env"].includes(this.getOptionValueSource(r)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,N.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}})}_parseOptionsImplied(){let t=new Qc(this.options),r=n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n));this.options.filter(n=>n.implied!==void 0&&r(n.attributeName())&&t.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!r(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(t){let r=`error: missing required argument '${t}'`;this.error(r,{code:"commander.missingArgument"})}optionMissingArgument(t){let r=`error: option '${t.flags}' argument missing`;this.error(r,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){let r=`error: required option '${t.flags}' not specified`;this.error(r,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,r){let n=o=>{let a=o.attributeName(),u=this.getOptionValue(a),f=this.options.find(l=>l.negate&&a===l.attributeName()),c=this.options.find(l=>!l.negate&&a===l.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:c||o},i=o=>{let a=n(o),u=a.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${a.envVar}'`:`option '${a.flags}'`},s=`error: ${i(t)} cannot be used with ${i(r)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let r="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{let o=s.createHelp().visibleOptions(s).filter(a=>a.long).map(a=>a.long);i=i.concat(o),s=s.parent}while(s&&!s._enablePositionalOptions);r=si(t,i)}let n=`error: unknown option '${t}'${r}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;let r=this._args.length,n=r===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${r} argument${n} but got ${t.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let t=this.args[0],r="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(s=>{i.push(s.name()),s.alias()&&i.push(s.alias())}),r=si(t,i)}let n=`error: unknown command '${t}'${r}`;this.error(n,{code:"commander.unknownCommand"})}version(t,r,n){if(t===void 0)return this._version;this._version=t,r=r||"-V, --version",n=n||"output the version number";let i=this.createOption(r,n);return this._versionOptionName=i.attributeName(),this.options.push(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${t}
`),this._exit(0,"commander.version",t)}),this}description(t,r){return t===void 0&&r===void 0?this._description:(this._description=t,r&&(this._argsDescription=r),this)}summary(t){return t===void 0?this._summary:(this._summary=t,this)}alias(t){if(t===void 0)return this._aliases[0];let r=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(r=this.commands[this.commands.length-1]),t===r._name)throw new Error("Command alias can't be the same as its name");return r._aliases.push(t),this}aliases(t){return t===void 0?this._aliases:(t.forEach(r=>this.alias(r)),this)}usage(t){if(t===void 0){if(this._usage)return this._usage;let r=this._args.map(n=>zc(n));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?r:[]).join(" ")}return this._usage=t,this}name(t){return t===void 0?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=be.basename(t,be.extname(t)),this}executableDir(t){return t===void 0?this._executableDir:(this._executableDir=t,this)}helpInformation(t){let r=this.createHelp();return r.helpWidth===void 0&&(r.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),r.formatHelp(this,r)}_getHelpContext(t){t=t||{};let r={error:!!t.error},n;return r.error?n=i=>this._outputConfiguration.writeErr(i):n=i=>this._outputConfiguration.writeOut(i),r.write=t.write||n,r.command=this,r}outputHelp(t){let r;typeof t=="function"&&(r=t,t=void 0);let n=this._getHelpContext(t);ct(this).reverse().forEach(s=>s.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let i=this.helpInformation(n);if(r&&(i=r(i),typeof i!="string"&&!Buffer.isBuffer(i)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(i),this.emit(this._helpLongFlag),this.emit("afterHelp",n),ct(this).forEach(s=>s.emit("afterAllHelp",n))}helpOption(t,r){if(typeof t=="boolean")return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=r||this._helpDescription;let n=Kc(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(t){this.outputHelp(t);let r=N.exitCode||0;r===0&&t&&typeof t!="function"&&t.error&&(r=1),this._exit(r,"commander.help","(outputHelp)")}addHelpText(t,r){let n=["beforeAll","before","after","afterAll"];if(!n.includes(t))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${t}Help`;return this.on(i,s=>{let o;typeof r=="function"?o=r({error:s.error,command:s.command}):o=r,o&&s.write(`${o}
`)}),this}};function oi(e,t){e._hasHelpOption&&t.find(n=>n===e._helpLongFlag||n===e._helpShortFlag)&&(e.outputHelp(),e._exit(0,"commander.helpDisplayed","(outputHelp)"))}function ai(e){return e.map(t=>{if(!t.startsWith("--inspect"))return t;let r,n="127.0.0.1",i="9229",s;return(s=t.match(/^(--inspect(-brk)?)$/))!==null?r=s[1]:(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(r=s[1],/^\d+$/.test(s[3])?i=s[3]:n=s[3]):(s=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(r=s[1],n=s[3],i=s[4]),r&&i!=="0"?`${r}=${n}:${parseInt(i)+1}`:t})}function ct(e){let t=[];for(let r=e;r;r=r.parent)t.push(r);return t}ui.Command=lt});var mi=_((ge,hi)=>{var{Argument:Xc}=qt(),{Command:li}=ci(),{CommanderError:Zc,InvalidArgumentError:fi}=ut(),{Help:el}=Pr(),{Option:tl}=Rr();ge=hi.exports=new li;ge.program=ge;ge.Argument=Xc;ge.Command=li;ge.CommanderError=Zc;ge.Help=el;ge.InvalidArgumentError=fi;ge.InvalidOptionArgumentError=fi;ge.Option=tl});var di,It,Xp,Zp,eg,tg,rg,ng,ig,sg,og,ag,pi=Ne(()=>{di=ee(mi(),1),{program:It,createCommand:Xp,createArgument:Zp,createOption:eg,CommanderError:tg,InvalidArgumentError:rg,InvalidOptionArgumentError:ng,Command:ig,Argument:sg,Option:og,Help:ag}=di.default});var yi,gi=Ne(()=>{yi={name:"useful-tasks",version:"0.1.4",description:"A dependency resolver for git and some of simple tasks",author:{name:"Jinho Yun",email:"owlflyx12@gmail.com"},bin:{"useful-tasks":"bin/cli.js"},engines:{node:">=4.2.0"},entryPoint:"dist/index.js",license:"MIT",keywords:["git","symlink","dependency","task"],dependencies:{commander:"^9.4.0",debug:"^4.3.4","fs-extra":"^10.1.0","simple-git":"^3.18.0"},type:"commonjs",scripts:{start:"npm run build && node dist/index.js","start:ts":"ts-node index.ts",build:"npm run build:bin && npm run build:common","build:common":"esbuild index.ts --platform=node --sourcemap --bundle --outdir=dist --minify","build:bin":"esbuild cli.ts --platform=node --sourcemap --bundle --outdir=bin --minify","build:types":"tsc --emitDeclarationOnly --declaration --project tsconfig.json"},devDependencies:{"@types/commander":"^2.12.2","@types/debug":"^4.1.7","@types/fs-extra":"^9.0.13",esbuild:"^0.17.18","ts-node":"^10.9.1",typescript:"^4.8.4"}}});var _i,nl,vi,il,ki=Ne(()=>{"use strict";pi();gi();_i=ee(require("path")),nl="useful_tasks.json",vi=()=>{console.log("######################################################################"),console.log("Useful Tasks : Parsing cli-arguments"),console.log("cwd",process.cwd()),console.log("argv",process.argv),It.name("useful-tasks").version(yi.version).option("--cwd <string>","Change working directory").option("--config <string>","A path of json configuraion",nl).option("--tasks <items>","Specified task IDs to process. Comma separated e.g. my_task_01, my_task_02"),It.parse();let e=It.opts();e.tasks=il(e.tasks);let t=e;return console.log(`Using options : ${JSON.stringify(t,void 0,2)}`),t.cwd&&process.chdir(_i.default.resolve(t.cwd)),console.log("######################################################################"),t},il=e=>{if(!e)return[];if(typeof e=="string"){let t=[];return e.split(",").forEach(n=>{t.push(n.trim())}),t}return e}});var Ir,Mr,sl,jr,wi=Ne(()=>{"use strict";Ir=ee(require("fs")),Mr=ee(require("path")),sl=e=>{if(!Ir.default.existsSync(e))throw new Error(`The Path '${e}' does not exists!`);let t=Ir.default.readFileSync(e,{encoding:"utf-8"});return JSON.parse(t)},jr=e=>{let t=sl(e);if(t.extends){let r=Mr.default.dirname(e),n=Mr.default.resolve(r,t.extends);t=Object.assign({},t,jr(n))}return t}});var Si=_((dg,bi)=>{var We=1e3,Ue=We*60,Je=Ue*60,qe=Je*24,ol=qe*7,al=qe*365.25;bi.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return ul(e);if(r==="number"&&isFinite(e))return t.long?ll(e):cl(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ul(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*al;case"weeks":case"week":case"w":return r*ol;case"days":case"day":case"d":return r*qe;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Je;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ue;case"seconds":case"second":case"secs":case"sec":case"s":return r*We;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function cl(e){var t=Math.abs(e);return t>=qe?Math.round(e/qe)+"d":t>=Je?Math.round(e/Je)+"h":t>=Ue?Math.round(e/Ue)+"m":t>=We?Math.round(e/We)+"s":e+"ms"}function ll(e){var t=Math.abs(e);return t>=qe?Mt(e,t,qe,"day"):t>=Je?Mt(e,t,Je,"hour"):t>=Ue?Mt(e,t,Ue,"minute"):t>=We?Mt(e,t,We,"second"):e+" ms"}function Mt(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Br=_((pg,Ci)=>{function fl(e){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Si(),r.destroy=f,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let l=0;for(let h=0;h<c.length;h++)l=(l<<5)-l+c.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(c){let l,h=null,m,g;function w(...b){if(!w.enabled)return;let T=w,M=Number(new Date),G=M-(l||M);T.diff=G,T.prev=l,T.curr=M,l=M,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let me=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(Ce,at)=>{if(Ce==="%%")return"%";me++;let Te=r.formatters[at];if(typeof Te=="function"){let k=b[me];Ce=Te.call(T,k),b.splice(me,1),me--}return Ce}),r.formatArgs.call(T,b),(T.log||r.log).apply(T,b)}return w.namespace=c,w.useColors=r.useColors(),w.color=r.selectColor(c),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(c)),g),set:b=>{h=b}}),typeof r.init=="function"&&r.init(w),w}function n(c,l){let h=r(this.namespace+(typeof l>"u"?":":l)+c);return h.log=this.log,h}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let l,h=(typeof c=="string"?c:"").split(/[\s,]+/),m=h.length;for(l=0;l<m;l++)h[l]&&(c=h[l].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function s(){let c=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(c))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack||c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Ci.exports=fl});var Ti=_((ce,jt)=>{ce.formatArgs=ml;ce.save=dl;ce.load=pl;ce.useColors=hl;ce.storage=gl();ce.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ce.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function ml(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+jt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}ce.log=console.debug||console.log||(()=>{});function dl(e){try{e?ce.storage.setItem("debug",e):ce.storage.removeItem("debug")}catch{}}function pl(){let e;try{e=ce.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function gl(){try{return localStorage}catch{}}jt.exports=Br()(ce);var{formatters:yl}=jt.exports;yl.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Ei=_((Y,Vt)=>{var _l=require("tty"),Bt=require("util");Y.init=Tl;Y.log=bl;Y.formatArgs=kl;Y.save=Sl;Y.load=Cl;Y.useColors=vl;Y.destroy=Bt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Y.colors=[6,2,3,4,5,1];try{let e=require("supports-color");e&&(e.stderr||e).level>=2&&(Y.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Y.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function vl(){return"colors"in Y.inspectOpts?!!Y.inspectOpts.colors:_l.isatty(process.stderr.fd)}function kl(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${t} \x1B[0m`;e[0]=s+e[0].split(`
`).join(`
`+s),e.push(i+"m+"+Vt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=wl()+t+" "+e[0]}function wl(){return Y.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bl(...e){return process.stderr.write(Bt.format(...e)+`
`)}function Sl(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Cl(){return process.env.DEBUG}function Tl(e){e.inspectOpts={};let t=Object.keys(Y.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Y.inspectOpts[t[r]]}Vt.exports=Br()(Y);var{formatters:Oi}=Vt.exports;Oi.o=function(e){return this.inspectOpts.colors=this.useColors,Bt.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};Oi.O=function(e){return this.inspectOpts.colors=this.useColors,Bt.inspect(e,this.inspectOpts)}});var ft=_((gg,Vr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Vr.exports=Ti():Vr.exports=Ei()});var ze,Hr=Ne(()=>{"use strict";ze="useful-tasks"});var xi=_(le=>{"use strict";var Ol=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(le,"__esModule",{value:!0});var El=require("fs"),xl=Ol(ft()),Ye=xl.default("@kwsites/file-exists");function Fl(e,t,r){Ye("checking %s",e);try{let n=El.statSync(e);return n.isFile()&&t?(Ye("[OK] path represents a file"),!0):n.isDirectory()&&r?(Ye("[OK] path represents a directory"),!0):(Ye("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return Ye("[FAIL] path is not accessible: %o",n),!1;throw Ye("[FATAL] %o",n),n}}function Al(e,t=le.READABLE){return Fl(e,(t&le.FILE)>0,(t&le.FOLDER)>0)}le.exists=Al;le.FILE=1;le.FOLDER=2;le.READABLE=le.FILE+le.FOLDER});var Fi=_(Ht=>{"use strict";function Pl(e){for(var t in e)Ht.hasOwnProperty(t)||(Ht[t]=e[t])}Object.defineProperty(Ht,"__esModule",{value:!0});Pl(xi())});var Wr=_(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.createDeferred=Le.deferred=void 0;function Gr(){let e,t,r="pending";return{promise:new Promise((i,s)=>{e=i,t=s}),done(i){r==="pending"&&(r="resolved",e(i))},fail(i){r==="pending"&&(r="rejected",t(i))},get fulfilled(){return r!=="pending"},get status(){return r}}}Le.deferred=Gr;Le.createDeferred=Gr;Le.default=Gr});function cs(e){return typeof e=="function"?e:je}function ls(e){return typeof e=="function"&&e!==je}function fs(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function hs(e,t=0){return ms(e)&&e.length>t?e[t]:void 0}function Me(e,t=0){if(ms(e)&&e.length>t)return e[e.length-1-t]}function ms(e){return!!(e&&typeof e.length=="number")}function kt(e="",t=!0,r=`
`){return e.split(r).reduce((n,i)=>{let s=t?i.trim():i;return s&&n.push(s),n},[])}function ln(e,t){return kt(e,!0).map(r=>t(r))}function fn(e){return(0,Zt.exists)(e,Zt.FOLDER)}function x(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function ds(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function er(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function Ee(e){return Array.isArray(e)?e:[e]}function ps(e){return Ee(e).map(String)}function q(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function pt(e,t){let r=[];for(let n=0,i=e.length;n<i;n++)r.push(t,e[n]);return r}function gt(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function gs(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function Qr(e=0){return new Promise(t=>setTimeout(t,e))}function ke(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function hn(e,t){return/number|string|boolean/.test(typeof e)&&(!t||!t.includes(typeof e))}function mn(e){return!!e&&wt(e)==="[object Object]"}function ys(e){return typeof e=="function"}function ks(...e){let t=process.cwd(),r=Object.assign(de({baseDir:t},ws),...e.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}function pn(e,t=[]){return mn(e)?Object.keys(e).reduce((r,n)=>{let i=e[n];return hn(i,["boolean"])?r.push(n+"="+i):r.push(n),r},t):t}function ne(e,t=0,r=!1){let n=[];for(let i=0,s=t<0?e.length:t;i<s;i++)"string|number".includes(typeof e[i])&&n.push(String(e[i]));return pn(gn(e),n),r||n.push(...Hl(e)),n}function Hl(e){let t=typeof Me(e)=="function";return ke(Me(e,t?1:0),bt,[])}function gn(e){let t=ys(Me(e));return ke(Me(e,t?1:0),mn)}function j(e,t=!0){let r=cs(Me(e));return t||ls(r)?r:void 0}function Zr(e,t){return e(t.stdOut,t.stdErr)}function he(e,t,r,n=!0){return Ee(r).forEach(i=>{for(let s=kt(i,n),o=0,a=s.length;o<a;o++){let u=(f=0)=>{if(!(o+f>=a))return s[o+f]};t.some(({parse:f})=>f(u,e))}}),e}function Ul(e){switch(e){case"bare":return Ts();case"root":return Cs()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:rr,parser:yn}}function Cs(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:rr,parser(t){return/^\.(git)?$/.test(t.trim())}}}function Ts(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:rr,parser:yn}}function Jl(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}function zl(e,t){let r=new Es(e),n=e?Fs:xs;return kt(t).forEach(i=>{let s=i.replace(n,"");r.paths.push(s),(As.test(s)?r.folders:r.files).push(s)}),r}function Ps(e){return{commands:nr,format:"empty",parser:e}}function ie(e){return{commands:nr,format:"empty",parser(){throw typeof e=="string"?new as(e):e}}}function se(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function Ds(e){return{commands:e,format:"buffer",parser(t){return t}}}function $s(e){return e.format==="buffer"}function Rs(e){return e.format==="empty"||!e.commands.length}function Kl(e,t){let{cleanMode:r,options:n,valid:i}=Xl(e);return r?i.options?(n.push(...t),n.some(tf)?ie(_n):qs(r,n)):ie(kn+JSON.stringify(e)):ie(vn)}function qs(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(n){return zl(e==="n",n)}}}function Ql(e){return Array.isArray(e)&&e.every(t=>wn.has(t))}function Xl(e){let t,r=[],n={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(i=>{Zl(i)?(t=i,n.cleanMode=!0):n.options=n.options&&ef(r[r.length]=`-${i}`)}),{cleanMode:t,options:r,valid:n}}function Zl(e){return e==="f"||e==="n"}function ef(e){return/^-[a-z]$/i.test(e)&&wn.has(e.charAt(1))}function tf(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}function rf(e){let t=new Ms;for(let r of Is(e))t.addValue(r.file,String(r.key),r.value);return t}function nf(e,t){let r=null,n=[],i=new Map;for(let s of Is(e,t))s.key===t&&(n.push(r=s.value),i.has(s.file)||i.set(s.file,[]),i.get(s.file).push(r));return{key:t,paths:Array.from(i.keys()),scopes:i,value:r,values:n}}function sf(e){return e.replace(/^(file):/,"")}function*Is(e,t=null){let r=e.split("\0");for(let n=0,i=r.length-1;n<i;){let s=sf(r[n++]),o=r[n++],a=t;if(o.includes(`
`)){let u=fs(o,`
`);a=u[0],o=u[1]}yield{file:s,key:a,value:o}}}function Ur(e,t){return typeof e=="string"&&tn.hasOwnProperty(e)?e:t}function af(e,t,r,n){let i=["config",`--${n}`];return r&&i.push("--add"),i.push(e,t),{commands:i,format:"utf-8",parser(s){return s}}}function uf(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(n){return nf(n,e)}}}function cf(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return rf(r)}}}function lf(){return{addConfig(e,t,...r){return this._runTask(af(e,t,r[0]===!0,Ur(r[1],"local")),j(arguments))},getConfig(e,t){return this._runTask(uf(e,Ur(t,void 0)),j(arguments))},listConfig(...e){return this._runTask(cf(Ur(e[0],void 0)),j(arguments))}}}function ff(...e){return new Vs().param(...e)}function hf(e){let t=new Set,r={};return ln(e,n=>{let[i,s,o]=n.split(Ze);t.add(i),(r[i]=r[i]||[]).push({line:q(s),path:i,preview:o})}),{paths:t,results:r}}function mf(){return{grep(e){let t=j(arguments),r=ne(arguments);for(let i of Bs)if(r.includes(i))return this._runTask(ie(`git.grep: use of "${i}" is not supported.`),t);typeof e=="string"&&(e=ff().param(e));let n=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:n,format:"utf-8",parser(i){return hf(i)}},t)}}}function df(e,t){let r=["reset"];return Ws(e)&&r.push(`--${e}`),r.push(...t),se(r)}function pf(e){if(Ws(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function Ws(e){return Us.includes(e)}function gf(){return(0,Kt.default)("simple-git")}function $i(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(n,...i)=>{e(n,...i),r(n,...i)}:e:(n,...i)=>{e(`%s ${n}`,t,...i),r&&r(n,...i)}}function yf(e,t,{namespace:r}){if(typeof e=="string")return e;let n=t&&t.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function bn(e,t,r,n=gf()){let i=e&&`[${e}]`||"",s=[],o=typeof t=="string"?n.extend(t):t,a=yf(ke(t,Q),o,n);return f(r);function u(c,l){return x(s,bn(e,a.replace(/^[^:]+/,c),l,n))}function f(c){let l=c&&`[${c}]`||"",h=o&&$i(o,l)||je,m=$i(n,`${i} ${l}`,h);return Object.assign(o?h:m,{label:e,sibling:u,info:m,step:f})}}function Ke(e,t){return{method:hs(e.commands)||"",commands:t}}function vf(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function Ri(e,t,r,n){return i=>{r("%s received %L bytes",t,i),n("%B",i),e.push(i)}}function bf(e,t,r=je){let n=s=>{r(null,s)},i=s=>{s?.task===e&&r(s instanceof vt?Sf(s):s,void 0)};t.then(n,i)}function Sf(e){let t=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),t=je};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(n,i){return i in e||(n[i]={enumerable:!1,configurable:!1,get(){return t(i),e.git[i]}}),n}}function Ni(e,t){return Ps(r=>{if(!fn(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}function Jr(e){let t=["checkout",...e];return t[1]==="-b"&&t.includes("-B")&&(t[1]=er(t,"-B")),se(t)}function Of(){return{checkout(){return this._runTask(Jr(ne(arguments,1)),j(arguments))},checkoutBranch(e,t){return this._runTask(Jr(["-b",e,t,...ne(arguments)]),j(arguments))},checkoutLocalBranch(e){return this._runTask(Jr(["-b",e,...ne(arguments)]),j(arguments))}}}function xf(e){return he({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},Xs,e)}function Af(e,t,r){return{commands:["-c","core.abbrev=40","commit",...pt(e,"-m"),...t,...r],format:"utf-8",parser:xf}}function Pf(){return{commit(t,...r){let n=j(arguments),i=e(t)||Af(Ee(t),Ee(ke(r[0],Yt,[])),[...ke(r[1],bt,[]),...ne(arguments,0,!0)]);return this._runTask(i,n)}};function e(t){return!Yt(t)&&ie("git.commit: requires the commit message to be supplied as a string/string[]")}}function $f(e,t){let r=["hash-object",e];return t&&r.push("-w"),se(r,!0)}function Nf(e,t,r){let n=String(r).trim(),i;if(i=Zs.exec(n))return new Jt(e,t,!1,i[1]);if(i=eo.exec(n))return new Jt(e,t,!0,i[1]);let s="",o=n.split(" ");for(;o.length;)if(o.shift()==="in"){s=o.join(" ");break}return new Jt(e,t,/^re/i.test(n),s)}function Lf(e){return e.includes(Sn)}function If(e=!1,t,r){let n=["init",...r];return e&&!Lf(n)&&n.splice(1,0,Sn),{commands:n,format:"utf-8",parser(i){return Nf(n.includes("--bare"),t,i)}}}function Cn(e){for(let t=0;t<e.length;t++){let r=Tn.exec(e[t]);if(r)return`--${r[1]}`}return""}function jf(e){return Tn.test(e)}function ro(e=""){let t=no[e];return r=>he(new to,t,r,!1)}function Vf(e,t){return t.reduce((r,n,i)=>(r[n]=e[i]||"",r),Object.create({diff:null}))}function so(e=xn,t=oo,r=""){let n=ro(r);return function(i){let s=kt(i,!0,On).map(function(o){let a=o.trim().split(En),u=Vf(a[0].trim().split(e),t);return a.length>1&&a[1].trim()&&(u.diff=n(a[1])),u});return{all:s,latest:s.length&&s[0]||null,total:s.length}}}function Hf(e){let t=Cn(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),ir(r)||{commands:r,format:"utf-8",parser:ro(t)}}function ir(e){let t=e.filter(jf);if(t.length>1)return ie(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return ie(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}function Gf(e,t){let r=[],n=[];return Object.keys(e).forEach(i=>{r.push(i),n.push(String(e[i]))}),[r,n.join(t)]}function Wf(e){return Object.keys(e).reduce((t,r)=>(r in sn||(t[r]=e[r]),t),{})}function co(e={},t=[]){let r=ke(e.splitter,Q,xn),n=!hn(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[i,s]=Gf(n,r),o=[],a=[`--pretty=format:${On}${s}${En}`,...t],u=e.n||e["max-count"]||e.maxCount;if(u&&a.push(`--max-count=${u}`),e.from||e.to){let f=e.symmetric!==!1?"...":"..";o.push(`${e.from||""}${f}${e.to||""}`)}return Q(e.file)&&o.push("--follow",e.file),pn(Wf(e),a),{fields:i,splitter:r,commands:[...a,...o]}}function Uf(e,t,r){let n=so(e,t,Cn(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Jf(){return{log(...r){let n=j(arguments),i=co(gn(arguments),ke(arguments[0],bt)),s=t(...r)||ir(i.commands)||e(i);return this._runTask(s,n)}};function e(r){return Uf(r.splitter,r.fields,r.commands)}function t(r,n){return Q(r)&&Q(n)&&ie("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}function Yr(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Mi(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:q(t&&t[1]||"0"),delta:q(r&&r[1]||"0")}}function po(e,t){return he({remoteMessages:new yo},go,t)}function Qf(e,t){let r=he(new ho,vo,[e,t]);return r.message&&r}function Ji(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let n=wo(t,r);if(n.failed)throw new vt(n);return n}}:ie("Git.merge requires at least one option")}function eh(e,t,r){let n=r.includes("deleted"),i=r.includes("tag")||/^refs\/tags/.test(e),s=!r.includes("new");return{deleted:n,tag:i,branch:!i,new:!s,alreadyUpdated:s,local:e,remote:t}}function rh(e={},t){return x(t,"--tags"),Pn(e,t)}function Pn(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),er(r,"-v"),x(r,"--verbose"),x(r,"--porcelain"),{commands:r,format:"utf-8",parser:bo}}function nh(){return{showBuffer(){let e=["show",...ne(arguments,1)];return e.includes("--binary")||e.splice(1,0,"--binary"),this._runTask(Ds(e),j(arguments))},show(){let e=["show",...ne(arguments,1)];return this._runTask(se(e),j(arguments))}}}function Qi(e){let[t,r]=e.split(Ze);return{from:r||t,to:t}}function fe(e,t,r){return[`${e}${t}`,r]}function Kr(e,...t){return t.map(r=>fe(e,r,(n,i)=>x(n.conflicted,i)))}function oh(e,t){let r=t.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(i,s,o){let a=`${i}${s}`,u=Oo.get(a);u&&u(e,o),a!=="##"&&a!=="!!"&&e.files.push(new To(o.replace(/\0.+$/,""),i,s))}}function uh(e){return{format:"utf-8",commands:["status","--porcelain","-b","-u","--null",...e.filter(r=>!xo.includes(r))],parser(r){return Eo(r)}}}function Qt(e=0,t=0,r=0,n="",i=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:n,installed:i},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function lh(){return Qt(0,0,0,"",!1)}function fh(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:hh,onError(e,t,r,n){if(e.exitCode===-2)return r(Buffer.from(Dn));n(t)}})}}}function hh(e){return e===Dn?lh():he(Qt(0,0,0,e),Fo,e)}function gh(e,t){return se(["apply",...t,...e])}function _h(e,t){return{branch:e,hash:t,success:!0}}function vh(e){return{branch:e,hash:null,success:!1}}function qo(e,t){return t===1&&un.test(e)}function rs(e){return e?e.charAt(0):""}function Io(e){return he(new Lo,Mo,e)}function Bo(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function Ch(e){let t=Bo(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,i){return t?sr(n,i).all[0]:Io(n)}}}function Th(){return{format:"utf-8",commands:["branch","-v"],parser:Io}}function Oh(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,n){return sr(r,n)},onError({exitCode:r,stdOut:n},i,s,o){if(!qo(String(i),r))return o(i);s(n)}}}function Eh(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(n,i){return sr(n,i).branches[e]},onError({exitCode:n,stdErr:i,stdOut:s},o,a,u){if(!qo(String(o),n))return u(o);throw new vt(r.parser(gt(s),gt(i)),String(o))}};return r}function Ah(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Vo}}function Dh(e){return/^--upload-pack(=|$)/.test(e)}function Wo(e,t,r){let n=["clone",...r];return Q(e)&&n.push(e),Q(t)&&n.push(t),n.find(Dh)?ie("git.fetch: potential exploit argument blocked."):se(n)}function $h(e,t,r){return x(r,"--mirror"),Wo(e,t,r)}function Nh(e,t){return he({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},Uo,[e,t])}function Lh(e){return/^--upload-pack(=|$)/.test(e)}function Ih(e,t,r){let n=["fetch",...r];return e&&t&&n.push(e,t),n.find(Lh)?ie("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:Nh}}function jh(e){return he({moves:[]},zo,e)}function Vh(e,t){return{commands:["mv","-v",...Ee(e),t],format:"utf-8",parser:jh}}function Gh(e,t,r){let n=["pull",...r];return e&&t&&n.splice(1,0,e,t),{commands:n,format:"utf-8",parser(i,s){return An(i,s)},onError(i,s,o,a){let u=Qf(gt(i.stdOut),gt(i.stdErr));if(u)return a(new vt(u));a(s)}}}function Uh(e){let t={};return Qo(e,([r])=>t[r]={name:r}),Object.values(t)}function Jh(e){let t={};return Qo(e,([r,n,i])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),i&&n&&(t[r].refs[i.replace(/[^a-z]/g,"")]=n)}),Object.values(t)}function Qo(e,t){ln(e,r=>t(r.split(/\s+/)))}function Yh(e,t,r=[]){return se(["remote","add",...r,e,t])}function Kh(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?Jh:Uh}}function Qh(e=[]){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),se(t)}function Xh(e=[]){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),se(t)}function Zh(e){return se(["remote","remove",e])}function tm(e={},t){let r=co(e),n=["stash","list",...r.commands,...t],i=so(r.splitter,r.fields,Cn(n));return ir(n)||{commands:n,format:"utf-8",parser:i}}function nm(e,t){return or(["add",e,t])}function im(e){return or(["init",...e])}function or(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),se(t)}function sm(e){return or(["update",...e])}function am(e,t){let r=isNaN(e),n=isNaN(t);return r!==n?r?1:-1:r?ta(e,t):0}function ta(e,t){return e===t?0:e>t?1:-1}function um(e){return e.trim()}function Wt(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}function lm(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return ra(r,t)}}}function fm(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function hm(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}function gm(e){return e?[{type:"spawn.before",action(n,i){e.aborted&&i.kill(new Ie(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,i){function s(){i.kill(new Ie(void 0,"abort","Abort signal received"))}e.addEventListener("abort",s),i.spawned.on("close",()=>e.removeEventListener("abort",s))}}]:void 0}function ym(e){return typeof e=="string"&&e.trim().toLowerCase()==="-c"}function _m(e,t){if(ym(e)&&/^\s*protocol(.[a-z]+)?.allow/.test(t))throw new Ie(void 0,"unsafe","Configuring protocol.allow is not permitted without enabling allowUnsafeExtProtocol")}function vm(e,t){if(/^\s*--(upload|receive)-pack/.test(e))throw new Ie(void 0,"unsafe","Use of --upload-pack or --receive-pack is not permitted without enabling allowUnsafePack");if(t==="clone"&&/^\s*-u\b/.test(e))throw new Ie(void 0,"unsafe","Use of clone with option -u is not permitted without enabling allowUnsafePack");if(t==="push"&&/^\s*--exec\b/.test(e))throw new Ie(void 0,"unsafe","Use of push with option --exec is not permitted without enabling allowUnsafePack")}function km({allowUnsafeProtocolOverride:e=!1,allowUnsafePack:t=!1}={}){return{type:"spawn.args",action(r,n){return r.forEach((i,s)=>{let o=s<r.length?r[s+1]:"";e||_m(i,o),t||vm(i,n.method)}),r}}}function wm(e){let t=pt(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}function bm({onClose:e=!0,onExit:t=50}={}){function r(){let i=-1,s={close:(0,Qe.deferred)(),closeTimeout:(0,Qe.deferred)(),exit:(0,Qe.deferred)(),exitTimeout:(0,Qe.deferred)()},o=Promise.race([e===!1?is:s.closeTimeout.promise,t===!1?is:s.exitTimeout.promise]);return n(e,s.close,s.closeTimeout),n(t,s.exit,s.exitTimeout),{close(a){i=a,s.close.done()},exit(a){i=a,s.exit.done()},get exitCode(){return i},result:o}}function n(i,s,o){i!==!1&&(i===!0?s.promise:s.promise.then(()=>Qr(i))).then(o.done)}return{type:"spawn.after",action(i,s){return mt(this,arguments,function*(o,{spawned:a,close:u}){var f,c;let l=r(),h=!0,m=()=>void(h=!1);(f=a.stdout)==null||f.on("data",m),(c=a.stderr)==null||c.on("data",m),a.on("error",m),a.on("close",g=>l.close(g)),a.on("exit",g=>l.exit(g));try{yield l.result,h&&(yield Qr(50)),u(l.exitCode)}catch(g){u(l.exitCode,g)}})}}}function Sm(e){return!!(e.exitCode&&e.stdErr.length)}function Cm(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function Tm(e=!1,t=Sm,r=Cm){return(n,i)=>!e&&n||!t(i)?n:r(i)}function ss(e){return{type:"task.error",action(t,r){let n=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new Se(void 0,n.toString("utf-8"))}:{error:n}}}}function Em(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(s,o){return r.includes(o.method)?ds(s,t):s}},{type:"spawn.after",action(s,o){var a;o.commands.includes(t)&&((a=o.spawned.stderr)==null||a.on("data",u=>{let f=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(u.toString("utf8"));f&&e({method:o.method,stage:xm(f[1]),progress:q(f[2]),processed:q(f[3]),total:q(f[4])})}))}}]}function xm(e){return String(e.toLowerCase().split(" ",1))||"unknown"}function Fm(e){let t=gs(e,["uid","gid"]);return{type:"spawn.options",action(r){return de(de({},t),r)}}}function Am({block:e,stdErr:t=!0,stdOut:r=!0}){if(e>0)return{type:"spawn.after",action(n,i){var s,o;let a;function u(){a&&clearTimeout(a),a=setTimeout(c,e)}function f(){var l,h;(l=i.spawned.stdout)==null||l.off("data",u),(h=i.spawned.stderr)==null||h.off("data",u),i.spawned.off("exit",f),i.spawned.off("close",f),a&&clearTimeout(a)}function c(){f(),i.kill(new Ie(void 0,"timeout","block timeout reached"))}r&&((s=i.spawned.stdout)==null||s.on("data",u)),t&&((o=i.spawned.stderr)==null||o.on("data",u)),i.spawned.on("exit",f),i.spawned.on("close",f),u()}}}function Dm(e,t){let r=new Om,n=ks(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!fn(n.baseDir))throw new pm(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(wm(n.config)),r.add(km(n.unsafe)),r.add(bm(n.completion)),n.abort&&r.add(gm(n.abort)),n.progress&&r.add(Em(n.progress)),n.timeout&&r.add(Am(n.timeout)),n.spawnOptions&&r.add(Fm(n.spawnOptions)),r.add(ss(Tm(!0))),n.errors&&r.add(ss(n.errors)),new Pm(n,r)}var Zt,Kt,Ys,Do,Qe,Xt,Dl,$l,Rl,cn,Ai,os,Nl,Pi,de,dt,ql,p,Ll,B,Il,I,mt,Se,xe,vt,et,as,us,Ze,je,wt,tr,bt,Q,_s,Yt,dn,vs,Xr,Ml,yt,jl,C,Oe,Bl,ws,Vl,Gl,Wl,bs,S,Ss,_t,rr,yn,Os,Es,xs,Fs,As,Yl,en,nr,H,Ns,_n,vn,kn,Ut,wn,Ls,Ms,of,tn,js,Bs,ht,Di,Vs,Hs,Gs,Xe,Us,Js,zs,Gt,rn,_f,nn,kf,Ks,Qs,wf,Cf,Tf,Ef,Xs,Ff,Df,Rf,Jt,Zs,eo,qf,Sn,Mf,Tn,St,to,Bf,zr,qi,Li,Ii,no,io,On,En,xn,oo,ao,uo,Fn,sn,lo,zt,fo,zf,on,ho,Yf,mo,Kf,go,yo,_o,ji,Bi,Vi,Hi,vo,Gi,An,ko,Wi,wo,Ui,Xf,Zf,zi,bo,Yi,th,So,Co,ih,Ki,To,sh,Xi,Oo,Eo,ah,xo,ch,Dn,Fo,mh,Ao,an,dh,Po,Zi,$o,ph,Ro,yh,No,kh,es,un,ts,sr,wh,Lo,bh,Mo,Sh,jo,xh,Vo,Fh,Ho,Ph,Go,Rh,Uo,qh,Jo,Mh,zo,Bh,Yo,Hh,Ko,Wh,zh,Xo,em,Zo,rm,ea,om,ns,ra,cm,na,mm,dm,pm,Ie,is,Om,Pm,$n,ia=Ne(()=>{Zt=ee(Fi(),1),Kt=ee(ft(),1),Ys=require("child_process"),Do=ee(Wr(),1),Qe=ee(Wr(),1),Xt=Object.defineProperty,Dl=Object.defineProperties,$l=Object.getOwnPropertyDescriptor,Rl=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertyNames,Ai=Object.getOwnPropertySymbols,os=Object.prototype.hasOwnProperty,Nl=Object.prototype.propertyIsEnumerable,Pi=(e,t,r)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))os.call(t,r)&&Pi(e,r,t[r]);if(Ai)for(var r of Ai(t))Nl.call(t,r)&&Pi(e,r,t[r]);return e},dt=(e,t)=>Dl(e,Rl(t)),ql=e=>Xt(e,"__esModule",{value:!0}),p=(e,t)=>function(){return e&&(t=(0,e[cn(e)[0]])(e=0)),t},Ll=(e,t)=>function(){return t||(0,e[cn(e)[0]])((t={exports:{}}).exports,t),t.exports},B=(e,t)=>{for(var r in t)Xt(e,r,{get:t[r],enumerable:!0})},Il=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cn(t))!os.call(e,i)&&(r||i!=="default")&&Xt(e,i,{get:()=>t[i],enumerable:!(n=$l(t,i))||n.enumerable});return e},I=(e=>(t,r)=>e&&e.get(t)||(r=Il(ql({}),t,1),e&&e.set(t,r),r))(typeof WeakMap<"u"?new WeakMap:0),mt=(e,t,r)=>new Promise((n,i)=>{var s=u=>{try{a(r.next(u))}catch(f){i(f)}},o=u=>{try{a(r.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);a((r=r.apply(e,t)).next())}),xe=p({"src/lib/errors/git-error.ts"(){Se=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),et=p({"src/lib/errors/git-response-error.ts"(){xe(),vt=class extends Se{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),us=p({"src/lib/errors/task-configuration-error.ts"(){xe(),as=class extends Se{constructor(e){super(void 0,e)}}}});tr=p({"src/lib/utils/util.ts"(){Ze="\0",je=()=>{},wt=Object.prototype.toString.call.bind(Object.prototype.toString)}});vs=p({"src/lib/utils/argument-filters.ts"(){tr(),bt=e=>Array.isArray(e),Q=e=>typeof e=="string",_s=e=>Array.isArray(e)&&e.every(Q),Yt=e=>Q(e)||Array.isArray(e)&&e.every(Q),dn=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),Ml=p({"src/lib/utils/exit-codes.ts"(){Xr=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(Xr||{})}}),jl=p({"src/lib/utils/git-output-streams.ts"(){yt=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new yt(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),Bl=p({"src/lib/utils/line-parser.ts"(){C=class{constructor(e,t){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((i,s)=>this.addMatch(i,s,r(s)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let n=r&&e.exec(r);return n&&this.pushMatch(t,n),!!n}pushMatch(e,t){this.matches.push(...t.slice(1))}},Oe=class extends C{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});Vl=p({"src/lib/utils/simple-git-options.ts"(){ws={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});Gl=p({"src/lib/utils/task-options.ts"(){vs(),tr()}});Wl=p({"src/lib/utils/task-parser.ts"(){tr()}}),bs={};B(bs,{ExitCodes:()=>Xr,GitOutputStreams:()=>yt,LineParser:()=>C,NOOP:()=>je,NULL:()=>Ze,RemoteLineParser:()=>Oe,append:()=>x,appendTaskOptions:()=>pn,asArray:()=>Ee,asFunction:()=>cs,asNumber:()=>q,asStringArray:()=>ps,bufferToString:()=>gt,callTaskParser:()=>Zr,createInstanceConfig:()=>ks,delay:()=>Qr,filterArray:()=>bt,filterFunction:()=>ys,filterHasLength:()=>dn,filterPlainObject:()=>mn,filterPrimitives:()=>hn,filterString:()=>Q,filterStringArray:()=>_s,filterStringOrStringArray:()=>Yt,filterType:()=>ke,first:()=>hs,folderExists:()=>fn,forEachLineWithContent:()=>ln,getTrailingOptions:()=>ne,including:()=>ds,isUserFunction:()=>ls,last:()=>Me,objectToString:()=>wt,parseStringResponse:()=>he,pick:()=>gs,prefixedArray:()=>pt,remove:()=>er,splitOn:()=>fs,toLinesWithContent:()=>kt,trailingFunctionArgument:()=>j,trailingOptionsArgument:()=>gn});S=p({"src/lib/utils/index.ts"(){vs(),Ml(),jl(),Bl(),Vl(),Gl(),Wl(),tr()}}),Ss={};B(Ss,{CheckRepoActions:()=>_t,checkIsBareRepoTask:()=>Ts,checkIsRepoRootTask:()=>Cs,checkIsRepoTask:()=>Ul});Os=p({"src/lib/tasks/check-is-repo.ts"(){S(),_t=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(_t||{}),rr=({exitCode:e},t,r,n)=>{if(e===128&&Jl(t))return r(Buffer.from("false"));n(t)},yn=e=>e.trim()==="true"}});Yl=p({"src/lib/responses/CleanSummary.ts"(){S(),Es=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},xs=/^[a-z]+\s*/i,Fs=/^[a-z]+\s+[a-z]+\s*/i,As=/\/$/}}),en={};B(en,{EMPTY_COMMANDS:()=>nr,adhocExecTask:()=>Ps,configurationErrorTask:()=>ie,isBufferTask:()=>$s,isEmptyTask:()=>Rs,straightThroughBufferTask:()=>Ds,straightThroughStringTask:()=>se});H=p({"src/lib/tasks/task.ts"(){us(),nr=[]}}),Ns={};B(Ns,{CONFIG_ERROR_INTERACTIVE_MODE:()=>_n,CONFIG_ERROR_MODE_REQUIRED:()=>vn,CONFIG_ERROR_UNKNOWN_OPTION:()=>kn,CleanOptions:()=>Ut,cleanTask:()=>qs,cleanWithOptionsTask:()=>Kl,isCleanOptionsArray:()=>Ql});Ls=p({"src/lib/tasks/clean.ts"(){Yl(),S(),H(),_n="Git clean interactive mode is not supported",vn='Git clean mode parameter ("n" or "f") is required',kn="Git clean unknown option found in: ",Ut=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(Ut||{}),wn=new Set(["i",...ps(Object.values(Ut))])}});of=p({"src/lib/responses/ConfigList.ts"(){S(),Ms=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=Me(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let n=this.addFile(e);n.hasOwnProperty(t)?Array.isArray(n[t])?n[t].push(r):n[t]=[n[t],r]:n[t]=r,this._all=void 0}}}});js=p({"src/lib/tasks/config.ts"(){of(),S(),tn=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(tn||{})}});Hs=p({"src/lib/tasks/grep.ts"(){S(),H(),Bs=["-h"],ht=Symbol("grepQuery"),Vs=class{constructor(){this[Di]=[]}*[(Di=ht,Symbol.iterator)](){for(let e of this[ht])yield e}and(...e){return e.length&&this[ht].push("--and","(",...pt(e,"-e"),")"),this}param(...e){return this[ht].push(...pt(e,"-e")),this}}}}),Gs={};B(Gs,{ResetMode:()=>Xe,getResetMode:()=>pf,resetTask:()=>df});Js=p({"src/lib/tasks/reset.ts"(){H(),Xe=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(Xe||{}),Us=Array.from(Object.values(Xe))}});zs=p({"src/lib/git-logger.ts"(){S(),Kt.default.formatters.L=e=>String(dn(e)?e.length:"-"),Kt.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):wt(e)}}),_f=p({"src/lib/runners/tasks-pending-queue.ts"(){xe(),zs(),Gt=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=Gt.getName(e.commands[0]),r=bn(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new Se(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++Gt.counter}`}},rn=Gt,rn.counter=0}});kf=p({"src/lib/runners/git-executor-chain.ts"(){xe(),H(),S(),_f(),nn=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new rn}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return mt(this,null,function*(){let t=yield this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:n}=this._queue.attempt(e);return yield Rs(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(n){throw this.onFatalException(e,n)}finally{r(),t()}})}onFatalException(e,t){let r=t instanceof Se?Object.assign(t,{task:e}):new Se(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return mt(this,null,function*(){let r=this._plugins.exec("spawn.args",[...e.commands],Ke(e,e.commands)),n=yield this.gitResponse(e,this.binary,r,this.outputHandler,t.step("SPAWN")),i=yield this.handleTaskData(e,r,n,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),$s(e)?Zr(e.parser,i):Zr(e.parser,i.asStrings())})}attemptEmptyTask(e,t){return mt(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,r,n){let{exitCode:i,rejection:s,stdOut:o,stdErr:a}=r;return new Promise((u,f)=>{n("Preparing to handle process response exitCode=%d stdOut=",i);let{error:c}=this._plugins.exec("task.error",{error:s},de(de({},Ke(e,t)),r));if(c&&e.onError)return n.info("exitCode=%s handling with custom error handler"),e.onError(r,c,l=>{n.info("custom error handler treated as success"),n("custom error returned a %s",wt(l)),u(new yt(Array.isArray(l)?Buffer.concat(l):l,Buffer.concat(a)))},f);if(c)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",i,a.length,s),f(c);n.info("retrieving task output complete"),u(new yt(Buffer.concat(o),Buffer.concat(a)))})}gitResponse(e,t,r,n,i){return mt(this,null,function*(){let s=i.sibling("output"),o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},Ke(e,e.commands));return new Promise(a=>{let u=[],f=[];i.info("%s %o",t,r),i("%O",o);let c=this._beforeSpawn(e,r);if(c)return a({stdOut:u,stdErr:f,exitCode:9901,rejection:c});this._plugins.exec("spawn.before",void 0,dt(de({},Ke(e,r)),{kill(h){c=h||c}}));let l=(0,Ys.spawn)(t,r,o);l.stdout.on("data",Ri(u,"stdOut",i,s.step("stdOut"))),l.stderr.on("data",Ri(f,"stdErr",i,s.step("stdErr"))),l.on("error",vf(f,i)),n&&(i("Passing child process stdOut/stdErr to custom outputHandler"),n(t,l.stdout,l.stderr,[...r])),this._plugins.exec("spawn.after",void 0,dt(de({},Ke(e,r)),{spawned:l,close(h,m){a({stdOut:u,stdErr:f,exitCode:h,rejection:c||m})},kill(h){l.killed||(c=h,l.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,dt(de({},Ke(e,t)),{kill(n){r=n||r}})),r}}}}),Ks={};B(Ks,{GitExecutor:()=>Qs});wf=p({"src/lib/runners/git-executor.ts"(){kf(),Qs=class{constructor(e="git",t,r,n){this.binary=e,this.cwd=t,this._scheduler=r,this._plugins=n,this._chain=new nn(this,this._scheduler,this._plugins)}chain(){return new nn(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});Cf=p({"src/lib/task-callback.ts"(){et(),S()}});Tf=p({"src/lib/tasks/change-working-directory.ts"(){S(),H()}});Ef=p({"src/lib/tasks/checkout.ts"(){S(),H()}});Ff=p({"src/lib/parsers/parse-commit.ts"(){S(),Xs=[new C(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,n])=>{e.branch=t,e.commit=n,e.root=!!r}),new C(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),n=r.pop();!n||!n.includes("@")||(e.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new C(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(n,10)||0}),new C(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0;let i=parseInt(r,10)||0;n==="-"?e.summary.deletions=i:n==="+"&&(e.summary.insertions=i)})]}});Df=p({"src/lib/tasks/commit.ts"(){Ff(),S(),H()}});Rf=p({"src/lib/tasks/hash-object.ts"(){H()}});qf=p({"src/lib/responses/InitSummary.ts"(){Jt=class{constructor(e,t,r,n){this.bare=e,this.path=t,this.existing=r,this.gitDir=n}},Zs=/^Init.+ repository in (.+)$/,eo=/^Rein.+ in (.+)$/}});Mf=p({"src/lib/tasks/init.ts"(){qf(),Sn="--bare"}});St=p({"src/lib/args/log-format.ts"(){Tn=/^--(stat|numstat|name-only|name-status)(=|$)/}}),Bf=p({"src/lib/responses/DiffSummary.ts"(){to=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});io=p({"src/lib/parsers/parse-diff-summary.ts"(){St(),Bf(),S(),zr=[new C(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,n=""])=>{e.files.push({file:t.trim(),changes:q(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new C(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,n])=>{e.files.push({file:t.trim(),before:q(r),after:q(n),binary:!0})}),new C(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let n=/(\d+) i/.exec(r),i=/(\d+) d/.exec(r);e.changed=q(t),e.insertions=q(n?.[1]),e.deletions=q(i?.[1])})],qi=[new C(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,n])=>{let i=q(t),s=q(r);e.changed++,e.insertions+=i,e.deletions+=s,e.files.push({file:n,changes:i+s,insertions:i,deletions:s,binary:!1})}),new C(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],Li=[new C(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],Ii=[new C(/([ACDMRTUXB])\s*(.+)$/,(e,[t,r])=>{e.changed++,e.files.push({file:r,changes:0,insertions:0,deletions:0,binary:!1})})],no={[""]:zr,["--stat"]:zr,["--numstat"]:qi,["--name-status"]:Ii,["--name-only"]:Li}}});ao=p({"src/lib/parsers/parse-list-log-summary.ts"(){S(),io(),St(),On="\xF2\xF2\xF2\xF2\xF2\xF2 ",En=" \xF2\xF2",xn=" \xF2 ",oo=["hash","date","message","refs","author_name","author_email"]}}),uo={};B(uo,{diffSummaryTask:()=>Hf,validateLogFormatConfig:()=>ir});Fn=p({"src/lib/tasks/diff.ts"(){St(),io(),H()}});lo=p({"src/lib/tasks/log.ts"(){St(),ao(),S(),H(),Fn(),sn=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(sn||{})}}),zf=p({"src/lib/responses/MergeSummary.ts"(){zt=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},fo=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),Yf=p({"src/lib/responses/PullSummary.ts"(){on=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},ho=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});Kf=p({"src/lib/parsers/parse-remote-objects.ts"(){S(),mo=[new Oe(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=Yr(e.remoteMessages);Object.assign(i,{[n]:q(r)})}),new Oe(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let n=t.toLowerCase(),i=Yr(e.remoteMessages);Object.assign(i,{[n]:q(r)})}),new Oe(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,n])=>{let i=Yr(e.remoteMessages);i.total=Mi(t),i.reused=Mi(r),i.packReused=q(n)})]}});_o=p({"src/lib/parsers/parse-remote-messages.ts"(){S(),Kf(),go=[new Oe(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...mo,new Oe([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new Oe([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,n])=>{e.remoteMessages.vulnerabilities={count:q(t),summary:r,url:n}})],yo=class{constructor(){this.all=[]}}}});ko=p({"src/lib/parsers/parse-pull.ts"(){Yf(),S(),_o(),ji=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,Bi=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Vi=/^(create|delete) mode \d+ (.+)/,Hi=[new C(ji,(e,[t,r,n])=>{e.files.push(t),r&&(e.insertions[t]=r.length),n&&(e.deletions[t]=n.length)}),new C(Bi,(e,[t,,r,,n])=>r!==void 0||n!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+n||0,!0):!1),new C(Vi,(e,[t,r])=>{x(e.files,r),x(t==="create"?e.created:e.deleted,r)})],vo=[new C(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new C(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new C(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,n,i])=>{e.branch.local=n,e.hash.local=t,e.branch.remote=i,e.hash.remote=r})],Gi=(e,t)=>he(new on,Hi,[e,t]),An=(e,t)=>Object.assign(new on,Gi(e,t),po(e,t))}}),Xf=p({"src/lib/parsers/parse-merge.ts"(){zf(),S(),ko(),Wi=[new C(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new C(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new zt(t,r))}),new C(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,n])=>{e.conflicts.push(new zt(t,r,{deleteRef:n}))}),new C(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new zt(t,null))}),new C(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],wo=(e,t)=>Object.assign(Ui(e,t),An(e,t)),Ui=e=>he(new fo,Wi,e)}});Zf=p({"src/lib/tasks/merge.ts"(){et(),Xf(),H()}});th=p({"src/lib/parsers/parse-push.ts"(){S(),_o(),zi=[new C(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new C(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=dt(de({},e.ref||{}),{local:t})}),new C(/^[=*-]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,n])=>{e.pushed.push(eh(t,r,n))}),new C(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,n])=>{e.branch=dt(de({},e.branch||{}),{local:t,remote:r,remoteName:n})}),new C(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,n,i])=>{e.update={head:{local:t,remote:r},hash:{from:n,to:i}}})],bo=(e,t)=>{let r=Yi(e,t),n=po(e,t);return de(de({},r),n)},Yi=(e,t)=>he({pushed:[]},zi,[e,t])}}),So={};B(So,{pushTagsTask:()=>rh,pushTask:()=>Pn});Co=p({"src/lib/tasks/push.ts"(){th(),S()}});ih=p({"src/lib/tasks/show.ts"(){S(),H()}}),sh=p({"src/lib/responses/FileStatusSummary.ts"(){Ki=/^(.+) -> (.+)$/,To=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t+r==="R"){let n=Ki.exec(e)||[null,e,e];this.from=n[1]||"",this.path=n[2]||""}}}}});ah=p({"src/lib/responses/StatusSummary.ts"(){S(),sh(),Xi=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},Oo=new Map([fe(" ","A",(e,t)=>x(e.created,t)),fe(" ","D",(e,t)=>x(e.deleted,t)),fe(" ","M",(e,t)=>x(e.modified,t)),fe("A"," ",(e,t)=>x(e.created,t)&&x(e.staged,t)),fe("A","M",(e,t)=>x(e.created,t)&&x(e.staged,t)&&x(e.modified,t)),fe("D"," ",(e,t)=>x(e.deleted,t)&&x(e.staged,t)),fe("M"," ",(e,t)=>x(e.modified,t)&&x(e.staged,t)),fe("M","M",(e,t)=>x(e.modified,t)&&x(e.staged,t)),fe("R"," ",(e,t)=>{x(e.renamed,Qi(t))}),fe("R","M",(e,t)=>{let r=Qi(t);x(e.renamed,r),x(e.modified,r.to)}),fe("!","!",(e,t)=>{x(e.ignored=e.ignored||[],t)}),fe("?","?",(e,t)=>x(e.not_added,t)),...Kr("A","A","U"),...Kr("D","D","U"),...Kr("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,i=/^(.+?(?=(?:\.{3}|\s|$)))/,s=/\.{3}(\S*)/,o=/\son\s([\S]+)$/,a;a=r.exec(t),e.ahead=a&&+a[1]||0,a=n.exec(t),e.behind=a&&+a[1]||0,a=i.exec(t),e.current=a&&a[1],a=s.exec(t),e.tracking=a&&a[1],a=o.exec(t),e.current=a&&a[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),Eo=function(e){let t=e.split(Ze),r=new Xi;for(let n=0,i=t.length;n<i;){let s=t[n++].trim();s&&(s.charAt(0)==="R"&&(s+=Ze+(t[n++]||"")),oh(r,s))}return r}}});ch=p({"src/lib/tasks/status.ts"(){ah(),xo=["--null","-z"]}});mh=p({"src/lib/tasks/version.ts"(){S(),Dn="installed=false",Fo=[new C(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,n,i=""])=>{Object.assign(e,Qt(q(t),q(r),q(n),i))}),new C(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,n,i=""])=>{Object.assign(e,Qt(q(t),q(r),n,i))})]}}),Ao={};B(Ao,{SimpleGitApi:()=>an});dh=p({"src/lib/simple-git-api.ts"(){Cf(),Tf(),Ef(),Df(),js(),Hs(),Rf(),Mf(),lo(),Zf(),Co(),ih(),ch(),H(),mh(),S(),an=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),n=r.push(e);return t&&bf(e,n,t),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(e){return this._runTask(se(["add",...Ee(e)]),j(arguments))}cwd(e){let t=j(arguments);return typeof e=="string"?this._runTask(Ni(e,this._executor),t):typeof e?.path=="string"?this._runTask(Ni(e.path,e.root&&this._executor||void 0),t):this._runTask(ie("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask($f(e,t===!0),j(arguments))}init(e){return this._runTask(If(e===!0,this._executor.cwd,ne(arguments)),j(arguments))}merge(){return this._runTask(Ji(ne(arguments)),j(arguments))}mergeFromTo(e,t){return Q(e)&&Q(t)?this._runTask(Ji([e,t,...ne(arguments)]),j(arguments,!1)):this._runTask(ie("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=Pn({remote:ke(arguments[0],Q),branch:ke(arguments[1],Q)},ne(arguments));return this._runTask(e,j(arguments))}stash(){return this._runTask(se(["stash",...ne(arguments)]),j(arguments))}status(){return this._runTask(uh(ne(arguments)),j(arguments))}},Object.assign(an.prototype,Of(),Pf(),lf(),mf(),Jf(),nh(),fh())}}),Po={};B(Po,{Scheduler:()=>$o});ph=p({"src/lib/runners/scheduler.ts"(){S(),zs(),Zi=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,Do.createDeferred)();return{promise:t,done:r,id:e}}})(),$o=class{constructor(e=2){this.concurrency=e,this.logger=bn("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=x(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),er(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=x(this.pending,Zi());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),Ro={};B(Ro,{applyPatchTask:()=>gh});yh=p({"src/lib/tasks/apply-patch.ts"(){H()}});kh=p({"src/lib/responses/BranchDeleteSummary.ts"(){No=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});wh=p({"src/lib/parsers/parse-branch-delete.ts"(){kh(),S(),es=/(\S+)\s+\(\S+\s([^)]+)\)/,un=/^error[^']+'([^']+)'/m,ts=[new C(es,(e,[t,r])=>{let n=_h(t,r);e.all.push(n),e.branches[t]=n}),new C(un,(e,[t])=>{let r=vh(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],sr=(e,t)=>he(new No,ts,[e,t])}}),bh=p({"src/lib/responses/BranchSummary.ts"(){Lo=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,n,i){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:n,label:i}}}}});Sh=p({"src/lib/parsers/parse-branch.ts"(){bh(),S(),Mo=[new C(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,n,i])=>{e.push(rs(t),!0,r,n,i)}),new C(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(e,[t,r,n,i])=>{e.push(rs(t),!1,r,n,i)})]}}),jo={};B(jo,{branchLocalTask:()=>Th,branchTask:()=>Ch,containsDeleteBranchCommand:()=>Bo,deleteBranchTask:()=>Eh,deleteBranchesTask:()=>Oh});xh=p({"src/lib/tasks/branch.ts"(){et(),wh(),Sh(),S()}}),Fh=p({"src/lib/responses/CheckIgnore.ts"(){Vo=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),Ho={};B(Ho,{checkIgnoreTask:()=>Ah});Ph=p({"src/lib/tasks/check-ignore.ts"(){Fh()}}),Go={};B(Go,{cloneMirrorTask:()=>$h,cloneTask:()=>Wo});Rh=p({"src/lib/tasks/clone.ts"(){H(),S()}});qh=p({"src/lib/parsers/parse-fetch.ts"(){S(),Uo=[new C(/From (.+)$/,(e,[t])=>{e.remote=t}),new C(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new C(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new C(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new C(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,n,i])=>{e.updated.push({name:n,tracking:i,to:r,from:t})})]}}),Jo={};B(Jo,{fetchTask:()=>Ih});Mh=p({"src/lib/tasks/fetch.ts"(){qh(),H()}});Bh=p({"src/lib/parsers/parse-move.ts"(){S(),zo=[new C(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),Yo={};B(Yo,{moveTask:()=>Vh});Hh=p({"src/lib/tasks/move.ts"(){Bh(),S()}}),Ko={};B(Ko,{pullTask:()=>Gh});Wh=p({"src/lib/tasks/pull.ts"(){et(),ko(),S()}});zh=p({"src/lib/responses/GetRemoteSummary.ts"(){S()}}),Xo={};B(Xo,{addRemoteTask:()=>Yh,getRemotesTask:()=>Kh,listRemotesTask:()=>Qh,remoteTask:()=>Xh,removeRemoteTask:()=>Zh});em=p({"src/lib/tasks/remote.ts"(){zh(),H()}}),Zo={};B(Zo,{stashListTask:()=>tm});rm=p({"src/lib/tasks/stash-list.ts"(){St(),ao(),Fn(),lo()}}),ea={};B(ea,{addSubModuleTask:()=>nm,initSubModuleTask:()=>im,subModuleTask:()=>or,updateSubModuleTask:()=>sm});om=p({"src/lib/tasks/sub-module.ts"(){H()}});cm=p({"src/lib/responses/TagList.ts"(){ns=class{constructor(e,t){this.all=e,this.latest=t}},ra=function(e,t=!1){let r=e.split(`
`).map(um).filter(Boolean);t||r.sort(function(i,s){let o=i.split("."),a=s.split(".");if(o.length===1||a.length===1)return am(Wt(o[0]),Wt(a[0]));for(let u=0,f=Math.max(o.length,a.length);u<f;u++){let c=ta(Wt(o[u]),Wt(a[u]));if(c)return c}return 0});let n=t?r[0]:[...r].reverse().find(i=>i.indexOf(".")>=0);return new ns(r,n)}}}),na={};B(na,{addAnnotatedTagTask:()=>hm,addTagTask:()=>fm,tagListTask:()=>lm});mm=p({"src/lib/tasks/tag.ts"(){cm()}}),dm=Ll({"src/git.js"(e,t){var{GitExecutor:r}=(wf(),I(Ks)),{SimpleGitApi:n}=(dh(),I(Ao)),{Scheduler:i}=(ph(),I(Po)),{configurationErrorTask:s}=(H(),I(en)),{asArray:o,filterArray:a,filterPrimitives:u,filterString:f,filterStringOrStringArray:c,filterType:l,getTrailingOptions:h,trailingFunctionArgument:m,trailingOptionsArgument:g}=(S(),I(bs)),{applyPatchTask:w}=(yh(),I(Ro)),{branchTask:b,branchLocalTask:T,deleteBranchesTask:M,deleteBranchTask:G}=(xh(),I(jo)),{checkIgnoreTask:me}=(Ph(),I(Ho)),{checkIsRepoTask:ot}=(Os(),I(Ss)),{cloneTask:Ce,cloneMirrorTask:at}=(Rh(),I(Go)),{cleanWithOptionsTask:Te,isCleanOptionsArray:k}=(Ls(),I(Ns)),{diffSummaryTask:E}=(Fn(),I(uo)),{fetchTask:O}=(Mh(),I(Jo)),{moveTask:W}=(Hh(),I(Yo)),{pullTask:U}=(Wh(),I(Ko)),{pushTagsTask:V}=(Co(),I(So)),{addRemoteTask:$,getRemotesTask:R,listRemotesTask:F,remoteTask:J,removeRemoteTask:D}=(em(),I(Xo)),{getResetMode:Qn,resetTask:Sc}=(Js(),I(Gs)),{stashListTask:Cc}=(rm(),I(Zo)),{addSubModuleTask:Tc,initSubModuleTask:Oc,subModuleTask:Ec,updateSubModuleTask:xc}=(om(),I(ea)),{addAnnotatedTagTask:Fc,addTagTask:Ac,tagListTask:Pc}=(mm(),I(na)),{straightThroughBufferTask:Dc,straightThroughStringTask:ve}=(H(),I(en));function v(d,y){this._executor=new r(d.binary,d.baseDir,new i(d.maxConcurrentProcesses),y),this._trimmed=d.trimmed}(v.prototype=Object.create(n.prototype)).constructor=v,v.prototype.customBinary=function(d){return this._executor.binary=d,this},v.prototype.env=function(d,y){return arguments.length===1&&typeof d=="object"?this._executor.env=d:(this._executor.env=this._executor.env||{})[d]=y,this},v.prototype.stashList=function(d){return this._runTask(Cc(g(arguments)||{},a(d)&&d||[]),m(arguments))};function Xn(d,y,A,Z){return typeof A!="string"?s(`git.${d}() requires a string 'repoPath'`):y(A,l(Z,f),h(arguments))}v.prototype.clone=function(){return this._runTask(Xn("clone",Ce,...arguments),m(arguments))},v.prototype.mirror=function(){return this._runTask(Xn("mirror",at,...arguments),m(arguments))},v.prototype.mv=function(d,y){return this._runTask(W(d,y),m(arguments))},v.prototype.checkoutLatestTag=function(d){var y=this;return this.pull(function(){y.tags(function(A,Z){y.checkout(Z.latest,d)})})},v.prototype.pull=function(d,y,A,Z){return this._runTask(U(l(d,f),l(y,f),h(arguments)),m(arguments))},v.prototype.fetch=function(d,y){return this._runTask(O(l(d,f),l(y,f),h(arguments)),m(arguments))},v.prototype.silent=function(d){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},v.prototype.tags=function(d,y){return this._runTask(Pc(h(arguments)),m(arguments))},v.prototype.rebase=function(){return this._runTask(ve(["rebase",...h(arguments)]),m(arguments))},v.prototype.reset=function(d){return this._runTask(Sc(Qn(d),h(arguments)),m(arguments))},v.prototype.revert=function(d){let y=m(arguments);return typeof d!="string"?this._runTask(s("Commit must be a string"),y):this._runTask(ve(["revert",...h(arguments,0,!0),d]),y)},v.prototype.addTag=function(d){let y=typeof d=="string"?Ac(d):s("Git.addTag requires a tag name");return this._runTask(y,m(arguments))},v.prototype.addAnnotatedTag=function(d,y){return this._runTask(Fc(d,y),m(arguments))},v.prototype.deleteLocalBranch=function(d,y,A){return this._runTask(G(d,typeof y=="boolean"?y:!1),m(arguments))},v.prototype.deleteLocalBranches=function(d,y,A){return this._runTask(M(d,typeof y=="boolean"?y:!1),m(arguments))},v.prototype.branch=function(d,y){return this._runTask(b(h(arguments)),m(arguments))},v.prototype.branchLocal=function(d){return this._runTask(T(),m(arguments))},v.prototype.raw=function(d){let y=!Array.isArray(d),A=[].slice.call(y?arguments:d,0);for(let pe=0;pe<A.length&&y;pe++)if(!u(A[pe])){A.splice(pe,A.length-pe);break}A.push(...h(arguments,0,!0));var Z=m(arguments);return A.length?this._runTask(ve(A,this._trimmed),Z):this._runTask(s("Raw: must supply one or more command to execute"),Z)},v.prototype.submoduleAdd=function(d,y,A){return this._runTask(Tc(d,y),m(arguments))},v.prototype.submoduleUpdate=function(d,y){return this._runTask(xc(h(arguments,!0)),m(arguments))},v.prototype.submoduleInit=function(d,y){return this._runTask(Oc(h(arguments,!0)),m(arguments))},v.prototype.subModule=function(d,y){return this._runTask(Ec(h(arguments)),m(arguments))},v.prototype.listRemote=function(){return this._runTask(F(h(arguments)),m(arguments))},v.prototype.addRemote=function(d,y,A){return this._runTask($(d,y,h(arguments)),m(arguments))},v.prototype.removeRemote=function(d,y){return this._runTask(D(d),m(arguments))},v.prototype.getRemotes=function(d,y){return this._runTask(R(d===!0),m(arguments))},v.prototype.remote=function(d,y){return this._runTask(J(h(arguments)),m(arguments))},v.prototype.tag=function(d,y){let A=h(arguments);return A[0]!=="tag"&&A.unshift("tag"),this._runTask(ve(A),m(arguments))},v.prototype.updateServerInfo=function(d){return this._runTask(ve(["update-server-info"]),m(arguments))},v.prototype.pushTags=function(d,y){let A=V({remote:l(d,f)},h(arguments));return this._runTask(A,m(arguments))},v.prototype.rm=function(d){return this._runTask(ve(["rm","-f",...o(d)]),m(arguments))},v.prototype.rmKeepLocal=function(d){return this._runTask(ve(["rm","--cached",...o(d)]),m(arguments))},v.prototype.catFile=function(d,y){return this._catFile("utf-8",arguments)},v.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},v.prototype._catFile=function(d,y){var A=m(y),Z=["cat-file"],pe=y[0];if(typeof pe=="string")return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),A);Array.isArray(pe)&&Z.push.apply(Z,pe);let Tr=d==="buffer"?Dc(Z):ve(Z);return this._runTask(Tr,A)},v.prototype.diff=function(d,y){let A=f(d)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):ve(["diff",...h(arguments)]);return this._runTask(A,m(arguments))},v.prototype.diffSummary=function(){return this._runTask(E(h(arguments,1)),m(arguments))},v.prototype.applyPatch=function(d){let y=c(d)?w(o(d),h([].slice.call(arguments,1))):s("git.applyPatch requires one or more string patches as the first argument");return this._runTask(y,m(arguments))},v.prototype.revparse=function(){let d=["rev-parse",...h(arguments,!0)];return this._runTask(ve(d,!0),m(arguments))},v.prototype.clean=function(d,y,A){let Z=k(d),pe=Z&&d.join("")||l(d,f)||"",Tr=h([].slice.call(arguments,Z?1:0));return this._runTask(Te(pe,Tr),m(arguments))},v.prototype.exec=function(d){let y={commands:[],format:"utf-8",parser(){typeof d=="function"&&d()}};return this._runTask(y)},v.prototype.clearQueue=function(){return this},v.prototype.checkIgnore=function(d,y){return this._runTask(me(o(l(d,c,[]))),m(arguments))},v.prototype.checkIsRepo=function(d,y){return this._runTask(ot(l(d,f)),m(arguments))},t.exports=v}});xe();pm=class extends Se{constructor(e,t){super(void 0,t),this.config=e}};xe();xe();Ie=class extends Se{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};et();us();Os();Ls();js();Hs();Js();S();S();is=(0,Qe.deferred)().promise;xe();S();Om=class{constructor(){this.plugins=new Set}add(e){let t=[];return Ee(e).forEach(r=>r&&this.plugins.add(x(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let n=t,i=Object.freeze(Object.create(r));for(let s of this.plugins)s.type===e&&(n=s.action(n,i));return n}};S();S();S();Pm=dm();et();$n=Dm});var oe=_(Rn=>{"use strict";Rn.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{e.call(this,...t,(i,s)=>i!=null?n(i):r(s))})},"name",{value:e.name})};Rn.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:e.name})}});var oa=_((Xg,sa)=>{var Fe=require("constants"),$m=process.cwd,ar=null,Rm=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ar||(ar=$m.call(process)),ar};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Nn=process.chdir,process.chdir=function(e){ar=null,Nn.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Nn));var Nn;sa.exports=Nm;function Nm(e){Fe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(c,l,h){h&&process.nextTick(h)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(c,l,h,m){m&&process.nextTick(m)},e.lchownSync=function(){}),Rm==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(c){function l(h,m,g){var w=Date.now(),b=0;c(h,m,function T(M){if(M&&(M.code==="EACCES"||M.code==="EPERM"||M.code==="EBUSY")&&Date.now()-w<6e4){setTimeout(function(){e.stat(m,function(G,me){G&&G.code==="ENOENT"?c(h,m,T):g(M)})},b),b<100&&(b+=10);return}g&&g(M)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(c){function l(h,m,g,w,b,T){var M;if(T&&typeof T=="function"){var G=0;M=function(me,ot,Ce){if(me&&me.code==="EAGAIN"&&G<10)return G++,c.call(e,h,m,g,w,b,M);T.apply(this,arguments)}}return c.call(e,h,m,g,w,b,M)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(c){return function(l,h,m,g,w){for(var b=0;;)try{return c.call(e,l,h,m,g,w)}catch(T){if(T.code==="EAGAIN"&&b<10){b++;continue}throw T}}}(e.readSync);function t(c){c.lchmod=function(l,h,m){c.open(l,Fe.O_WRONLY|Fe.O_SYMLINK,h,function(g,w){if(g){m&&m(g);return}c.fchmod(w,h,function(b){c.close(w,function(T){m&&m(b||T)})})})},c.lchmodSync=function(l,h){var m=c.openSync(l,Fe.O_WRONLY|Fe.O_SYMLINK,h),g=!0,w;try{w=c.fchmodSync(m,h),g=!1}finally{if(g)try{c.closeSync(m)}catch{}else c.closeSync(m)}return w}}function r(c){Fe.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(l,h,m,g){c.open(l,Fe.O_SYMLINK,function(w,b){if(w){g&&g(w);return}c.futimes(b,h,m,function(T){c.close(b,function(M){g&&g(T||M)})})})},c.lutimesSync=function(l,h,m){var g=c.openSync(l,Fe.O_SYMLINK),w,b=!0;try{w=c.futimesSync(g,h,m),b=!1}finally{if(b)try{c.closeSync(g)}catch{}else c.closeSync(g)}return w}):c.futimes&&(c.lutimes=function(l,h,m,g){g&&process.nextTick(g)},c.lutimesSync=function(){})}function n(c){return c&&function(l,h,m){return c.call(e,l,h,function(g){f(g)&&(g=null),m&&m.apply(this,arguments)})}}function i(c){return c&&function(l,h){try{return c.call(e,l,h)}catch(m){if(!f(m))throw m}}}function s(c){return c&&function(l,h,m,g){return c.call(e,l,h,m,function(w){f(w)&&(w=null),g&&g.apply(this,arguments)})}}function o(c){return c&&function(l,h,m){try{return c.call(e,l,h,m)}catch(g){if(!f(g))throw g}}}function a(c){return c&&function(l,h,m){typeof h=="function"&&(m=h,h=null);function g(w,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),m&&m.apply(this,arguments)}return h?c.call(e,l,h,g):c.call(e,l,g)}}function u(c){return c&&function(l,h){var m=h?c.call(e,l,h):c.call(e,l);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function f(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var ca=_((Zg,ua)=>{var aa=require("stream").Stream;ua.exports=qm;function qm(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);aa.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,u=o.length;a<u;a++){var f=o[a];this[f]=i[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(c,l){if(c){s.emit("error",c),s.readable=!1;return}s.fd=l,s.emit("open",l),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);aa.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var u=s[o];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var fa=_((ey,la)=>{"use strict";la.exports=Im;var Lm=Object.getPrototypeOf||function(e){return e.__proto__};function Im(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Lm(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var te=_((ty,In)=>{var L=require("fs"),Mm=oa(),jm=ca(),Bm=fa(),ur=require("util"),K,lr;typeof Symbol=="function"&&typeof Symbol.for=="function"?(K=Symbol.for("graceful-fs.queue"),lr=Symbol.for("graceful-fs.previous")):(K="___graceful-fs.queue",lr="___graceful-fs.previous");function Vm(){}function da(e,t){Object.defineProperty(e,K,{get:function(){return t}})}var Be=Vm;ur.debuglog?Be=ur.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Be=function(){var e=ur.format.apply(ur,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});L[K]||(ha=global[K]||[],da(L,ha),L.close=function(e){function t(r,n){return e.call(L,r,function(i){i||ma(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,lr,{value:e}),t}(L.close),L.closeSync=function(e){function t(r){e.apply(L,arguments),ma()}return Object.defineProperty(t,lr,{value:e}),t}(L.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Be(L[K]),require("assert").equal(L[K].length,0)}));var ha;global[K]||da(global,L[K]);In.exports=qn(Bm(L));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!L.__patched&&(In.exports=qn(L),L.__patched=!0);function qn(e){Mm(e),e.gracefulify=qn,e.createReadStream=ot,e.createWriteStream=Ce;var t=e.readFile;e.readFile=r;function r(k,E,O){return typeof E=="function"&&(O=E,E=null),W(k,E,O);function W(U,V,$,R){return t(U,V,function(F){F&&(F.code==="EMFILE"||F.code==="ENFILE")?tt([W,[U,V,$],F,R||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(k,E,O,W){return typeof O=="function"&&(W=O,O=null),U(k,E,O,W);function U(V,$,R,F,J){return n(V,$,R,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?tt([U,[V,$,R,F],D,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=o);function o(k,E,O,W){return typeof O=="function"&&(W=O,O=null),U(k,E,O,W);function U(V,$,R,F,J){return s(V,$,R,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?tt([U,[V,$,R,F],D,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=u);function u(k,E,O,W){return typeof O=="function"&&(W=O,O=0),U(k,E,O,W);function U(V,$,R,F,J){return a(V,$,R,function(D){D&&(D.code==="EMFILE"||D.code==="ENFILE")?tt([U,[V,$,R,F],D,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var f=e.readdir;e.readdir=l;var c=/^v[0-5]\./;function l(k,E,O){typeof E=="function"&&(O=E,E=null);var W=c.test(process.version)?function($,R,F,J){return f($,U($,R,F,J))}:function($,R,F,J){return f($,R,U($,R,F,J))};return W(k,E,O);function U(V,$,R,F){return function(J,D){J&&(J.code==="EMFILE"||J.code==="ENFILE")?tt([W,[V,$,R],J,F||Date.now(),Date.now()]):(D&&D.sort&&D.sort(),typeof R=="function"&&R.call(this,J,D))}}}if(process.version.substr(0,4)==="v0.8"){var h=jm(e);T=h.ReadStream,G=h.WriteStream}var m=e.ReadStream;m&&(T.prototype=Object.create(m.prototype),T.prototype.open=M);var g=e.WriteStream;g&&(G.prototype=Object.create(g.prototype),G.prototype.open=me),Object.defineProperty(e,"ReadStream",{get:function(){return T},set:function(k){T=k},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return G},set:function(k){G=k},enumerable:!0,configurable:!0});var w=T;Object.defineProperty(e,"FileReadStream",{get:function(){return w},set:function(k){w=k},enumerable:!0,configurable:!0});var b=G;Object.defineProperty(e,"FileWriteStream",{get:function(){return b},set:function(k){b=k},enumerable:!0,configurable:!0});function T(k,E){return this instanceof T?(m.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function M(){var k=this;Te(k.path,k.flags,k.mode,function(E,O){E?(k.autoClose&&k.destroy(),k.emit("error",E)):(k.fd=O,k.emit("open",O),k.read())})}function G(k,E){return this instanceof G?(g.apply(this,arguments),this):G.apply(Object.create(G.prototype),arguments)}function me(){var k=this;Te(k.path,k.flags,k.mode,function(E,O){E?(k.destroy(),k.emit("error",E)):(k.fd=O,k.emit("open",O))})}function ot(k,E){return new e.ReadStream(k,E)}function Ce(k,E){return new e.WriteStream(k,E)}var at=e.open;e.open=Te;function Te(k,E,O,W){return typeof O=="function"&&(W=O,O=null),U(k,E,O,W);function U(V,$,R,F,J){return at(V,$,R,function(D,Qn){D&&(D.code==="EMFILE"||D.code==="ENFILE")?tt([U,[V,$,R,F],D,J||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}return e}function tt(e){Be("ENQUEUE",e[0].name,e[1]),L[K].push(e),Ln()}var cr;function ma(){for(var e=Date.now(),t=0;t<L[K].length;++t)L[K][t].length>2&&(L[K][t][3]=e,L[K][t][4]=e);Ln()}function Ln(){if(clearTimeout(cr),cr=void 0,L[K].length!==0){var e=L[K].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)Be("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Be("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,u=Math.max(s-i,1),f=Math.min(u*1.2,100);a>=f?(Be("RETRY",t.name,r),t.apply(null,r.concat([i]))):L[K].push(e)}cr===void 0&&(cr=setTimeout(Ln,0))}}});var Ve=_(Ae=>{"use strict";var pa=oe().fromCallback,ae=te(),Hm=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof ae[e]=="function");Object.assign(Ae,ae);Hm.forEach(e=>{Ae[e]=pa(ae[e])});Ae.exists=function(e,t){return typeof t=="function"?ae.exists(e,t):new Promise(r=>ae.exists(e,r))};Ae.read=function(e,t,r,n,i,s){return typeof s=="function"?ae.read(e,t,r,n,i,s):new Promise((o,a)=>{ae.read(e,t,r,n,i,(u,f,c)=>{if(u)return a(u);o({bytesRead:f,buffer:c})})})};Ae.write=function(e,t,...r){return typeof r[r.length-1]=="function"?ae.write(e,t,...r):new Promise((n,i)=>{ae.write(e,t,...r,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffer:a})})})};typeof ae.writev=="function"&&(Ae.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?ae.writev(e,t,...r):new Promise((n,i)=>{ae.writev(e,t,...r,(s,o,a)=>{if(s)return i(s);n({bytesWritten:o,buffers:a})})})});typeof ae.realpath.native=="function"?Ae.realpath.native=pa(ae.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ya=_((ny,ga)=>{"use strict";var Gm=require("path");ga.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Gm.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var wa=_((iy,Mn)=>{"use strict";var _a=Ve(),{checkPath:va}=ya(),ka=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Mn.exports.makeDir=async(e,t)=>(va(e),_a.mkdir(e,{mode:ka(t),recursive:!0}));Mn.exports.makeDirSync=(e,t)=>(va(e),_a.mkdirSync(e,{mode:ka(t),recursive:!0}))});var ye=_((sy,ba)=>{"use strict";var Wm=oe().fromPromise,{makeDir:Um,makeDirSync:jn}=wa(),Bn=Wm(Um);ba.exports={mkdirs:Bn,mkdirsSync:jn,mkdirp:Bn,mkdirpSync:jn,ensureDir:Bn,ensureDirSync:jn}});var Pe=_((oy,Ca)=>{"use strict";var Jm=oe().fromPromise,Sa=Ve();function zm(e){return Sa.access(e).then(()=>!0).catch(()=>!1)}Ca.exports={pathExists:Jm(zm),pathExistsSync:Sa.existsSync}});var Vn=_((ay,Ta)=>{"use strict";var rt=te();function Ym(e,t,r,n){rt.open(e,"r+",(i,s)=>{if(i)return n(i);rt.futimes(s,t,r,o=>{rt.close(s,a=>{n&&n(o||a)})})})}function Km(e,t,r){let n=rt.openSync(e,"r+");return rt.futimesSync(n,t,r),rt.closeSync(n)}Ta.exports={utimesMillis:Ym,utimesMillisSync:Km}});var He=_((uy,xa)=>{"use strict";var nt=Ve(),z=require("path"),Qm=require("util");function Xm(e,t,r){let n=r.dereference?i=>nt.stat(i,{bigint:!0}):i=>nt.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function Zm(e,t,r){let n,i=r.dereference?o=>nt.statSync(o,{bigint:!0}):o=>nt.lstatSync(o,{bigint:!0}),s=i(e);try{n=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:n}}function ed(e,t,r,n,i){Qm.callbackify(Xm)(e,t,n,(s,o)=>{if(s)return i(s);let{srcStat:a,destStat:u}=o;if(u){if(Ct(a,u)){let f=z.basename(e),c=z.basename(t);return r==="move"&&f!==c&&f.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&Hn(e,t)?i(new Error(fr(e,t,r))):i(null,{srcStat:a,destStat:u})})}function td(e,t,r,n){let{srcStat:i,destStat:s}=Zm(e,t,n);if(s){if(Ct(i,s)){let o=z.basename(e),a=z.basename(t);if(r==="move"&&o!==a&&o.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Hn(e,t))throw new Error(fr(e,t,r));return{srcStat:i,destStat:s}}function Oa(e,t,r,n,i){let s=z.resolve(z.dirname(e)),o=z.resolve(z.dirname(r));if(o===s||o===z.parse(o).root)return i();nt.stat(o,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):Ct(t,u)?i(new Error(fr(e,r,n))):Oa(e,t,o,n,i))}function Ea(e,t,r,n){let i=z.resolve(z.dirname(e)),s=z.resolve(z.dirname(r));if(s===i||s===z.parse(s).root)return;let o;try{o=nt.statSync(s,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Ct(t,o))throw new Error(fr(e,r,n));return Ea(e,t,s,n)}function Ct(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Hn(e,t){let r=z.resolve(e).split(z.sep).filter(i=>i),n=z.resolve(t).split(z.sep).filter(i=>i);return r.reduce((i,s,o)=>i&&n[o]===s,!0)}function fr(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}xa.exports={checkPaths:ed,checkPathsSync:td,checkParentPaths:Oa,checkParentPathsSync:Ea,isSrcSubdir:Hn,areIdentical:Ct}});var qa=_((cy,Na)=>{"use strict";var ue=te(),Tt=require("path"),rd=ye().mkdirs,nd=Pe().pathExists,id=Vn().utimesMillis,Ot=He();function sd(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Ot.checkPaths(e,t,"copy",r,(i,s)=>{if(i)return n(i);let{srcStat:o,destStat:a}=s;Ot.checkParentPaths(e,o,t,"copy",u=>u?n(u):r.filter?Pa(Fa,a,e,t,r,n):Fa(a,e,t,r,n))})}function Fa(e,t,r,n,i){let s=Tt.dirname(r);nd(s,(o,a)=>{if(o)return i(o);if(a)return hr(e,t,r,n,i);rd(s,u=>u?i(u):hr(e,t,r,n,i))})}function Pa(e,t,r,n,i,s){Promise.resolve(i.filter(r,n)).then(o=>o?e(t,r,n,i,s):s(),o=>s(o))}function od(e,t,r,n,i){return n.filter?Pa(hr,e,t,r,n,i):hr(e,t,r,n,i)}function hr(e,t,r,n,i){(n.dereference?ue.stat:ue.lstat)(t,(o,a)=>o?i(o):a.isDirectory()?md(a,e,t,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?ad(a,e,t,r,n,i):a.isSymbolicLink()?gd(e,t,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function ad(e,t,r,n,i,s){return t?ud(e,r,n,i,s):Da(e,r,n,i,s)}function ud(e,t,r,n,i){if(n.overwrite)ue.unlink(r,s=>s?i(s):Da(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function Da(e,t,r,n,i){ue.copyFile(t,r,s=>s?i(s):n.preserveTimestamps?cd(e.mode,t,r,i):mr(r,e.mode,i))}function cd(e,t,r,n){return ld(e)?fd(r,e,i=>i?n(i):Aa(e,t,r,n)):Aa(e,t,r,n)}function ld(e){return(e&128)===0}function fd(e,t,r){return mr(e,t|128,r)}function Aa(e,t,r,n){hd(t,r,i=>i?n(i):mr(r,e,n))}function mr(e,t,r){return ue.chmod(e,t,r)}function hd(e,t,r){ue.stat(e,(n,i)=>n?r(n):id(t,i.atime,i.mtime,r))}function md(e,t,r,n,i,s){return t?$a(r,n,i,s):dd(e.mode,r,n,i,s)}function dd(e,t,r,n,i){ue.mkdir(r,s=>{if(s)return i(s);$a(t,r,n,o=>o?i(o):mr(r,e,i))})}function $a(e,t,r,n){ue.readdir(e,(i,s)=>i?n(i):Ra(s,e,t,r,n))}function Ra(e,t,r,n,i){let s=e.pop();return s?pd(e,s,t,r,n,i):i()}function pd(e,t,r,n,i,s){let o=Tt.join(r,t),a=Tt.join(n,t);Ot.checkPaths(o,a,"copy",i,(u,f)=>{if(u)return s(u);let{destStat:c}=f;od(c,o,a,i,l=>l?s(l):Ra(e,r,n,i,s))})}function gd(e,t,r,n,i){ue.readlink(t,(s,o)=>{if(s)return i(s);if(n.dereference&&(o=Tt.resolve(process.cwd(),o)),e)ue.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?ue.symlink(o,r,i):i(a):(n.dereference&&(u=Tt.resolve(process.cwd(),u)),Ot.isSrcSubdir(o,u)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&Ot.isSrcSubdir(u,o)?i(new Error(`Cannot overwrite '${u}' with '${o}'.`)):yd(o,r,i)));else return ue.symlink(o,r,i)})}function yd(e,t,r){ue.unlink(t,n=>n?r(n):ue.symlink(e,t,r))}Na.exports=sd});var Ba=_((ly,ja)=>{"use strict";var X=te(),Et=require("path"),_d=ye().mkdirsSync,vd=Vn().utimesMillisSync,xt=He();function kd(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=xt.checkPathsSync(e,t,"copy",r);return xt.checkParentPathsSync(e,n,t,"copy"),wd(i,e,t,r)}function wd(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=Et.dirname(r);return X.existsSync(i)||_d(i),La(e,t,r,n)}function bd(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return La(e,t,r,n)}function La(e,t,r,n){let s=(n.dereference?X.statSync:X.lstatSync)(t);if(s.isDirectory())return Fd(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Sd(s,e,t,r,n);if(s.isSymbolicLink())return Dd(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Sd(e,t,r,n,i){return t?Cd(e,r,n,i):Ia(e,r,n,i)}function Cd(e,t,r,n){if(n.overwrite)return X.unlinkSync(r),Ia(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Ia(e,t,r,n){return X.copyFileSync(t,r),n.preserveTimestamps&&Td(e.mode,t,r),Gn(r,e.mode)}function Td(e,t,r){return Od(e)&&Ed(r,e),xd(t,r)}function Od(e){return(e&128)===0}function Ed(e,t){return Gn(e,t|128)}function Gn(e,t){return X.chmodSync(e,t)}function xd(e,t){let r=X.statSync(e);return vd(t,r.atime,r.mtime)}function Fd(e,t,r,n,i){return t?Ma(r,n,i):Ad(e.mode,r,n,i)}function Ad(e,t,r,n){return X.mkdirSync(r),Ma(t,r,n),Gn(r,e)}function Ma(e,t,r){X.readdirSync(e).forEach(n=>Pd(n,e,t,r))}function Pd(e,t,r,n){let i=Et.join(t,e),s=Et.join(r,e),{destStat:o}=xt.checkPathsSync(i,s,"copy",n);return bd(o,i,s,n)}function Dd(e,t,r,n){let i=X.readlinkSync(t);if(n.dereference&&(i=Et.resolve(process.cwd(),i)),e){let s;try{s=X.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return X.symlinkSync(i,r);throw o}if(n.dereference&&(s=Et.resolve(process.cwd(),s)),xt.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(X.statSync(r).isDirectory()&&xt.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return $d(i,r)}else return X.symlinkSync(i,r)}function $d(e,t){return X.unlinkSync(t),X.symlinkSync(e,t)}ja.exports=kd});var dr=_((fy,Va)=>{"use strict";var Rd=oe().fromCallback;Va.exports={copy:Rd(qa()),copySync:Ba()}});var Qa=_((hy,Ka)=>{"use strict";var Ha=te(),Ja=require("path"),P=require("assert"),Ft=process.platform==="win32";function za(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Ha[r],r=r+"Sync",e[r]=e[r]||Ha[r]}),e.maxBusyTries=e.maxBusyTries||3}function Wn(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),P(e,"rimraf: missing path"),P.strictEqual(typeof e,"string","rimraf: path should be a string"),P.strictEqual(typeof r,"function","rimraf: callback function required"),P(t,"rimraf: invalid options argument provided"),P.strictEqual(typeof t,"object","rimraf: options should be object"),za(t),Ga(e,t,function i(s){if(s){if((s.code==="EBUSY"||s.code==="ENOTEMPTY"||s.code==="EPERM")&&n<t.maxBusyTries){n++;let o=n*100;return setTimeout(()=>Ga(e,t,i),o)}s.code==="ENOENT"&&(s=null)}r(s)})}function Ga(e,t,r){P(e),P(t),P(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Ft)return Wa(e,t,n,r);if(i&&i.isDirectory())return pr(e,t,n,r);t.unlink(e,s=>{if(s){if(s.code==="ENOENT")return r(null);if(s.code==="EPERM")return Ft?Wa(e,t,s,r):pr(e,t,s,r);if(s.code==="EISDIR")return pr(e,t,s,r)}return r(s)})})}function Wa(e,t,r,n){P(e),P(t),P(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(s,o)=>{s?n(s.code==="ENOENT"?null:r):o.isDirectory()?pr(e,t,r,n):t.unlink(e,n)})})}function Ua(e,t,r){let n;P(e),P(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?gr(e,t,r):t.unlinkSync(e)}function pr(e,t,r,n){P(e),P(t),P(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Nd(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Nd(e,t,r){P(e),P(t),P(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let s=i.length,o;if(s===0)return t.rmdir(e,r);i.forEach(a=>{Wn(Ja.join(e,a),t,u=>{if(!o){if(u)return r(o=u);--s===0&&t.rmdir(e,r)}})})})}function Ya(e,t){let r;t=t||{},za(t),P(e,"rimraf: missing path"),P.strictEqual(typeof e,"string","rimraf: path should be a string"),P(t,"rimraf: missing options"),P.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Ft&&Ua(e,t,n)}try{r&&r.isDirectory()?gr(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Ft?Ua(e,t,n):gr(e,t,n);if(n.code!=="EISDIR")throw n;gr(e,t,n)}}function gr(e,t,r){P(e),P(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")qd(e,t);else if(n.code!=="ENOENT")throw n}}function qd(e,t){if(P(e),P(t),t.readdirSync(e).forEach(r=>Ya(Ja.join(e,r),t)),Ft){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Ka.exports=Wn;Wn.sync=Ya});var At=_((my,Za)=>{"use strict";var yr=te(),Ld=oe().fromCallback,Xa=Qa();function Id(e,t){if(yr.rm)return yr.rm(e,{recursive:!0,force:!0},t);Xa(e,t)}function Md(e){if(yr.rmSync)return yr.rmSync(e,{recursive:!0,force:!0});Xa.sync(e)}Za.exports={remove:Ld(Id),removeSync:Md}});var au=_((dy,ou)=>{"use strict";var jd=oe().fromPromise,ru=Ve(),nu=require("path"),iu=ye(),su=At(),eu=jd(async function(t){let r;try{r=await ru.readdir(t)}catch{return iu.mkdirs(t)}return Promise.all(r.map(n=>su.remove(nu.join(t,n))))});function tu(e){let t;try{t=ru.readdirSync(e)}catch{return iu.mkdirsSync(e)}t.forEach(r=>{r=nu.join(e,r),su.removeSync(r)})}ou.exports={emptyDirSync:tu,emptydirSync:tu,emptyDir:eu,emptydir:eu}});var fu=_((py,lu)=>{"use strict";var Bd=oe().fromCallback,uu=require("path"),De=te(),cu=ye();function Vd(e,t){function r(){De.writeFile(e,"",n=>{if(n)return t(n);t()})}De.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let s=uu.dirname(e);De.stat(s,(o,a)=>{if(o)return o.code==="ENOENT"?cu.mkdirs(s,u=>{if(u)return t(u);r()}):t(o);a.isDirectory()?r():De.readdir(s,u=>{if(u)return t(u)})})})}function Hd(e){let t;try{t=De.statSync(e)}catch{}if(t&&t.isFile())return;let r=uu.dirname(e);try{De.statSync(r).isDirectory()||De.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")cu.mkdirsSync(r);else throw n}De.writeFileSync(e,"")}lu.exports={createFile:Bd(Vd),createFileSync:Hd}});var gu=_((gy,pu)=>{"use strict";var Gd=oe().fromCallback,hu=require("path"),$e=te(),mu=ye(),Wd=Pe().pathExists,{areIdentical:du}=He();function Ud(e,t,r){function n(i,s){$e.link(i,s,o=>{if(o)return r(o);r(null)})}$e.lstat(t,(i,s)=>{$e.lstat(e,(o,a)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),r(o);if(s&&du(a,s))return r(null);let u=hu.dirname(t);Wd(u,(f,c)=>{if(f)return r(f);if(c)return n(e,t);mu.mkdirs(u,l=>{if(l)return r(l);n(e,t)})})})})}function Jd(e,t){let r;try{r=$e.lstatSync(t)}catch{}try{let s=$e.lstatSync(e);if(r&&du(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=hu.dirname(t);return $e.existsSync(n)||mu.mkdirsSync(n),$e.linkSync(e,t)}pu.exports={createLink:Gd(Ud),createLinkSync:Jd}});var _u=_((yy,yu)=>{"use strict";var Re=require("path"),Pt=te(),zd=Pe().pathExists;function Yd(e,t,r){if(Re.isAbsolute(e))return Pt.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=Re.dirname(t),i=Re.join(n,e);return zd(i,(s,o)=>s?r(s):o?r(null,{toCwd:i,toDst:e}):Pt.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:Re.relative(n,e)})))}}function Kd(e,t){let r;if(Re.isAbsolute(e)){if(r=Pt.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=Re.dirname(t),i=Re.join(n,e);if(r=Pt.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Pt.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Re.relative(n,e)}}}yu.exports={symlinkPaths:Yd,symlinkPathsSync:Kd}});var wu=_((_y,ku)=>{"use strict";var vu=te();function Qd(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);vu.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function Xd(e,t){let r;if(t)return t;try{r=vu.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}ku.exports={symlinkType:Qd,symlinkTypeSync:Xd}});var Fu=_((vy,xu)=>{"use strict";var Zd=oe().fromCallback,Su=require("path"),_e=Ve(),Cu=ye(),ep=Cu.mkdirs,tp=Cu.mkdirsSync,Tu=_u(),rp=Tu.symlinkPaths,np=Tu.symlinkPathsSync,Ou=wu(),ip=Ou.symlinkType,sp=Ou.symlinkTypeSync,op=Pe().pathExists,{areIdentical:Eu}=He();function ap(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,_e.lstat(t,(i,s)=>{!i&&s.isSymbolicLink()?Promise.all([_e.stat(e),_e.stat(t)]).then(([o,a])=>{if(Eu(o,a))return n(null);bu(e,t,r,n)}):bu(e,t,r,n)})}function bu(e,t,r,n){rp(e,t,(i,s)=>{if(i)return n(i);e=s.toDst,ip(s.toCwd,r,(o,a)=>{if(o)return n(o);let u=Su.dirname(t);op(u,(f,c)=>{if(f)return n(f);if(c)return _e.symlink(e,t,a,n);ep(u,l=>{if(l)return n(l);_e.symlink(e,t,a,n)})})})})}function up(e,t,r){let n;try{n=_e.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let a=_e.statSync(e),u=_e.statSync(t);if(Eu(a,u))return}let i=np(e,t);e=i.toDst,r=sp(i.toCwd,r);let s=Su.dirname(t);return _e.existsSync(s)||tp(s),_e.symlinkSync(e,t,r)}xu.exports={createSymlink:Zd(ap),createSymlinkSync:up}});var Lu=_((ky,qu)=>{"use strict";var{createFile:Au,createFileSync:Pu}=fu(),{createLink:Du,createLinkSync:$u}=gu(),{createSymlink:Ru,createSymlinkSync:Nu}=Fu();qu.exports={createFile:Au,createFileSync:Pu,ensureFile:Au,ensureFileSync:Pu,createLink:Du,createLinkSync:$u,ensureLink:Du,ensureLinkSync:$u,createSymlink:Ru,createSymlinkSync:Nu,ensureSymlink:Ru,ensureSymlinkSync:Nu}});var _r=_((wy,Iu)=>{function cp(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let s=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+s}function lp(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Iu.exports={stringify:cp,stripBom:lp}});var Vu=_((by,Bu)=>{var it;try{it=te()}catch{it=require("fs")}var vr=oe(),{stringify:Mu,stripBom:ju}=_r();async function fp(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||it,n="throws"in t?t.throws:!0,i=await vr.fromCallback(r.readFile)(e,t);i=ju(i);let s;try{s=JSON.parse(i,t?t.reviver:null)}catch(o){if(n)throw o.message=`${e}: ${o.message}`,o;return null}return s}var hp=vr.fromPromise(fp);function mp(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||it,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=ju(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function dp(e,t,r={}){let n=r.fs||it,i=Mu(t,r);await vr.fromCallback(n.writeFile)(e,i,r)}var pp=vr.fromPromise(dp);function gp(e,t,r={}){let n=r.fs||it,i=Mu(t,r);return n.writeFileSync(e,i,r)}var yp={readFile:hp,readFileSync:mp,writeFile:pp,writeFileSync:gp};Bu.exports=yp});var Gu=_((Sy,Hu)=>{"use strict";var kr=Vu();Hu.exports={readJson:kr.readFile,readJsonSync:kr.readFileSync,writeJson:kr.writeFile,writeJsonSync:kr.writeFileSync}});var wr=_((Cy,Ju)=>{"use strict";var _p=oe().fromCallback,Dt=te(),Wu=require("path"),Uu=ye(),vp=Pe().pathExists;function kp(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Wu.dirname(e);vp(i,(s,o)=>{if(s)return n(s);if(o)return Dt.writeFile(e,t,r,n);Uu.mkdirs(i,a=>{if(a)return n(a);Dt.writeFile(e,t,r,n)})})}function wp(e,...t){let r=Wu.dirname(e);if(Dt.existsSync(r))return Dt.writeFileSync(e,...t);Uu.mkdirsSync(r),Dt.writeFileSync(e,...t)}Ju.exports={outputFile:_p(kp),outputFileSync:wp}});var Yu=_((Ty,zu)=>{"use strict";var{stringify:bp}=_r(),{outputFile:Sp}=wr();async function Cp(e,t,r={}){let n=bp(t,r);await Sp(e,n,r)}zu.exports=Cp});var Qu=_((Oy,Ku)=>{"use strict";var{stringify:Tp}=_r(),{outputFileSync:Op}=wr();function Ep(e,t,r){let n=Tp(t,r);Op(e,n,r)}Ku.exports=Ep});var Zu=_((Ey,Xu)=>{"use strict";var xp=oe().fromPromise,re=Gu();re.outputJson=xp(Yu());re.outputJsonSync=Qu();re.outputJSON=re.outputJson;re.outputJSONSync=re.outputJsonSync;re.writeJSON=re.writeJson;re.writeJSONSync=re.writeJsonSync;re.readJSON=re.readJson;re.readJSONSync=re.readJsonSync;Xu.exports=re});var ic=_((xy,nc)=>{"use strict";var Fp=te(),Jn=require("path"),Ap=dr().copy,rc=At().remove,Pp=ye().mkdirp,Dp=Pe().pathExists,ec=He();function $p(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;ec.checkPaths(e,t,"move",r,(s,o)=>{if(s)return n(s);let{srcStat:a,isChangingCase:u=!1}=o;ec.checkParentPaths(e,a,t,"move",f=>{if(f)return n(f);if(Rp(t))return tc(e,t,i,u,n);Pp(Jn.dirname(t),c=>c?n(c):tc(e,t,i,u,n))})})}function Rp(e){let t=Jn.dirname(e);return Jn.parse(t).root===t}function tc(e,t,r,n,i){if(n)return Un(e,t,r,i);if(r)return rc(t,s=>s?i(s):Un(e,t,r,i));Dp(t,(s,o)=>s?i(s):o?i(new Error("dest already exists.")):Un(e,t,r,i))}function Un(e,t,r,n){Fp.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):Np(e,t,r,n):n())}function Np(e,t,r,n){Ap(e,t,{overwrite:r,errorOnExist:!0},s=>s?n(s):rc(e,n))}nc.exports=$p});var cc=_((Fy,uc)=>{"use strict";var oc=te(),Yn=require("path"),qp=dr().copySync,ac=At().removeSync,Lp=ye().mkdirpSync,sc=He();function Ip(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=sc.checkPathsSync(e,t,"move",r);return sc.checkParentPathsSync(e,i,t,"move"),Mp(t)||Lp(Yn.dirname(t)),jp(e,t,n,s)}function Mp(e){let t=Yn.dirname(e);return Yn.parse(t).root===t}function jp(e,t,r,n){if(n)return zn(e,t,r);if(r)return ac(t),zn(e,t,r);if(oc.existsSync(t))throw new Error("dest already exists.");return zn(e,t,r)}function zn(e,t,r){try{oc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Bp(e,t,r)}}function Bp(e,t,r){return qp(e,t,{overwrite:r,errorOnExist:!0}),ac(e)}uc.exports=Ip});var fc=_((Ay,lc)=>{"use strict";var Vp=oe().fromCallback;lc.exports={move:Vp(ic()),moveSync:cc()}});var mc=_((Py,hc)=>{"use strict";hc.exports={...Ve(),...dr(),...au(),...Lu(),...Zu(),...ye(),...fc(),...wr(),...Pe(),...At()}});var we,dc,br,pc,gc,Ge,yc,_c,vc,kc=Ne(()=>{"use strict";we=ee(require("fs")),dc=require("child_process"),br=ee(require("path"));ia();pc=ee(mc()),gc=ee(ft());Hr();Ge=(0,gc.default)(ze),yc=async e=>{let t=br.default.resolve(e.localPath);we.default.existsSync(t)||we.default.mkdirSync(t,{recursive:!0}),we.default.readdirSync(t).length===0&&e.url&&await $n().clone(e.url,t);let r=$n(t,{binary:e.binary});if(!await r.checkIsRepo(_t.IS_REPO_ROOT))throw Error(`${t} is not a git repository!!!`);if(e.updateSubmodules&&(await r.submoduleInit(),await r.submoduleUpdate()),await r.fetch(),e.branch){let s=!1,o=await r.branchLocal();for(var i of o.all)if(i===e.branch){s=!0;break}let a=e.branch??"",u=e.startPoint??"";s?(o.current!==e.branch&&await r.checkout(a),await r.reset(Xe.HARD,[u])):await r.checkoutBranch(a,u)}},_c=async e=>{let t=br.default.resolve(e.target),r=br.default.resolve(e.path);if(we.default.existsSync(r)){let n=we.default.lstatSync(r);Ge(`LSTAT is symlink? ${n.isSymbolicLink()}, is directory? ${n.isDirectory()}`),e.forced&&(n.isSymbolicLink()||n.isFile()?(Ge(`Unlink ${r}`),we.default.unlinkSync(r)):n.isDirectory()&&(Ge(`Remove directory '${r}'`),(0,pc.removeSync)(r)))}if(we.default.existsSync(r))Ge(`Could not create symbolic link cause '${r}' already exists`);else{Ge(`Create symbolic link ${t} => ${r}`),we.default.symlinkSync(t,r,e.linkType);let n=we.default.lstatSync(r);Ge(`LSTAT is symlink? ${n.isSymbolicLink()}, is directory? ${n.isDirectory()}`)}},vc=async e=>{Ge(`Start execution... ${e.cmd}`),(0,dc.execSync)(e.cmd,{shell:e.shell,env:process.env,stdio:[process.stdin,process.stdout,process.stderr],encoding:"utf-8"})}});var bc=_(()=>{"use strict";var Cr=ee(require("path"));ki();wi();var Kn=ee(ft());Hr();kc();var Sr=vi(),st={},Hp=Cr.default.resolve(Sr.config);st=jr(Hp);var Rt="";st.verbose&&(Rt=`${ze}, ${ze}:*`);st.verboseGit&&(Rt=`${Rt},simple-git,simple-git:*`);Rt&&Kn.default.enable(Rt);var $t=(0,Kn.default)(ze),wc=Cr.default.resolve(process.cwd());console.log("######################################################################");console.log(`[${st.name}] Start task processing`);var Gp=async()=>{let e=st.tasks??[];Sr.tasks&&($t(`Filtering tasks by specified IDs : ${Sr.tasks}`),e=e.filter((r,n,i)=>{if(r.id!==void 0&&r.id!==null&&Sr.tasks?.includes(r.id)===!0)return r}));let t=e.length??0;for(let r=0;r<t;r++){let n=e[r],i=n.id!==void 0?`${r}/${n.id}/${n.type}`:`${r}/${n.type}`;if(n.enabled===!1){$t(`Pass the task without execution => ${i}`);continue}else $t(`Task : ${i}`);if(n.comment&&$t(n.comment),n.cwd){let s=Cr.default.resolve(n.cwd);$t(`Changing the current working directory => ${s}`),process.chdir(s)}n.type==="git-repo-prepare"?await yc(n):n.type==="symlink"?await _c(n):n.type==="cmd"&&await vc(n),process.chdir(wc)}};Gp().then(()=>{}).catch(e=>{throw e}).finally(()=>{process.chdir(wc),console.log(`[${st.name}] Tasks completed`),console.log("######################################################################")})});var Xy=ee(bc());
//# sourceMappingURL=cli.js.map
